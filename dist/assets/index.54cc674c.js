var I=Object.defineProperty,R=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var F=(t,a,s)=>a in t?I(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,f=(t,a)=>{for(var s in a||(a={}))S.call(a,s)&&F(t,s,a[s]);if(y)for(var s of y(a))B.call(a,s)&&F(t,s,a[s]);return t},g=(t,a)=>R(t,E(a));import{r as x,aP as L,aj as v,j as e,d as l,aM as b,h as p,B as T,aC as z,o as k,c as K,q as w,aQ as H,M as G}from"./vendor.019c2987.js";/* empty css               */import{u as O,M as Q}from"./index.39a9d99b.js";import{r as u,F as W}from"./index.6d111a23.js";import{C as $,A as J}from"./index.f880861f.js";import{P as U}from"./index.2695b224.js";import{S as D,F as V,a as X}from"./index.335c814c.js";import"./menu.419e6c15.js";import"./index.923f5d6c.js";import"./express.930f4cc0.js";import"./statusTag.766c2cba.js";/* empty css               *//* empty css              *//* empty css              */import"./index.c844fdd9.js";import"./entrepot.e592173e.js";/* empty css              */import"./style.200a6193.js";/* empty css               */function ge(){const t=["0-0","0-1","0-0-2"],[a,s]=x.exports.useState([]);x.exports.useState(t);const[i,j]=x.exports.useState(null),[c]=L(),M=O(),{data:h,loading:P,run:C}=v(()=>u.get({pageNum:1,pageSize:30}).then(n=>(j(n.data.data.list[0]),n.data.data.list))),N=v(n=>u.info(n).then(d=>{var o,m;s(((m=(o=d.data)==null?void 0:o.data)==null?void 0:m.menuIds)||[]),j(d.data.data)}));return e($,{formRef:c,createRequest:u.create,updateRequest:u.update,refreshRequest:C,children:e(J.Consumer,{children:({showType:n,setShowType:d,createAction:o,updateAction:m})=>l("div",{className:"bg-white p-4 pb-6",children:[l(b.Row,{gutter:[20,0],children:[l(b.Col,{span:6,className:"border-r border-neutral-3 pr-4",children:[l(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:[e(p.Title,{heading:6,className:"mb-0",children:"\u7528\u6237\u7EC4"}),e(T,{icon:e(z,{}),type:"primary",size:"small",className:"ml-auto",loading:P||N.loading,onClick:()=>{d(D.create)},children:"\u6DFB\u52A0"})]}),e(k,{children:h==null?void 0:h.map(r=>e("div",{onClick:()=>{N.run(r.id)},children:e(k.Item.Meta,{style:{height:76},className:K({"bg-gray-100":(i==null?void 0:i.id)===r.id},"hover:bg-gray-100 dark:hover:bg-zinc-500 cursor-pointer px-2 border-b border-neutral-3"),avatar:e(w,{children:r.roleName}),title:r.roleName,description:"\u7CFB\u7EDF\u5206\u7EC4"})},r.id))})]}),l(b.Col,{span:9,className:"border-neutral-3 pr-4",children:[e(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:e(p.Title,{heading:6,className:"mb-0",children:"\u529F\u80FD\u6743\u9650"})}),e(H,{checkable:!0,checkedKeys:a,onCheck:(r,q)=>{console.log(r,q),s(r)},fieldNames:{title:"menuName",key:"menuId"},renderTitle:r=>l("div",{children:[e("span",{className:"mr-2",children:r.menuName}),e(Q,{size:"small",menuType:r.menuType})]}),treeData:M.data||[]}),l("div",{className:"mt-10 flex justify-center gap-4",children:[e(U,{deleteRequest:()=>u.remove(i==null?void 0:i.id).then(r=>(C(),r))}),e(T,{type:"primary",loading:m.loading,onClick:()=>{m.run(g(f({},i),{menuIds:a}))},children:"\u4FDD\u5B58"})]})]})]}),e(G,g(f({},V),{confirmLoading:o==null?void 0:o.loading,onCancel:()=>{d(null),c.resetFields()},onOk:async()=>{const r=await c.validate();n===D.create&&o.run(r)},visible:!!n,title:`${X[n]}\u7528\u6237\u7EC4`,children:e(W,{form:c,labelLength:8,span:24,formItemConfigList:[{schema:{label:"\u7528\u6237\u7EC4\u540D\u79F0",span:12,field:"roleName",required:!0},control:"input"}]})}))]})})})}export{ge as default};
