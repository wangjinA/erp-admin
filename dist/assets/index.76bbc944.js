var R=Object.defineProperty,S=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var v=(e,r,t)=>r in e?R(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,h=(e,r)=>{for(var t in r||(r={}))B.call(r,t)&&v(e,t,r[t]);if(F)for(var t of F(r))L.call(r,t)&&v(e,t,r[t]);return e},x=(e,r)=>S(e,E(r));import{l as z,r as b,aP as K,aj as T,j as a,d as l,aM as j,h as f,B as k,aC as $,o as D,c as w,q as H,aQ as A,M as G}from"./vendor.019c2987.js";/* empty css               */import{u as O,M as Q}from"./index.59c43726.js";import{b as u}from"./index.923f5d6c.js";import{C as W,A as J}from"./index.f880861f.js";import{F as U}from"./index.6d111a23.js";import{P as V}from"./index.2695b224.js";import{S as I,F as X,a as Y}from"./index.335c814c.js";import"./menu.419e6c15.js";import"./express.930f4cc0.js";import"./statusTag.766c2cba.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              */import"./index.c844fdd9.js";import"./entrepot.e592173e.js";/* empty css              */import"./style.200a6193.js";const c={get(e){return u.post("/api/role/list",e)},create(e){return u.post("/api/role/insert",h({menuIds:[],roleCode:z.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},e))},remove(e){return u.get(`/api/role/remove/${e}`)},update(e){return u.post("/api/role/update",e)},info(e){return u.get(`/api/role/info/${e}`)}};function be(){const e=["0-0","0-1","0-0-2"],[r,t]=b.exports.useState([]);b.exports.useState(e);const[i,C]=b.exports.useState(null),[p]=K(),M=O(),{data:g,loading:P,run:y}=T(()=>c.get({pageNum:1,pageSize:30}).then(n=>(C(n.data.data.list[0]),n.data.data.list))),N=T(n=>c.info(n).then(d=>{var o,m;t(((m=(o=d.data)==null?void 0:o.data)==null?void 0:m.menuIds)||[]),C(d.data.data)}));return a(W,{formRef:p,createRequest:c.create,updateRequest:c.update,refreshRequest:y,children:a(J.Consumer,{children:({showType:n,setShowType:d,createAction:o,updateAction:m})=>l("div",{className:"bg-white p-4 pb-6",children:[l(j.Row,{gutter:[20,0],children:[l(j.Col,{span:6,className:"border-r border-neutral-3 pr-4",children:[l(f.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:[a(f.Title,{heading:6,className:"mb-0",children:"\u7528\u6237\u7EC4"}),a(k,{icon:a($,{}),type:"primary",size:"small",className:"ml-auto",loading:P||N.loading,onClick:()=>{d(I.create)},children:"\u6DFB\u52A0"})]}),a(D,{children:g==null?void 0:g.map(s=>a("div",{onClick:()=>{N.run(s.id)},children:a(D.Item.Meta,{style:{height:76},className:w({"bg-gray-100":(i==null?void 0:i.id)===s.id},"hover:bg-gray-100 dark:hover:bg-zinc-500 cursor-pointer px-2 border-b border-neutral-3"),avatar:a(H,{children:s.roleName}),title:s.roleName,description:"\u7CFB\u7EDF\u5206\u7EC4"})},s.id))})]}),l(j.Col,{span:9,className:"border-neutral-3 pr-4",children:[a(f.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:a(f.Title,{heading:6,className:"mb-0",children:"\u529F\u80FD\u6743\u9650"})}),a(A,{checkable:!0,checkedKeys:r,onCheck:(s,q)=>{console.log(s,q),t(s)},fieldNames:{title:"menuName",key:"menuId"},renderTitle:s=>l("div",{children:[a("span",{className:"mr-2",children:s.menuName}),a(Q,{size:"small",menuType:s.menuType})]}),treeData:M.data||[]}),l("div",{className:"mt-10 flex justify-center gap-4",children:[a(V,{deleteRequest:()=>c.remove(i==null?void 0:i.id).then(s=>(y(),s))}),a(k,{type:"primary",loading:m.loading,onClick:()=>{m.run(x(h({},i),{menuIds:r}))},children:"\u4FDD\u5B58"})]})]})]}),a(G,x(h({},X),{confirmLoading:o==null?void 0:o.loading,onCancel:()=>{d(null),p.resetFields()},onOk:async()=>{const s=await p.validate();n===I.create&&o.run(s)},visible:!!n,title:`${Y[n]}\u7528\u6237\u7EC4`,children:a(U,{form:p,labelLength:8,span:24,formItemConfigList:[{schema:{label:"\u7528\u6237\u7EC4\u540D\u79F0",span:12,field:"roleName",required:!0},control:"input"}]})}))]})})})}export{be as default};
