var $=Object.defineProperty,K=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var O=(u,r,e)=>r in u?$(u,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[r]=e,I=(u,r)=>{for(var e in r||(r={}))G.call(r,e)&&O(u,e,r[e]);if(V)for(var e of V(r))J.call(r,e)&&O(u,e,r[e]);return u},z=(u,r)=>K(u,W(r));import{r as c,ae as Q,l as U,_ as X,ag as L,af as Y,j as t,ax as M,d as P,br as b,c as R,s as Z,B as C,aO as ee,aB as re,p as ue}from"./vendor.7897a533.js";/* empty css               *//* empty css               */import{OrderCreateSchema1 as te,OrderCreateSchema2 as ne,OrderCreateSchema3 as se}from"./schema.e905735b.js";import{o as ae}from"./order.06171118.js";import{F as _}from"./index.0400ad0b.js";import{P as oe}from"./index.15739c72.js";import{H as q}from"./style.200a6193.js";import{a as ce}from"./index.627cc3c6.js";import{u as ie}from"./index.80f47301.js";import"./index.c8b77bef.js";/* empty css               */import"./dict.d6df7dec.js";import"./index.5c74a6e5.js";import"./entrepot.369b13c8.js";/* empty css              *//* empty css              *//* empty css              */import"./index.70508b9f.js";function le(u,r,e){var x=this,s=c.exports.useRef(null),F=c.exports.useRef(0),i=c.exports.useRef(null),m=c.exports.useRef([]),f=c.exports.useRef(),h=c.exports.useRef(),E=c.exports.useRef(u),B=c.exports.useRef(!0);E.current=u;var g=typeof window!="undefined",v=!r&&r!==0&&g;if(typeof u!="function")throw new TypeError("Expected a function");r=+r||0;var a=!!(e=e||{}).leading,n=!("trailing"in e)||!!e.trailing,p="maxWait"in e,d="debounceOnServer"in e&&!!e.debounceOnServer,A=p?Math.max(+e.maxWait||0,r):null;c.exports.useEffect(function(){return B.current=!0,function(){B.current=!1}},[]);var k=c.exports.useMemo(function(){var j=function(o){var l=m.current,D=f.current;return m.current=f.current=null,F.current=o,h.current=E.current.apply(D,l)},y=function(o,l){v&&cancelAnimationFrame(i.current),i.current=v?requestAnimationFrame(o):setTimeout(o,l)},N=function(o){if(!B.current)return!1;var l=o-s.current;return!s.current||l>=r||l<0||p&&o-F.current>=A},T=function(o){return i.current=null,n&&m.current?j(o):(m.current=f.current=null,h.current)},S=function o(){var l=Date.now();if(N(l))return T(l);if(B.current){var D=r-(l-s.current),H=p?Math.min(D,A-(l-F.current)):D;y(o,H)}},w=function(){if(g||d){var o=Date.now(),l=N(o);if(m.current=[].slice.call(arguments),f.current=x,s.current=o,l){if(!i.current&&B.current)return F.current=s.current,y(S,r),a?j(s.current):h.current;if(p)return y(S,r),j(s.current)}return i.current||y(S,r),h.current}};return w.cancel=function(){i.current&&(v?cancelAnimationFrame(i.current):clearTimeout(i.current)),F.current=0,m.current=s.current=f.current=i.current=null},w.isPending=function(){return!!i.current},w.flush=function(){return i.current?T(Date.now()):h.current},w},[a,p,r,A,n,v,g,d]);return k}const me="_container_xm0e8_1",pe="_wrapper_xm0e8_7",de="_form_xm0e8_11";var Fe={container:me,wrapper:pe,form:de,"form-extra":"_form-extra_xm0e8_16"};const fe={"en-US":{"menu.form":"Form","menu.form.step":"Step Form","stepForm.title":"Create a channel form","stepForm.next":"Next","stepForm.prev":"Prev","stepForm.title.basicInfo":"Basic Information","stepForm.desc.basicInfo":"Create event channel","stepForm.title.channel":"Channel Information","stepForm.desc.channel":"Enter detailed channel content","stepForm.title.created":"Complete creation","stepForm.desc.created":"Created successfully","stepForm.basicInfo.name":"Event name","stepForm.basicInfo.name.required":"Please enter the event name","stepForm.basicInfo.name.placeholder":"Enter Chinese characters, letters or numbers, up to 20 characters","stepForm.basicInfo.channelType":"Channel Type","stepForm.basicInfo.channelType.required":"Please select the channel type","stepForm.basicInfo.time":"Promotion time","stepForm.basicInfo.time.required":"Please select the promotion time","stepForm.basicInfo.link":"Promotion URL","stepForm.basicInfo.link.placeholder":"Please enter the promotion page address","stepForm.basicInfo.link.tips":"Such as Android or iOS download address, intermediate redirect URL, the URL must start with http:// or https://","stepForm.channel.source":"Advertising source","stepForm.channel.source.required":"Please enter the advertising source","stepForm.channel.source.placeholder":"Referral address: sohu, sina","stepForm.channel.media":"Advertising medium","stepForm.channel.media.required":"Please enter the advertising medium","stepForm.channel.media.placeholder":"Marketing media: cpc, bannner, edm","stepForm.channel.keywords":"Key words","stepForm.channel.remind":"Push reminder","stepForm.channel.content":"Advertising content","stepForm.channel.content.required":"Please enter the advertising content","stepForm.channel.content.placeholder":"Please enter the description of the advertisement content, no more than 200 words","stepForm.created.success.title":"Created successfully","stepForm.created.success.desc":"Form created successfully","stepForm.created.success.view":"View form","stepForm.created.success.again":"Create again","stepForm.created.extra.title":"Channel form description","stepForm.created.extra.desc":"Advertiser channel promotion supports the tracking of users who place ads on third-party advertisers to download App users, such as launching App download advertisements on Toutiao channels, and tracking users who activate App by downloading on channels. ","stepForm.created.extra.detail":"Details"},"zh-CN":{"menu.form":"\u8868\u5355\u9875","menu.form.step":"\u5206\u5E03\u8868\u5355","stepForm.title":"\u521B\u5EFA\u6E20\u9053\u8868\u5355","stepForm.next":"\u4E0B\u4E00\u6B65","stepForm.prev":"\u4E0A\u4E00\u6B65","stepForm.title.basicInfo":"\u57FA\u672C\u4FE1\u606F","stepForm.desc.basicInfo":"\u521B\u5EFA\u6D3B\u52A8\u6E20\u9053","stepForm.title.channel":"\u8F93\u5165\u6E20\u9053\u4FE1\u606F","stepForm.desc.channel":"\u8F93\u5165\u8BE6\u7EC6\u7684\u6E20\u9053\u5185\u5BB9","stepForm.title.created":"\u5B8C\u6210\u521B\u5EFA","stepForm.desc.created":"\u521B\u5EFA\u6210\u529F","stepForm.basicInfo.name":"\u6D3B\u52A8\u540D\u79F0","stepForm.basicInfo.name.required":"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0","stepForm.basicInfo.name.placeholder":"\u8F93\u5165\u6C49\u5B57\u3001\u5B57\u6BCD\u6216\u6570\u5B57\uFF0C\u6700\u591A20\u5B57\u7B26","stepForm.basicInfo.channelType":"\u6E20\u9053\u7C7B\u578B","stepForm.basicInfo.channelType.required":"\u8BF7\u9009\u62E9\u6E20\u9053\u7C7B\u578B","stepForm.basicInfo.time":"\u63A8\u5E7F\u65F6\u95F4","stepForm.basicInfo.time.required":"\u8BF7\u9009\u62E9\u63A8\u5E7F\u65F6\u95F4","stepForm.basicInfo.link":"\u63A8\u5E7F\u5730\u5740","stepForm.basicInfo.link.placeholder":"\u8BF7\u8F93\u5165\u63A8\u5E7F\u9875\u9762\u5730\u5740","stepForm.basicInfo.link.tips":"\u5982 Android \u6216 iOS \u7684\u4E0B\u8F7D\u5730\u5740\u3001\u4E2D\u95F4\u8DF3\u8F6CURL\uFF0C\u7F51\u5740\u5FC5\u987B\u4EE5 http:// \u6216 https:// \u5F00\u5934","stepForm.channel.source":"\u5E7F\u544A\u6765\u6E90","stepForm.channel.source.required":"\u8BF7\u8F93\u5165\u5E7F\u544A\u6765\u6E90","stepForm.channel.source.placeholder":"\u5F15\u8350\u6765\u6E90\u5730\u5740\uFF1Asohu\u3001sina","stepForm.channel.media":"\u5E7F\u544A\u5A92\u4ECB","stepForm.channel.media.required":"\u8BF7\u8F93\u5165\u5E7F\u544A\u5A92\u4ECB","stepForm.channel.media.placeholder":"\u8425\u9500\u5A92\u4ECB\uFF1Acpc\u3001bannner\u3001edm","stepForm.channel.keywords":"\u5173\u952E\u8BCD","stepForm.channel.remind":"\u63A8\u9001\u63D0\u9192","stepForm.channel.content":"\u5E7F\u544A\u5185\u5BB9","stepForm.channel.content.required":"\u8BF7\u8F93\u5165\u5E7F\u544A\u5185\u5BB9","stepForm.channel.content.placeholder":"\u8BF7\u8F93\u5165\u5E7F\u544A\u5185\u5BB9\u4ECB\u7ECD\uFF0C\u6700\u591A\u4E0D\u8D85\u8FC7200\u5B57","stepForm.created.success.title":"\u521B\u5EFA\u6210\u529F","stepForm.created.success.desc":"\u8868\u5355\u521B\u5EFA\u6210\u529F","stepForm.created.success.view":"\u67E5\u770B\u8868\u5355","stepForm.created.success.again":"\u518D\u6B21\u521B\u5EFA","stepForm.created.extra.title":"\u6E20\u9053\u8868\u5355\u8BF4\u660E","stepForm.created.extra.desc":"\u5E7F\u544A\u5546\u6E20\u9053\u63A8\u5E7F\u652F\u6301\u8FFD\u8E2A\u5728\u7B2C\u4E09\u65B9\u5E7F\u544A\u5546\u6295\u653E\u5E7F\u544A\u4E0B\u8F7DApp\u7528\u6237\u7684\u573A\u666F\uFF0C\u4F8B\u5982\u5728\u4ECA\u65E5\u5934\u6761\u6E20\u9053\u6295\u653E\u4E0B\u8F7DApp\u5E7F\u544A\uFF0C\u8FFD\u8E2A\u901A\u8FC7\u5728\u6E20\u9053\u4E0B\u8F7D\u6FC0\u6D3BApp\u7684\u7528\u6237\u3002","stepForm.created.extra.detail":"\u67E5\u770B\u8BE6\u60C5"}};var he=fe,Ne=()=>{const[u,r]=Q("create-order",{defaultValue:{}}),[e,x]=c.exports.useState(3),[s,F]=c.exports.useState((u.orderProductList||[{}]).map(a=>z(I({},a),{_id:U.exports.random(0,999999)}))),i=X(),m=c.exports.useRef([]),[f]=L.useForm(),[h]=L.useForm(),E=le(a=>{r(I(I({},u),a))},300),B=ie(he),g=Y(async()=>{console.log(u),await ce(()=>ae.insert(u)),x(e+1)},{manual:!0}),v=async()=>{var a;e===1?await f.validate():e===2?(console.log(m.current),await Promise.all((a=m.current)==null?void 0:a.map(n=>n.validate()))):e===3&&await h.validate(),x(e+1)};return c.exports.useEffect(()=>{console.log(u)},[]),console.log(u),t("div",{className:"bg-white p-4",children:t(M,{children:P("div",{className:Fe.wrapper,children:[P(b,{current:e,lineless:!0,className:"mb-20",children:[t(b.Step,{title:B["stepForm.title.basicInfo"],description:"\u8BA2\u5355\u57FA\u7840\u4FE1\u606F"}),t(b.Step,{title:"\u8BA2\u5355\u5546\u54C1\u4FE1\u606F",description:"\u8BE6\u7EC6\u7684\u5546\u54C1sku"}),t(b.Step,{title:"\u4E70\u5BB6\u57FA\u672C\u4FE1\u606F",description:"\u6536\u4EF6\u4EBA\u4FE1\u606F\u76F8\u5173"}),t(b.Step,{title:"\u5B8C\u6210\u521B\u5EFA",description:"\u521B\u5EFA\u6210\u529F"})]}),t(_,{form:f,initialValues:u,className:R(e!==1?q:""),span:12,size:"small",formItemConfigList:te,onValuesChange:(a,n)=>{E(n)}}),t("div",{className:R(e!==2?q:""),children:t(L.Provider,{onFormValuesChange:async(a,n,p)=>{const d=await Promise.all(s.map((A,k)=>p.forms[`orderProductList[${k}]`].validate()));E({orderProductList:d})},children:P("div",{className:"flex flex-col gap-4",children:[s.map((a,n)=>{var p;return t(M,{bordered:!0,title:`SKU - ${n+1}`,hoverable:!0,extra:s.length>1&&t(Z,{children:t(oe,{onOk:()=>{s.splice(n,1),E({orderProductList:u.orderProductList.filter((d,A)=>A!==n)}),F([...s])},children:t(C,{size:"mini",icon:t(ee,{}),shape:"circle",status:"danger",style:{margin:"0 20px"}})})}),children:t(_,{initialValues:(p=u.orderProductList)==null?void 0:p[n],id:`orderProductList[${n}]`,span:12,size:"small",formItemConfigList:ne,ref:d=>{d?m.current[n]=d:m.current.splice(n,1)},onValuesChange:(d,A)=>{E(A)}})},a._id)}),t(C,{type:"dashed",status:"success",className:"mt-4",icon:t(re,{}),onClick:()=>{s.push({_id:U.exports.random(0,999999)}),F([...s])},children:"\u6DFB\u52A0"})]})})}),t(_,{form:h,initialValues:u,className:R(e!==3?q:""),span:12,size:"small",formItemConfigList:se,onValuesChange:(a,n)=>{E(n)}}),e===4&&t(ue,{status:"success",title:B["stepForm.created.success.title"],subTitle:"\u8BA2\u5355\u521B\u5EFA\u6210\u529F",extra:[t(C,{style:{marginRight:16},onClick:()=>{x(1)},children:"\u7EE7\u7EED\u521B\u5EFA"},"reset"),t(C,{type:"primary",onClick:()=>{i.push("/client/order/alreadyPacked")},children:"\u67E5\u770B\u8BA2\u5355"},"again")]}),P("div",{className:"flex justify-center gap-4 mt-12",children:[e>1&&e<4&&t(C,{size:"large",onClick:()=>x(e-1),children:"\u4E0A\u4E00\u6B65"}),e<3&&t(C,{type:"primary",size:"large",onClick:v,children:"\u4E0B\u4E00\u6B65"}),e===3&&t(C,{type:"primary",size:"large",onClick:()=>{g.run()},loading:g.loading,children:"\u521B\u5EFA"})]})]})})})};export{Ne as default};
