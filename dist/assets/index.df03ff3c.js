var M=Object.defineProperty,N=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var g=(a,e,t)=>e in a?M(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,C=(a,e)=>{for(var t in e||(e={}))_.call(e,t)&&g(a,t,e[t]);if(y)for(var t of y(e))z.call(e,t)&&g(a,t,e[t]);return a},b=(a,e)=>N(a,$(e));import{j as r,z as x,b as o,x as P,r as d,ag as G,ak as c,f as m,av as q,ay as O}from"./vendor.bf1ca248.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{u as U}from"./index.0b126fb0.js";import{a as j}from"./axios.337a5ad0.js";import{i as K,P as W}from"./index.11a0f31b.js";import{C as k,I as H,T as A,A as F,b as E,L as J,S as Q}from"./index.a78bb3f4.js";import{C as w}from"./customer-tooltip.f5b4da59.js";import{u as V}from"./useChartTheme.84a56fc1.js";import{s as X,M as n}from"./setupMock.a4c06ed0.js";import"./card.61310d3e.js";/* empty css                *//* empty css                */import"./index.a7c81b2a.js";/* empty css                */function Y({data:a,loading:e}){return r(x,{loading:e,style:{width:"100%"},children:o(k,{height:370,padding:"auto",data:a,autoFit:!0,className:"chart-wrapper",children:[r(H,{adjust:"stack",color:["name",["#81E2FF","#00B2FF","#246EFF"]],position:"time*count",size:16,style:{radius:[2,2,0,0]}}),r(A,{crosshairs:{type:"x"},showCrosshairs:!0,shared:!0,children:(t,i)=>r(w,{title:t,data:i})}),r(F,{name:"count",label:{formatter(t){return`${Number(t)/1e3}k`}}}),r(E,{name:"name",marker:{symbol:"circle"}})]})})}const T=["#21CCFF","#313CA9","#249EFF"];function Z({data:a,loading:e}){return r(x,{loading:e,style:{width:"100%"},children:o(k,{theme:V(),forceUpdate:!0,height:370,padding:[10,20,120,60],data:a,autoFit:!0,scale:{time:"time"},className:"chart-wrapper",children:[r(J,{shape:"smooth",position:"time*rate",color:["name",T]}),r(A,{crosshairs:{type:"x"},showCrosshairs:!0,shared:!0,children:(t,i)=>r(w,{title:t,data:i})}),r(F,{name:"rate",label:{formatter(t){return`${Number(t)} %`}}}),r(E,{name:"name",marker:(t,i)=>({symbol:"circle",style:{fill:T[i],r:4}})}),r(Q,{foregroundStyle:{borderRadius:" 4px",fill:"l (180) 0:rgba(206, 224, 255, 0.9) 1:rgba(146, 186, 255, 0.8)",opacity:.3},trendCfg:{data:a.map(t=>t.rate),isArea:!0,areaStyle:{fill:"rgba(4, 135, 255, 0.15)",opacity:1},backgroundStyle:{fill:"#F2F3F5"},lineStyle:{stroke:"rgba(36, 158, 255, 0.3)",lineWidth:2}},handlerStyle:{fill:"#ffffff",opacity:1,width:22,height:22,stroke:"#165DFF"}})]})})}const h=a=>new Array(12).fill(0).map(()=>({y:n.Random.natural(20,100)})).map((t,i)=>b(C({},t),{x:i,name:a})),tt=()=>new Array(3).fill(0).map((a,e)=>({name:["\u7EAF\u6587\u672C","\u56FE\u6587\u7C7B","\u89C6\u9891\u7C7B"][e],count:n.Random.natural(20,100)}));X({setup:()=>{n.mock(new RegExp("/api/data-analysis/overview"),e=>{const{type:t}=P.parseUrl(e.url).query;return n.mock({count:()=>n.Random.natural(1e3,1e4),increment:()=>n.Random.boolean(),diff:()=>n.Random.natural(100,1e3),chartType:t,chartData:()=>t==="pie"?tt():t==="line"?[...h("\u7C7B\u76EE1"),...h("\u7C7B\u76EE2")]:h("\u7C7B\u76EE1")})});const a=e=>{const t=new Array(12).fill(0).map((i,l)=>{const u=l*2;return u<9?`0${u}:00`:`${u}:00`});return new Array(12).fill(0).map((i,l)=>({name:e,time:t[l],count:n.Random.natural(1e3,5e3),rate:n.Random.natural(0,100)}))};n.mock(new RegExp("/api/data-analysis/content-publishing"),()=>[...a("\u7EAF\u6587\u672C"),...a("\u89C6\u9891\u7C7B"),...a("\u56FE\u6587\u7C7B")]),n.mock(new RegExp("/api/data-analysis/author-list"),()=>n.mock({"list|8":[{"id|+1":1,author:()=>n.Random.pick(["\u7528\u9B54\u6CD5\u6253\u8D25\u9B54\u6CD5","\u738B\u591A\u9C7C","Christopher","\u53EB\u6211\u5C0F\u674E\u597D\u4E86","\u9648\u76AE\u8BDD\u6885\u7CD6","\u78B3\u70E4\u5C0F\u80A5\u7F8A"]),time:function(){return new Array(12).fill(0).map((e,t)=>{const i=t*2;return i<9?`0${i}:00`:`${i}:00`})[this.id%12]},contentCount:()=>n.Random.natural(1e3,5e3),clickCount:()=>n.Random.natural(5e3,3e4)}]}))}});const{Row:D,Col:f}=O;function Ft(){const a=U(K),[e,t]=d.exports.useState(!1),[i,l]=d.exports.useState(!1),[u,R]=d.exports.useState([]),[S,B]=d.exports.useState([]),L=async()=>{t(!0);const{data:s}=await j.get("/api/data-analysis/content-publishing").finally(()=>t(!1));R(s)},v=async()=>{l(!0);const{data:s}=await j.get("/api/data-analysis/author-list").finally(()=>l(!1));B(s.list)};d.exports.useEffect(()=>{L(),v()},[]);const I=d.exports.useMemo(()=>[{title:a["dataAnalysis.authorTable.rank"],dataIndex:"id"},{title:a["dataAnalysis.authorTable.author"],dataIndex:"author"},{title:a["dataAnalysis.authorTable.content"],dataIndex:"contentCount",sorter:(s,p)=>s.contentCount-p.contentCount,render(s){return Number(s).toLocaleString()}},{title:a["dataAnalysis.authorTable.click"],dataIndex:"clickCount",sorter:(s,p)=>s.clickCount-p.clickCount,render(s){return Number(s).toLocaleString()}}],[a]);return o(G,{size:16,direction:"vertical",style:{width:"100%"},children:[o(c,{children:[r(m.Title,{heading:6,children:a["dataAnalysis.title.publicOpinion"]}),r(W,{})]}),o(D,{gutter:16,children:[r(f,{span:14,children:o(c,{children:[r(m.Title,{heading:6,children:a["dataAnalysis.title.publishingRate"]}),r(Y,{data:u,loading:e})]})}),r(f,{span:10,children:o(c,{children:[r(m.Title,{heading:6,children:a["dataAnalysis.title.authorsList"]}),r("div",{style:{height:"370px"},children:r(q,{rowKey:"id",loading:i,pagination:!1,data:S,columns:I})})]})})]}),r(D,{children:r(f,{span:24,children:o(c,{children:[r(m.Title,{heading:6,children:a["dataAnalysis.title.publishingTiming"]}),r(Z,{data:u,loading:e})]})})})]})}export{Ft as default};
