var R=Object.defineProperty,q=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var T=(n,e,i)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,f=(n,e)=>{for(var i in e||(e={}))M.call(e,i)&&T(n,i,e[i]);if(F)for(var i of F(e))S.call(e,i)&&T(n,i,e[i]);return n},h=(n,e)=>q(n,I(e));import{r as x,aO as B,ae as v,j as a,d,aL as g,i as p,B as D,aB as E,aP as z,M as K}from"./vendor.ad15203e.js";/* empty css               */import{MenuTypeTag as w}from"./index.c683d36e.js";import{e as H}from"./index.3c345a9e.js";import{r as m,F as O}from"./index.32f67d73.js";import{C as G,A as W}from"./index.651bda70.js";import{L as $}from"./index.69f8799a.js";import{P as J}from"./index.502761cb.js";import{S as P,F as Q,a as U}from"./index.b1191912.js";import"./express.e08cb3ca.js";import"./statusTag.766c2cba.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              */import"./index.c86d986a.js";import"./entrepot.07ce41c4.js";/* empty css              */import"./style.200a6193.js";/* empty css               */function he(){const n=["0-0","0-1","0-0-2"],[e,i]=x.exports.useState([]);x.exports.useState(n);const[s,j]=x.exports.useState(null),[u]=B(),k=H(),{data:c,loading:b,run:C}=v(()=>m.get({pageNum:1,pageSize:30}).then(t=>(j(t.data.data.list[0]),t.data.data.list))),N=v(()=>(s==null?void 0:s.id)?m.info(s.id).then(t=>{var l,o;i(((o=(l=t.data)==null?void 0:l.data)==null?void 0:o.menuIds)||[])}):null,{refreshDeps:[s==null?void 0:s.id]});return a(G,{formRef:u,createRequest:m.create,updateRequest:m.update,refreshRequest:C,children:a(W.Consumer,{children:({showType:t,setShowType:l,createAction:o,updateAction:y})=>d("div",{className:"bg-white p-4 pb-6",children:[d(g.Row,{gutter:[20,0],children:[d(g.Col,{span:6,className:"border-r border-neutral-3 pr-4",children:[d(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:[a(p.Title,{heading:6,className:"mb-0",children:"\u7528\u6237\u7EC4"}),a(D,{icon:a(E,{}),type:"primary",size:"small",className:"ml-auto",loading:b||N.loading,onClick:()=>{l(P.create)},children:"\u6DFB\u52A0"})]}),a($,{loading:b||N.loading,data:c==null?void 0:c.map(r=>({name:r.roleName,id:r.id})),active:s==null?void 0:s.id,onActive:r=>{j(r)}})]}),d(g.Col,{span:9,className:"border-neutral-3 pr-4",children:[a(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:a(p.Title,{heading:6,className:"mb-0",children:"\u529F\u80FD\u6743\u9650"})}),a(z,{checkable:!0,checkedKeys:e,onCheck:(r,L)=>{console.log(r,L),i(r)},fieldNames:{title:"menuName",key:"menuId"},renderTitle:r=>d("div",{children:[a("span",{className:"mr-2",children:r.menuName}),a(w,{size:"small",menuType:r.menuType})]}),treeData:k.data||[]}),d("div",{className:"mt-10 flex justify-center gap-4",children:[a(J,{deleteRequest:()=>m.remove(s==null?void 0:s.id).then(r=>(C(),r))}),a(D,{type:"primary",loading:y.loading,onClick:()=>{y.run(h(f({},s),{menuIds:e}))},children:"\u4FDD\u5B58"})]})]})]}),a(K,h(f({},Q),{confirmLoading:o==null?void 0:o.loading,onCancel:()=>{l(null),u.resetFields()},onOk:async()=>{const r=await u.validate();t===P.create&&o.run(r)},visible:!!t,title:`${U[t]}\u7528\u6237\u7EC4`,children:a(O,{form:u,labelLength:8,span:24,formItemConfigList:[{schema:{label:"\u7528\u6237\u7EC4\u540D\u79F0",span:12,field:"roleName",required:!0},control:"input"}]})}))]})})})}export{he as default};
