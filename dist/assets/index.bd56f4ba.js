var M=Object.defineProperty,O=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var D=(e,r,t)=>r in e?M(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,a=(e,r)=>{for(var t in r||(r={}))P.call(r,t)&&D(e,t,r[t]);if(E)for(var t of E(r))q.call(r,t)&&D(e,t,r[t]);return e},m=(e,r)=>O(e,G(r));var S=(e,r)=>{var t={};for(var n in e)P.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&E)for(var n of E(e))r.indexOf(n)<0&&q.call(e,n)&&(t[n]=e[n]);return t};import{d as V,j as u,P as J,aH as W,F as k,z as K,aI as T,B as Q,l as w,J as A,ae as X,r as $,aJ as Y,N as Z,ai as C,aK as H,I as _,S as ee,aj as U,R as re,aL as z,c as te}from"./vendor.ad15203e.js";/* empty css               *//* empty css              *//* empty css              */import{u as ae}from"./index.10a8fb09.js";import{b as p,i as se,c as ne,r as ue}from"./index.6a8b0597.js";/* empty css              */import{T as oe,b as le}from"./index.b1191912.js";import{H as ie}from"./style.200a6193.js";const pe=e=>{const{label:r,tipContent:t,toolTipProps:n={}}=e;return V("span",{children:[r,u(J,m(a({},n),{content:t,children:u(W,{style:{marginLeft:4}})}))]})},de=({label:e,tips:r,position:t="top"})=>r?u(pe,{label:e,tipContent:r,toolTipProps:{position:t}}):u(k,{children:e});var ce=e=>{const r=ae();return r.loading?u(K,{}):r.data?u(T.Group,m(a({},e),{children:[{label:"\u5168\u90E8",value:void 0},...r.data].map(t=>u(T,{className:"pl-0",value:t.value,children:({checked:n})=>u(Q,{tabIndex:-1,type:n?"primary":"default",children:t.label},t.value||"all")},t.value||"all"))})):u(k,{children:"-"})};const me={get(e){return p.post("/api/role/list",e)},create(e){return p.post("/api/role/insert",a({menuIds:[],roleCode:w.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},e))},remove(e){return p.get(`/api/role/remove/${e}`)},update(e){return p.post("/api/role/update",e)},info(e){return p.get(`/api/role/info/${e}`)}},fe={get(e){return p.post("/api/tenantry/role/list",e)},create(e){return p.post("/api/tenantry/role/insert",a({menuIds:[],roleCode:w.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},e))},remove(e){return p.get(`/api/tenantry/role/remove/${e}`)},update(e){return p.post("/api/tenantry/role/update",e)},info(e){return p.get(`/api/tenantry/role/info/${e}`)},getRoleUsers(e){return p.get(`/api/tenantry/role/user/info/${e}`)},saveRoleMenu(e){return p.post("/api/tenantry/role/menu/save/or/update",e)},saveRoleUser(e){return p.post("/api/tenantry/role/user/save/or/update",e)}};let B,N;function he(){return B=B||me.get({pageNum:1,pageSize:50}).then(e=>{var r;return(r=e.data.data)==null?void 0:r.list.map(t=>({label:t.roleName,value:t.id}))}),B}function ge(){return N=N||fe.get({pageNum:1,pageSize:50}).then(e=>{var r;return(r=e.data.data)==null?void 0:r.list.map(t=>({label:t.roleName,value:t.id}))}),N}function Fe(){return X(()=>se()?he():ge())}const xe=e=>{const r=Fe();return u(A,m(a({placeholder:"\u8BF7\u9009\u62E9"},e),{options:r.data,loading:r.loading}))};var ye=e=>{const b=e,{value:r,onChange:t,autoCard:n=!1,fileSize:g=10}=b,y=S(b,["value","onChange","autoCard","fileSize"]),F=ne(r).filter(Boolean),[d,i]=$.exports.useState(F.map(l=>({uid:l.split("/").pop(),url:l}))),v=`${ue.baseUrl}/api/file/upload`;return u(Y,a({multiple:!1,action:v,fileList:d,imagePreview:!0,accept:"image/*",beforeUpload:l=>{if(l.size>g*1024*1024){const o=`\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${g}M`;return Z.error(o),Promise.reject(new Error(o))}return Promise.resolve()},onRemove:l=>{i(d.filter(o=>o.url!==l.url))},listType:n?d.length?"picture-card":"text":"picture-card",onChange:l=>{const o=l.map(c=>{var x;return m(a({},c),{url:c.url||((x=c.response)==null?void 0:x.data)})});i(o);const h=o.map(c=>c.url).filter(Boolean);if(y.limit===1){const c=h[0];t(c)}else t(h)},tip:`\u4EC5\u652F\u6301${g}M\u4EE5\u4E0B`,onProgress:l=>{i(o=>o.map(h=>h.uid===l.uid?l:h))}},y))};const ve={flex:1},be=y=>{var F=y,{schema:e,control:r,formItemProps:t,controlProps:n}=F,g=S(F,["schema","control","formItemProps","controlProps"]);const{field:d,label:i="",tips:v,position:b,rules:l,defaultValue:o,required:h}=e,c=j=>{if(typeof r=="function")return r(j);if(typeof r=="object")return r;switch(r){case void 0:case"input":return u(U,a({placeholder:`\u8BF7\u8F93\u5165${i}`,allowClear:!0},n));case"radio":return u(T.Group,a({type:"button"},n));case"textarea":return u(U.TextArea,a({placeholder:"\u8BF7\u8F93\u5165",rows:4},n));case"switch":return u(ee,a({checkedText:"\u662F",uncheckedText:"\u5426"},n));case"select":return u(A,a({allowClear:!0,placeholder:`\u8BF7\u9009\u62E9${i}`},n));case"upload":return u(ye,a({},n));case"number":return u(_,a({placeholder:`\u8BF7\u8F93\u5165${i}`},n));case"datePicker":return u(H,a(a({},le),n));case"datePickerRange":return u(H.RangePicker,a(a({className:"w-full"},oe),n));case"entrepotRadio":return u(ce,a({},n));case"role":return u(xe,a({},n));default:return u("span",{children:r})}},x=o!==void 0?{initialValue:o}:{};return u(C.Item,m(a(a(a({colon:i?":":"",label:u(de,{label:i,tips:v,position:b}),field:d,rules:l||h?[{required:!0,message:["input","number"].includes(r)?`\u8BF7\u8F93\u5165${i}`:`\u8BF7\u5B8C\u5584${i}`}]:[],labelCol:{style:a({},i?{}:{display:"none"})},wrapperCol:ve},x),t),w.exports.omit(g,["render","showItemHandle","hideTable"])),{children:c(a({},e))}),d)};function Ie(e){return e.reduce((r,t)=>(t.schema.defaultValue!==void 0&&(r[t.schema.field]=t.schema.defaultValue),r),{})}const Re=re.forwardRef((b,v)=>{var l=b,{formItemConfigList:e,className:r="",labelCol:t,onValuesChange:n,gutter:g=[0,10],span:y=8,labelLength:F,initialValues:d}=l,i=S(l,["formItemConfigList","className","labelCol","onValuesChange","gutter","span","labelLength","initialValues"]);const o=$.exports.useRef(),[h,c]=$.exports.useState();$.exports.useImperativeHandle(v,()=>o.current),$.exports.useEffect(()=>{const s=a(a(a({},d),o.current.getFieldsValue()),Ie(e));setTimeout(()=>{var f;(f=o.current)==null||f.setFieldsValue(s),c(s)})},[e.map(s=>s.schema.field).toString()]);const x=e.some(s=>{var f,I,R;return s.schema.required||((f=s.formItemProps)==null?void 0:f.required)||((R=(I=s.formItemProps)==null?void 0:I.rules)==null?void 0:R.some(L=>L.required))})?.6:0,j=F||w.exports.max(e.map(s=>w.exports.isString(s.schema.label)?s.schema.label.length:0))+2+x;return u(C,m(a({ref:o,layout:"inline",labelCol:m(a({},t),{style:a({flex:`0 0 ${j}em`},t==null?void 0:t.style)}),onSubmit:s=>{console.log(s)},wrapperCol:{className:"w-0 flex-1"},onValuesChange:s=>{const f=o.current.getFieldsValue();n==null||n(s,f),c(f)},initialValues:d},i),{className:`${r} bg-white`,children:u(z.Row,{gutter:g,className:"w-full",children:[...e].filter(s=>s.schema.field||s.schema.key).map(s=>{var f,I,R;return(s.showItemHandle?s.showItemHandle(h):!0)?u(z.Col,{className:te(((f=s.formItemProps)==null?void 0:f.hidden)?ie:""),span:s.schema.span||y,children:be(m(a({},s),{formItemProps:m(a({},s.formItemProps),{labelCol:m(a(a({},t),(I=s.formItemProps)==null?void 0:I.labelCol),{style:s.schema.label?a({flex:`0 0 ${j}em`},t==null?void 0:t.style):{display:"none"}})}),schema:m(a({},s.schema),{defaultValue:(R=d==null?void 0:d[s.schema.field])!=null?R:s.schema.defaultValue})}))},s.schema.field||s.schema.key):null})})}))});var De=Re;export{ce as E,De as F,fe as a,me as r};
