var q=Object.defineProperty,I=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var F=(n,a,s)=>a in n?q(n,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[a]=s,g=(n,a)=>{for(var s in a||(a={}))E.call(a,s)&&F(n,s,a[s]);if(y)for(var s of y(a))S.call(a,s)&&F(n,s,a[s]);return n},f=(n,a)=>I(n,B(a));import{r as b,aQ as L,af as v,j as e,d as l,aN as x,h as p,B as T,aB as z,o as k,c as K,q as w,aR as H,M as G}from"./vendor.7897a533.js";import{u as O,M as Q}from"./index.07e36c83.js";import{r as u,F as W}from"./index.0400ad0b.js";import{C as $,A as J}from"./index.cb66718c.js";import{P as U}from"./index.15739c72.js";import{S as D,F as V,a as X}from"./index.70508b9f.js";import"./index.80f47301.js";import"./express.daedb911.js";import"./statusTag.766c2cba.js";import"./index.627cc3c6.js";/* empty css               *//* empty css              *//* empty css              */import"./index.5c74a6e5.js";import"./entrepot.369b13c8.js";/* empty css              */import"./style.200a6193.js";/* empty css               */function ge(){const n=["0-0","0-1","0-0-2"],[a,s]=b.exports.useState([]);b.exports.useState(n);const[i,j]=b.exports.useState(null),[c]=L(),M=O(),{data:h,loading:P,run:C}=v(()=>u.get({pageNum:1,pageSize:30}).then(t=>(j(t.data.data.list[0]),t.data.data.list))),N=v(t=>u.info(t).then(d=>{var o,m;s(((m=(o=d.data)==null?void 0:o.data)==null?void 0:m.menuIds)||[]),j(d.data.data)}));return e($,{formRef:c,createRequest:u.create,updateRequest:u.update,refreshRequest:C,children:e(J.Consumer,{children:({showType:t,setShowType:d,createAction:o,updateAction:m})=>l("div",{className:"bg-white p-4 pb-6",children:[l(x.Row,{gutter:[20,0],children:[l(x.Col,{span:6,className:"border-r border-neutral-3 pr-4",children:[l(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:[e(p.Title,{heading:6,className:"mb-0",children:"\u7528\u6237\u7EC4"}),e(T,{icon:e(z,{}),type:"primary",size:"small",className:"ml-auto",loading:P||N.loading,onClick:()=>{d(D.create)},children:"\u6DFB\u52A0"})]}),e(k,{children:h==null?void 0:h.map(r=>e("div",{onClick:()=>{N.run(r.id)},children:e(k.Item.Meta,{style:{height:76},className:K({"bg-gray-100":(i==null?void 0:i.id)===r.id},"hover:bg-gray-100 dark:hover:bg-zinc-500 cursor-pointer px-2 border-b border-neutral-3"),avatar:e(w,{children:r.roleName}),title:r.roleName,description:"\u7CFB\u7EDF\u5206\u7EC4"})},r.id))})]}),l(x.Col,{span:9,className:"border-neutral-3 pr-4",children:[e(p.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:e(p.Title,{heading:6,className:"mb-0",children:"\u529F\u80FD\u6743\u9650"})}),e(H,{checkable:!0,checkedKeys:a,onCheck:(r,R)=>{console.log(r,R),s(r)},fieldNames:{title:"menuName",key:"menuId"},renderTitle:r=>l("div",{children:[e("span",{className:"mr-2",children:r.menuName}),e(Q,{size:"small",menuType:r.menuType})]}),treeData:M.data||[]}),l("div",{className:"mt-10 flex justify-center gap-4",children:[e(U,{deleteRequest:()=>u.remove(i==null?void 0:i.id).then(r=>(C(),r))}),e(T,{type:"primary",loading:m.loading,onClick:()=>{m.run(f(g({},i),{menuIds:a}))},children:"\u4FDD\u5B58"})]})]})]}),e(G,f(g({},V),{confirmLoading:o==null?void 0:o.loading,onCancel:()=>{d(null),c.resetFields()},onOk:async()=>{const r=await c.validate();t===D.create&&o.run(r)},visible:!!t,title:`${X[t]}\u7528\u6237\u7EC4`,children:e(W,{form:c,labelLength:8,span:24,formItemConfigList:[{schema:{label:"\u7528\u6237\u7EC4\u540D\u79F0",span:12,field:"roleName",required:!0},control:"input"}]})}))]})})})}export{ge as default};
