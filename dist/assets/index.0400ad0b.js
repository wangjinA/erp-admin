var L=Object.defineProperty,M=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(e,r,a)=>r in e?L(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,t=(e,r)=>{for(var a in r||(r={}))S.call(r,a)&&D(e,a,r[a]);if(j)for(var a of j(r))N.call(r,a)&&D(e,a,r[a]);return e},p=(e,r)=>M(e,U(r));var E=(e,r)=>{var a={};for(var u in e)S.call(e,u)&&r.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&j)for(var u of j(e))r.indexOf(u)<0&&N.call(e,u)&&(a[u]=e[u]);return a};import{d as O,j as n,Q as z,aJ as G,F as P,E as V,aK as T,B as Q,l as $,N as k,af as J,r as w,aL as K,n as W,ag as q,aM as H,I as X,S as Y,ah as A,R as Z,aN as C,c as _}from"./vendor.7897a533.js";/* empty css               *//* empty css              *//* empty css              */import{u as ee}from"./index.5c74a6e5.js";import{b as R,g as re}from"./index.80f47301.js";/* empty css              */import{b as ae}from"./index.627cc3c6.js";import{T as te,b as se}from"./index.70508b9f.js";import{H as ue}from"./style.200a6193.js";const ne=e=>{const{label:r,tipContent:a,toolTipProps:u={}}=e;return O("span",{children:[r,n(z,p(t({},u),{content:a,children:n(G,{style:{marginLeft:4}})}))]})},le=({label:e,tips:r,position:a="top"})=>r?n(ne,{label:e,tipContent:r,toolTipProps:{position:a}}):n(P,{children:e});var oe=e=>{const r=ee();return r.loading?n(V,{}):r.data?n(T.Group,p(t({},e),{children:[{label:"\u5168\u90E8",value:void 0},...r.data].map(a=>n(T,{className:"pl-0",value:a.value,children:({checked:u})=>n(Q,{tabIndex:-1,type:u?"primary":"default",children:a.label},a.value||"all")},a.value))})):n(P,{children:"-"})};const ie={get(e){return R.post("/api/role/list",e)},create(e){return R.post("/api/role/insert",t({menuIds:[],roleCode:$.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},e))},remove(e){return R.get(`/api/role/remove/${e}`)},update(e){return R.post("/api/role/update",e)},info(e){return R.get(`/api/role/info/${e}`)}};let B;function ce(){return B=B||ie.get({pageNum:1,pageSize:100}).then(e=>{var r;return(r=e.data.data)==null?void 0:r.list.map(a=>({label:a.roleName,value:a.id}))}),B}function de(){return J(()=>ce())}const pe=e=>{const r=de();return n(k,p(t({placeholder:"\u8BF7\u9009\u62E9"},e),{options:r.data,loading:r.loading}))};var me=e=>{const v=e,{value:r,onChange:a,autoCard:u=!1,fileSize:h=10}=v,x=E(v,["value","onChange","autoCard","fileSize"]),F=ae(r).filter(Boolean),[c,i]=w.exports.useState(F.map(o=>({uid:o.split("/").pop(),url:o}))),b=`${re.baseUrl}/api/file/upload`;return n(K,t({multiple:!1,action:b,fileList:c,imagePreview:!0,accept:"image/*",beforeUpload:o=>{if(o.size>h*1024*1024){const l=`\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${h}M`;return W.error(l),Promise.reject(new Error(l))}return Promise.resolve()},onRemove:o=>{i(c.filter(l=>l.url!==o.url))},listType:u?c.length?"picture-card":"text":"picture-card",onChange:o=>{const l=o.map(d=>{var g;return p(t({},d),{url:d.url||((g=d.response)==null?void 0:g.data)})});i(l);const f=l.map(d=>d.url).filter(Boolean);if(x.limit===1){const d=f[0];a(d)}else a(f)},tip:`\u4EC5\u652F\u6301${h}M\u4EE5\u4E0B`,onProgress:o=>{i(l=>l.map(f=>f.uid===o.uid?o:f))}},x))};const fe={flex:1},he=x=>{var F=x,{schema:e,control:r,formItemProps:a,controlProps:u}=F,h=E(F,["schema","control","formItemProps","controlProps"]);const{field:c,label:i="",tips:b,position:v,rules:o,defaultValue:l,required:f}=e,d=s=>{if(typeof r=="function")return r(s);if(typeof r=="object")return r;switch(r){case void 0:case"input":return n(A,t({placeholder:`\u8BF7\u8F93\u5165${i}`,allowClear:!0},u));case"radio":return n(T.Group,t({type:"button"},u));case"textarea":return n(A.TextArea,t({placeholder:"\u8BF7\u8F93\u5165",rows:4},u));case"switch":return n(Y,t({checkedText:"\u662F",uncheckedText:"\u5426"},u));case"select":return n(k,t({allowClear:!0,placeholder:`\u8BF7\u9009\u62E9${i}`},u));case"upload":return n(me,t({},u));case"number":return n(X,t({placeholder:`\u8BF7\u8F93\u5165${i}`},u));case"datePicker":return n(H,t(t({},se),u));case"datePickerRange":return n(H.RangePicker,t(t({className:"w-full"},te),u));case"entrepotRadio":return n(oe,t({},u));case"role":return n(pe,t({},u));default:return n("span",{children:r})}},g=l!==void 0?{initialValue:l}:{};return n(q.Item,p(t(t(t({colon:i?":":"",label:n(le,{label:i,tips:b,position:v}),field:c,rules:o||f?[{required:!0,message:["input","number"].includes(r)?`\u8BF7\u8F93\u5165${i}`:`\u8BF7\u5B8C\u5584${i}`}]:[],labelCol:{style:t({},i?{}:{display:"none"})},wrapperCol:fe},g),a),$.exports.omit(h,["render","showItemHandle","hideTable"])),{children:d(t({},e))}),c)};function ge(e){return e.reduce((r,a)=>(a.schema.defaultValue!==void 0&&(r[a.schema.field]=a.schema.defaultValue),r),{})}const Fe=Z.forwardRef((v,b)=>{var o=v,{formItemConfigList:e,className:r="",labelCol:a,onValuesChange:u,gutter:h=[0,10],span:x=8,labelLength:F,initialValues:c}=o,i=E(o,["formItemConfigList","className","labelCol","onValuesChange","gutter","span","labelLength","initialValues"]);const l=w.exports.useRef(),[f,d]=w.exports.useState();w.exports.useImperativeHandle(b,()=>l.current),w.exports.useEffect(()=>{const s=t(t(t({},c),l.current.getFieldsValue()),ge(e));setTimeout(()=>{var m;(m=l.current)==null||m.setFieldsValue(s),d(s)})},[e.map(s=>s.schema.field).toString()]);const g=F||$.exports.max(e.map(s=>$.exports.isString(s.schema.label)?s.schema.label.length:0))+2+(e.some(s=>{var m,y;return s.schema.required||((y=(m=s.formItemProps)==null?void 0:m.rules)==null?void 0:y.some(I=>I.required))})?.6:0);return n(q,p(t({ref:l,layout:"inline",labelCol:p(t({},a),{style:t({flex:`0 0 ${g}em`},a==null?void 0:a.style)}),onSubmit:s=>{console.log(s)},wrapperCol:{className:"w-0 flex-1"},onValuesChange:s=>{const m=l.current.getFieldsValue();u==null||u(s,m),d(m)},initialValues:c},i),{className:`${r} bg-white`,children:n(C.Row,{gutter:h,className:"w-full",children:[...e].filter(s=>s.schema.field||s.schema.key).map(s=>{var m,y,I;return(s.showItemHandle?s.showItemHandle(f):!0)?n(C.Col,{className:_(((m=s.formItemProps)==null?void 0:m.hidden)?ue:""),span:s.schema.span||x,children:he(p(t({},s),{formItemProps:p(t({},s.formItemProps),{labelCol:p(t(t({},a),(y=s.formItemProps)==null?void 0:y.labelCol),{style:s.schema.label?t({flex:`0 0 ${g}em`},a==null?void 0:a.style):{display:"none"}})}),schema:p(t({},s.schema),{defaultValue:(I=c==null?void 0:c[s.schema.field])!=null?I:s.schema.defaultValue})}))},s.schema.field||s.schema.key):null})})}))});var Be=Fe;export{oe as E,Be as F,ie as r};
