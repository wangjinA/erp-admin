var L=Object.defineProperty,M=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var k=(e,r,a)=>r in e?L(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,t=(e,r)=>{for(var a in r||(r={}))S.call(r,a)&&k(e,a,r[a]);if(j)for(var a of j(r))N.call(r,a)&&k(e,a,r[a]);return e},p=(e,r)=>M(e,U(r));var E=(e,r)=>{var a={};for(var u in e)S.call(e,u)&&r.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&j)for(var u of j(e))r.indexOf(u)<0&&N.call(e,u)&&(a[u]=e[u]);return a};import{d as O,j as l,Q as z,aI as G,F as D,E as V,aJ as T,B as Q,l as $,N as P,aj as J,r as w,aK as K,n as W,ak as q,aL as H,I as X,S as Y,al as A,R as Z,aM as C,c as _}from"./vendor.019c2987.js";/* empty css               *//* empty css              *//* empty css              */import{u as ee}from"./index.c844fdd9.js";import{b as I,c as re,g as ae}from"./index.923f5d6c.js";/* empty css              */import{T as te,b as se}from"./index.335c814c.js";import{H as ue}from"./style.200a6193.js";const le=e=>{const{label:r,tipContent:a,toolTipProps:u={}}=e;return O("span",{children:[r,l(z,p(t({},u),{content:a,children:l(G,{style:{marginLeft:4}})}))]})},ne=({label:e,tips:r,position:a="top"})=>r?l(le,{label:e,tipContent:r,toolTipProps:{position:a}}):l(D,{children:e});var oe=e=>{const r=ee();return r.loading?l(V,{}):r.data?l(T.Group,p(t({},e),{children:[{label:"\u5168\u90E8",value:void 0},...r.data].map(a=>l(T,{className:"pl-0",value:a.value,children:({checked:u})=>l(Q,{tabIndex:-1,type:u?"primary":"default",children:a.label},a.value||"all")},a.value))})):l(D,{children:"-"})};const ce={get(e){return I.post("/api/role/list",e)},create(e){return I.post("/api/role/insert",t({menuIds:[],roleCode:$.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},e))},remove(e){return I.get(`/api/role/remove/${e}`)},update(e){return I.post("/api/role/update",e)},info(e){return I.get(`/api/role/info/${e}`)}};let B;function ie(){return B=B||ce.get({pageNum:1,pageSize:100}).then(e=>{var r;return(r=e.data.data)==null?void 0:r.list.map(a=>({label:a.roleName,value:a.id}))}),B}function de(){return J(()=>ie())}const pe=e=>{const r=de();return l(P,p(t({placeholder:"\u8BF7\u9009\u62E9"},e),{options:r.data,loading:r.loading}))};var me=e=>{const y=e,{value:r,onChange:a,autoCard:u=!1,fileSize:h=10}=y,x=E(y,["value","onChange","autoCard","fileSize"]),g=re(r).filter(Boolean),[i,c]=w.exports.useState(g.map(o=>({uid:o.split("/").pop(),url:o}))),v=`${ae.baseUrl}/api/file/upload`;return l(K,t({multiple:!1,action:v,fileList:i,imagePreview:!0,accept:"image/*",beforeUpload:o=>{if(o.size>h*1024*1024){const n=`\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${h}M`;return W.error(n),Promise.reject(new Error(n))}return Promise.resolve()},onRemove:o=>{c(i.filter(n=>n.url!==o.url))},listType:u?i.length?"picture-card":"text":"picture-card",onChange:o=>{const n=o.map(d=>{var F;return p(t({},d),{url:d.url||((F=d.response)==null?void 0:F.data)})});c(n);const f=n.map(d=>d.url).filter(Boolean);if(x.limit===1){const d=f[0];a(d)}else a(f)},tip:`\u4EC5\u652F\u6301${h}M\u4EE5\u4E0B`,onProgress:o=>{c(n=>n.map(f=>f.uid===o.uid?o:f))}},x))};const fe={flex:1},he=x=>{var g=x,{schema:e,control:r,formItemProps:a,controlProps:u}=g,h=E(g,["schema","control","formItemProps","controlProps"]);const{field:i,label:c="",tips:v,position:y,rules:o,defaultValue:n,required:f}=e,d=s=>{if(typeof r=="function")return r(s);if(typeof r=="object")return r;switch(r){case void 0:case"input":return l(A,t({placeholder:`\u8BF7\u8F93\u5165${c}`,allowClear:!0},u));case"radio":return l(T.Group,t({type:"button"},u));case"textarea":return l(A.TextArea,t({placeholder:"\u8BF7\u8F93\u5165",rows:4},u));case"switch":return l(Y,t({checkedText:"\u662F",uncheckedText:"\u5426"},u));case"select":return l(P,t({allowClear:!0,placeholder:`\u8BF7\u9009\u62E9${c}`},u));case"upload":return l(me,t({},u));case"number":return l(X,t({placeholder:`\u8BF7\u8F93\u5165${c}`},u));case"datePicker":return l(H,t(t({},se),u));case"datePickerRange":return l(H.RangePicker,t(t({className:"w-full"},te),u));case"entrepotRadio":return l(oe,t({},u));case"role":return l(pe,t({},u));default:return l("span",{children:r})}},F=n!==void 0?{initialValue:n}:{};return l(q.Item,p(t(t(t({colon:c?":":"",label:l(ne,{label:c,tips:v,position:y}),field:i,rules:o||f?[{required:!0,message:["input","number"].includes(r)?`\u8BF7\u8F93\u5165${c}`:`\u8BF7\u5B8C\u5584${c}`}]:[],labelCol:{style:t({},c?{}:{display:"none"})},wrapperCol:fe},F),a),$.exports.omit(h,["render","showItemHandle","hideTable"])),{children:d(t({},e))}),i)};function Fe(e){return e.reduce((r,a)=>(a.schema.defaultValue!==void 0&&(r[a.schema.field]=a.schema.defaultValue),r),{})}const ge=Z.forwardRef((y,v)=>{var o=y,{formItemConfigList:e,className:r="",labelCol:a,onValuesChange:u,gutter:h=[0,10],span:x=8,labelLength:g,initialValues:i}=o,c=E(o,["formItemConfigList","className","labelCol","onValuesChange","gutter","span","labelLength","initialValues"]);const n=w.exports.useRef(),[f,d]=w.exports.useState();w.exports.useImperativeHandle(v,()=>n.current),w.exports.useEffect(()=>{const s=t(t(t({},i),n.current.getFieldsValue()),Fe(e));setTimeout(()=>{var m;(m=n.current)==null||m.setFieldsValue(s),d(s)})},[e.map(s=>s.schema.field).toString()]);const F=g||$.exports.max(e.map(s=>$.exports.isString(s.schema.label)?s.schema.label.length:0))+2+(e.some(s=>{var m,b;return s.schema.required||((b=(m=s.formItemProps)==null?void 0:m.rules)==null?void 0:b.some(R=>R.required))})?.6:0);return l(q,p(t({ref:n,layout:"inline",labelCol:p(t({},a),{style:t({flex:`0 0 ${F}em`},a==null?void 0:a.style)}),onSubmit:s=>{console.log(s)},wrapperCol:{className:"w-0 flex-1"},onValuesChange:s=>{const m=n.current.getFieldsValue();u==null||u(s,m),d(m)},initialValues:i},c),{className:`${r} bg-white`,children:l(C.Row,{gutter:h,className:"w-full",children:[...e].filter(s=>s.schema.field||s.schema.key).map(s=>{var m,b,R;return(s.showItemHandle?s.showItemHandle(f):!0)?l(C.Col,{className:_(((m=s.formItemProps)==null?void 0:m.hidden)?ue:""),span:s.schema.span||x,children:he(p(t({},s),{formItemProps:p(t({},s.formItemProps),{labelCol:p(t(t({},a),(b=s.formItemProps)==null?void 0:b.labelCol),{style:s.schema.label?t({flex:`0 0 ${F}em`},a==null?void 0:a.style):{display:"none"}})}),schema:p(t({},s.schema),{defaultValue:(R=i==null?void 0:i[s.schema.field])!=null?R:s.schema.defaultValue})}))},s.schema.field||s.schema.key):null})})}))});var Te=ge;export{oe as E,Te as F,ce as r};
