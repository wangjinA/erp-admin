var T=Object.defineProperty,k=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var x=(s,t,a)=>t in s?T(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,o=(s,t)=>{for(var a in t||(t={}))w.call(t,a)&&x(s,a,t[a]);if(y)for(var a of y(t))L.call(t,a)&&x(s,a,t[a]);return s},c=(s,t)=>k(s,D(t));import{r as m,j as e,ay as N,b as l,ak as S,bc as I,aH as F,c as R,bd as A,be as G,z as P,f as $}from"./vendor.7ef05c4e.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{C as _,L as q,T as g,I as z}from"./index.d8f7a9ff.js";import{a as B}from"./axios.337a5ad0.js";import{u as E}from"./index.17f4ed81.js";import{l as H}from"./index.b0c339fc.js";import{I as M}from"./index.0dbe9fc7.js";const J="_card_19h7s_1",K="_statistic_19h7s_1",O="_title_19h7s_4",Q="_diff_19h7s_16",U="_tooltip_19h7s_24";var n={card:J,statistic:K,title:O,diff:Q,"diff-increment":"_diff-increment_19h7s_21",tooltip:U};const{Row:V,Col:W}=N,{Title:X,Text:Y}=$,v={pure:!0,autoFit:!0,height:80,padding:[0,10,0,10]};function j(s){const{items:t}=s;return e("div",{className:n.tooltip,children:t.map((a,r)=>e("div",{children:e(Y,{bold:!0,children:Number(a.data.y).toLocaleString()})},r))})}function Z(s){const{chartData:t}=s;return l(_,c(o({data:t},v),{children:[e(q,{position:"x*y",shape:["name",["smooth","dash"]],color:["name",["#165DFF","rgba(106,161,255,0.3)"]]}),e(g,{shared:!1,showCrosshairs:!0,children:(a,r)=>e(j,{items:r})})]}))}function tt(s){const{chartData:t}=s;return l(_,c(o({data:t},v),{children:[e(z,{position:"x*y",color:["x",a=>Number(a)%2==0?"#86DF6C":"#468DFF"]}),e(g,{shared:!1,children:(a,r)=>e(j,{items:r})}),e(M,{type:"active-region"})]}))}function et(s){const{chartType:t,title:a,count:r,increment:d,diff:h,chartData:p,loading:i}=s;return l(S,{className:n.card,children:[e("div",{className:n.statistic,children:e(I,{title:e(X,{heading:6,className:n.title,children:a}),loading:i,value:r,extra:e("div",{className:n["compare-yesterday"],children:i?e(F,{text:{rows:1},style:{width:"100px"},animation:!0}):l("span",{className:R(n.diff,{[n["diff-increment"]]:d}),children:[h,d?e(A,{}):e(G,{})]})}),groupSeparator:!0})}),e("div",{className:n.chart,children:l(P,{style:{width:"100%"},loading:i,children:[t==="interval"&&e(tt,{chartData:p}),t==="line"&&e(Z,{chartData:p})]})})]})}const C=[{key:"userRetentionTrend",type:"line"},{key:"userRetention",type:"interval"},{key:"contentConsumptionTrend",type:"line"},{key:"contentConsumption",type:"interval"}];function ht(){const s=E(H),[t,a]=m.exports.useState(!1),[r,d]=m.exports.useState(C.map(i=>c(o({},i),{chartType:i.type}))),h=async()=>{const i=C.map(async f=>{const{data:b}=await B.get(`/api/multi-dimension/card?type=${f.type}`).catch(()=>({data:{}}));return c(o({},b),{key:f.key,chartType:f.type})});a(!0);const u=await Promise.all(i).finally(()=>a(!1));d(u)};m.exports.useEffect(()=>{h()},[]);const p=m.exports.useMemo(()=>r.map(i=>c(o({},i),{title:s[`multiDAnalysis.cardList.${i.key}`]})),[s,r]);return e(V,{gutter:16,children:p.map((i,u)=>e(W,{span:6,children:e(et,c(o({},i),{loading:t}))},u))})}export{ht as default};
