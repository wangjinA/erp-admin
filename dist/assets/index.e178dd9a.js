var R=Object.defineProperty,q=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var T=(n,e,r)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,x=(n,e)=>{for(var r in e||(e={}))M.call(e,r)&&T(n,r,e[r]);if(F)for(var r of F(e))S.call(e,r)&&T(n,r,e[r]);return n},g=(n,e)=>q(n,I(e));import{r as j,aO as B,ae as v,j as a,d as o,aL as b,i as c,B as P,aB as E,aP as z,M as K}from"./vendor.ad15203e.js";/* empty css               */import{MenuTypeTag as w}from"./index.c3d944df.js";import{d as H}from"./index.6a8b0597.js";import{r as u,F as O}from"./index.bd56f4ba.js";import{C as G,A as W}from"./index.c4ccf43e.js";import{L as $}from"./index.69f8799a.js";import{P as J}from"./index.83e7bd00.js";import{S as D,F as Q,a as U}from"./index.b1191912.js";import"./express.f245d51a.js";import"./statusTag.766c2cba.js";/* empty css               *//* empty css               *//* empty css              *//* empty css              */import"./index.10a8fb09.js";import"./entrepot.01346301.js";/* empty css              */import"./style.200a6193.js";/* empty css               */function he(){const n=["0-0","0-1","0-0-2"],[e,r]=j.exports.useState([]);j.exports.useState(n);const[i,C]=j.exports.useState(null),[p]=B(),k=H(),{data:f,loading:N,run:y}=v(()=>u.get({pageNum:1,pageSize:30}).then(t=>(C(t.data.data.list[0]),t.data.data.list))),h=v(t=>u.info(t).then(l=>{var d,m;r(((m=(d=l.data)==null?void 0:d.data)==null?void 0:m.menuIds)||[]),C(l.data.data)}));return a(G,{formRef:p,createRequest:u.create,updateRequest:u.update,refreshRequest:y,children:a(W.Consumer,{children:({showType:t,setShowType:l,createAction:d,updateAction:m})=>o("div",{className:"bg-white p-4 pb-6",children:[o(b.Row,{gutter:[20,0],children:[o(b.Col,{span:6,className:"border-r border-neutral-3 pr-4",children:[o(c.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:[a(c.Title,{heading:6,className:"mb-0",children:"\u7528\u6237\u7EC4"}),a(P,{icon:a(E,{}),type:"primary",size:"small",className:"ml-auto",loading:N||h.loading,onClick:()=>{l(D.create)},children:"\u6DFB\u52A0"})]}),a($,{loading:N||h.loading,data:f==null?void 0:f.map(s=>({name:s.roleName,id:s.id})),active:i==null?void 0:i.id,onActive:s=>{h.run(s.id)}})]}),o(b.Col,{span:9,className:"border-neutral-3 pr-4",children:[a(c.Paragraph,{className:"flex items-baseline !mb-0 !mt-2",children:a(c.Title,{heading:6,className:"mb-0",children:"\u529F\u80FD\u6743\u9650"})}),a(z,{checkable:!0,checkedKeys:e,onCheck:(s,L)=>{console.log(s,L),r(s)},fieldNames:{title:"menuName",key:"menuId"},renderTitle:s=>o("div",{children:[a("span",{className:"mr-2",children:s.menuName}),a(w,{size:"small",menuType:s.menuType})]}),treeData:k.data||[]}),o("div",{className:"mt-10 flex justify-center gap-4",children:[a(J,{deleteRequest:()=>u.remove(i==null?void 0:i.id).then(s=>(y(),s))}),a(P,{type:"primary",loading:m.loading,onClick:()=>{m.run(g(x({},i),{menuIds:e}))},children:"\u4FDD\u5B58"})]})]})]}),a(K,g(x({},Q),{confirmLoading:d==null?void 0:d.loading,onCancel:()=>{l(null),p.resetFields()},onOk:async()=>{const s=await p.validate();t===D.create&&d.run(s)},visible:!!t,title:`${U[t]}\u7528\u6237\u7EC4`,children:a(O,{form:p,labelLength:8,span:24,formItemConfigList:[{schema:{label:"\u7528\u6237\u7EC4\u540D\u79F0",span:12,field:"roleName",required:!0},control:"input"}]})}))]})})})}export{he as default};
