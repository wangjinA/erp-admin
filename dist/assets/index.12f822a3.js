import{j as t,aJ as b,a as s,bB as L,u as I,r as c,aG as d}from"./index.8a0d17dd.js";import{S as v}from"./index.24284196.js";import"./index.cd1efda7.js";import"./index.bba7dae5.js";import"./index.c92b3c1c.js";import"./index.9cad66fc.js";import"./index.a7a53076.js";import{T as N}from"./index.fcf79fc4.js";import"./index.efb39cdf.js";import{C as m}from"./index.d445d7b8.js";import{a as y}from"./axios.3a03232d.js";import{i as $,P as G}from"./index.2f28030d.js";import{C as A,I as M,T as F,A as k,b as x,L as _,S as j}from"./index.2b37229f.js";import{C as E}from"./customer-tooltip.0f868146.js";import{u as P}from"./useChartTheme.823ef57e.js";import{s as z,M as i}from"./setupMock.d82fad95.js";import{G as q}from"./index.a74e574c.js";import"./b-tween.es.064e2a03.js";import"./merge.3ddb5d76.js";import"./card.459d3f0b.js";import"./index.72b801f6.js";import"./index.b3afe63d.js";import"./pad.569047dd.js";import"./index.8515167a.js";import"./index.655c6f99.js";function O({data:e,loading:n}){return t(b,{loading:n,style:{width:"100%"},children:s(A,{height:370,padding:"auto",data:e,autoFit:!0,className:"chart-wrapper",children:[t(M,{adjust:"stack",color:["name",["#81E2FF","#00B2FF","#246EFF"]],position:"time*count",size:16,style:{radius:[2,2,0,0]}}),t(F,{crosshairs:{type:"x"},showCrosshairs:!0,shared:!0,children:(a,r)=>t(E,{title:a,data:r})}),t(k,{name:"count",label:{formatter(a){return`${Number(a)/1e3}k`}}}),t(x,{name:"name",marker:{symbol:"circle"}})]})})}const C=["#21CCFF","#313CA9","#249EFF"];function U({data:e,loading:n}){return t(b,{loading:n,style:{width:"100%"},children:s(A,{theme:P(),forceUpdate:!0,height:370,padding:[10,20,120,60],data:e,autoFit:!0,scale:{time:"time"},className:"chart-wrapper",children:[t(_,{shape:"smooth",position:"time*rate",color:["name",C]}),t(F,{crosshairs:{type:"x"},showCrosshairs:!0,shared:!0,children:(a,r)=>t(E,{title:a,data:r})}),t(k,{name:"rate",label:{formatter(a){return`${Number(a)} %`}}}),t(x,{name:"name",marker:(a,r)=>({symbol:"circle",style:{fill:C[r],r:4}})}),t(j,{foregroundStyle:{borderRadius:" 4px",fill:"l (180) 0:rgba(206, 224, 255, 0.9) 1:rgba(146, 186, 255, 0.8)",opacity:.3},trendCfg:{data:e.map(a=>a.rate),isArea:!0,areaStyle:{fill:"rgba(4, 135, 255, 0.15)",opacity:1},backgroundStyle:{fill:"#F2F3F5"},lineStyle:{stroke:"rgba(36, 158, 255, 0.3)",lineWidth:2}},handlerStyle:{fill:"#ffffff",opacity:1,width:22,height:22,stroke:"#165DFF"}})]})})}const h=e=>new Array(12).fill(0).map(()=>({y:i.Random.natural(20,100)})).map((a,r)=>({...a,x:r,name:e})),J=()=>new Array(3).fill(0).map((e,n)=>({name:["\u7EAF\u6587\u672C","\u56FE\u6587\u7C7B","\u89C6\u9891\u7C7B"][n],count:i.Random.natural(20,100)}));z({setup:()=>{i.mock(new RegExp("/api/data-analysis/overview"),n=>{const{type:a}=L.parseUrl(n.url).query;return i.mock({count:()=>i.Random.natural(1e3,1e4),increment:()=>i.Random.boolean(),diff:()=>i.Random.natural(100,1e3),chartType:a,chartData:()=>a==="pie"?J():a==="line"?[...h("\u7C7B\u76EE1"),...h("\u7C7B\u76EE2")]:h("\u7C7B\u76EE1")})});const e=n=>{const a=new Array(12).fill(0).map((r,l)=>{const u=l*2;return u<9?`0${u}:00`:`${u}:00`});return new Array(12).fill(0).map((r,l)=>({name:n,time:a[l],count:i.Random.natural(1e3,5e3),rate:i.Random.natural(0,100)}))};i.mock(new RegExp("/api/data-analysis/content-publishing"),()=>[...e("\u7EAF\u6587\u672C"),...e("\u89C6\u9891\u7C7B"),...e("\u56FE\u6587\u7C7B")]),i.mock(new RegExp("/api/data-analysis/author-list"),()=>i.mock({"list|8":[{"id|+1":1,author:()=>i.Random.pick(["\u7528\u9B54\u6CD5\u6253\u8D25\u9B54\u6CD5","\u738B\u591A\u9C7C","Christopher","\u53EB\u6211\u5C0F\u674E\u597D\u4E86","\u9648\u76AE\u8BDD\u6885\u7CD6","\u78B3\u70E4\u5C0F\u80A5\u7F8A"]),time:function(){return new Array(12).fill(0).map((n,a)=>{const r=a*2;return r<9?`0${r}:00`:`${r}:00`})[this.id%12]},contentCount:()=>i.Random.natural(1e3,5e3),clickCount:()=>i.Random.natural(5e3,3e4)}]}))}});const{Row:g,Col:f}=q;function Ct(){const e=I($),[n,a]=c.exports.useState(!1),[r,l]=c.exports.useState(!1),[u,w]=c.exports.useState([]),[T,S]=c.exports.useState([]),B=async()=>{a(!0);const{data:o}=await y.get("/api/data-analysis/content-publishing").finally(()=>a(!1));w(o)},D=async()=>{l(!0);const{data:o}=await y.get("/api/data-analysis/author-list").finally(()=>l(!1));S(o.list)};c.exports.useEffect(()=>{B(),D()},[]);const R=c.exports.useMemo(()=>[{title:e["dataAnalysis.authorTable.rank"],dataIndex:"id"},{title:e["dataAnalysis.authorTable.author"],dataIndex:"author"},{title:e["dataAnalysis.authorTable.content"],dataIndex:"contentCount",sorter:(o,p)=>o.contentCount-p.contentCount,render(o){return Number(o).toLocaleString()}},{title:e["dataAnalysis.authorTable.click"],dataIndex:"clickCount",sorter:(o,p)=>o.clickCount-p.clickCount,render(o){return Number(o).toLocaleString()}}],[e]);return s(v,{size:16,direction:"vertical",style:{width:"100%"},children:[s(m,{children:[t(d.Title,{heading:6,children:e["dataAnalysis.title.publicOpinion"]}),t(G,{})]}),s(g,{gutter:16,children:[t(f,{span:14,children:s(m,{children:[t(d.Title,{heading:6,children:e["dataAnalysis.title.publishingRate"]}),t(O,{data:u,loading:n})]})}),t(f,{span:10,children:s(m,{children:[t(d.Title,{heading:6,children:e["dataAnalysis.title.authorsList"]}),t("div",{style:{height:"370px"},children:t(N,{rowKey:"id",loading:r,pagination:!1,data:T,columns:R})})]})})]}),t(g,{children:t(f,{span:24,children:s(m,{children:[t(d.Title,{heading:6,children:e["dataAnalysis.title.publishingTiming"]}),t(U,{data:u,loading:n})]})})})]})}export{Ct as default};
