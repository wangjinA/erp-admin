var C=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var T=(t,r,a)=>r in t?C(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,n=(t,r)=>{for(var a in r||(r={}))c.call(r,a)&&T(t,a,r[a]);if(o)for(var a of o(r))h.call(r,a)&&T(t,a,r[a]);return t},d=(t,r)=>E(t,I(r));var j=(t,r)=>{var a={};for(var e in t)c.call(t,e)&&r.indexOf(e)<0&&(a[e]=t[e]);if(t!=null&&o)for(var e of o(t))r.indexOf(e)<0&&h.call(t,e)&&(a[e]=t[e]);return a};import{r as M,R as q,af as b,b as s,l as f,al as x,S as P,H as R,n as v}from"./vendor.581b77cf.js";import{MenuTypeOptipns as l}from"./index.2c19240f.js";import{c as w,s as y,H as i,M as g,v as B,j as S,f as F}from"./index.25c2c087.js";import{e as A,S as N}from"./index.04370c22.js";import{c as k}from"./statusTag.1d433c1a.js";import"./index.16154476.js";import"./index.7553f754.js";import"./entrepot.937b7e14.js";import"./index.e1a43827.js";/* empty css               */import"./shopStore.b2b8e7ba.js";import"./index.110ec091.js";/* empty css              */import"./index.506e78cc.js";/* empty css               */import"./index.27d57268.js";/* empty css              */import"./style.4b618b1b.js";import"./clipboard.a809cca0.js";/* empty css               */import"./schema.a4de4ea7.js";/* empty css               */import"./schema.035d054d.js";function z(t){const u=t,{menuType:r}=u,a=j(u,["menuType"]),e=b(async()=>(await i.list({pageNum:1,pageSize:g,menuType:r==="C"?"M":"C"})).data.data.list.map(p=>({label:p.menuName,value:p.menuId})),{refreshDeps:[r]});return s(R,n({placeholder:"\u8BF7\u9009\u62E9",options:e.data||[],loading:e.loading},a))}function H({menuType:t,size:r}){var a;return s(v,{size:r,color:k[l.findIndex(e=>e.value===t)],children:(a=l.find(e=>e.value===t))==null?void 0:a.label})}var de=()=>{const[t,r]=M.exports.useState(),a=q.useRef();return b(async e=>{await w({content:"\u786E\u5B9A\u53D6\u6D88\uFF1F",okButtonProps:{status:"warning"}}),r(e),await y(()=>A.cancelReject(e.id)),a.current.refreshSearchTable()},{manual:!0}),s("div",{className:"p-4 bg-white",children:s(N,{majorKey:"menuId",ref:a,formProps:{onChange(e){console.log(e)}},name:"\u5E97\u94FA\u83DC\u5355",getListRequest:e=>i.list(d(n({},e),{pageNum:1,pageSize:g})).then(u=>(u.data.data.list=B(u.data.data.list),u.data.data.pageSize=1,u.data.data.total=u.data.data.list.length,u)),createRequest:i.create,updateRequest:i.update,removeRequest:i.remove,requestQueryTransform:e=>n(n(n({},f.exports.omit(e,["applyTime","rejectionTime"])),S(e.applyTime,"applyStartTime","applyEndTime")),S(e.rejectionTime,"rejectionStartTime","rejectionEndTime")),formItemConfigList:[{schema:{label:"\u540D\u79F0",field:"menuName",required:!0},isCreate:!0},{schema:{label:"\u83DC\u5355\u7C7B\u578B",field:"menuType",required:!0},isCreate:!0,control:"select",controlProps:{options:l},render(e){return s(H,{menuType:e})}},{schema:{label:"\u8DEF\u5F84",field:"menuPath"},isCreate:!0},{schema:{label:"\u7236\u7EA7\u83DC\u5355",field:"parentId"},isCreate:!0,hideTable:!0,showItemHandle(e){return!(!(e==null?void 0:e.menuType)||(e==null?void 0:e.menuType)==="M")},formItemProps:{noStyle:!0},control:s(x.Item,{noStyle:!0,shouldUpdate:(e,u)=>e.menuType!==u.menuType,children:e=>s(x.Item,{rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],field:"parentId",label:e.menuType==="C"?"\u76EE\u5F55":"\u83DC\u5355",children:s(z,{menuType:e.menuType})})})},{schema:{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime"},render(e){return F(e)}},{schema:{label:"\u4FEE\u6539\u65F6\u95F4",field:"updateTime"},render(e){return F(e)}},{schema:{label:"\u72B6\u6001",field:"menuStatus"},render(e,u){return s(P,{defaultChecked:e==="0",type:"line",checkedText:"\u542F\u7528",uncheckedText:"\u7981\u7528",onChange:m=>{y(()=>i.update(d(n({},f.exports.omit(u,"children")),{menuStatus:m?"0":"1"})))}})}}]})})};export{H as MenuTypeTag,de as default};
