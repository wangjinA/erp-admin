var Wa=Object.defineProperty,Va=Object.defineProperties;var Ga=Object.getOwnPropertyDescriptors;var sr=Object.getOwnPropertySymbols;var Yn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable;var ei=(t,e,i)=>e in t?Wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,q=(t,e)=>{for(var i in e||(e={}))Yn.call(e,i)&&ei(t,i,e[i]);if(sr)for(var i of sr(e))Jn.call(e,i)&&ei(t,i,e[i]);return t},ue=(t,e)=>Va(t,Ga(e));var ft=(t,e)=>{var i={};for(var n in t)Yn.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&sr)for(var n of sr(t))e.indexOf(n)<0&&Jn.call(t,n)&&(i[n]=t[n]);return i};import{j as re,b as O,aD as Ka,K as we,r as se,af as _e,F as ve,B as me,z as $r,M as Te,E as ht,aK as lr,n as Le,Z as Ur,aL as qa,aJ as ct,aM as cr,ak as Ne,t as rt,at as dr,aN as Za,aO as Pt,H as zr,au as Xa,c as Me,aP as ti,aQ as ri,O as ni,aR as Qa,R as ii,Y as Ya,al as De,e as jr,aS as Ja,aT as ai,aU as oi,aV as Hr,aW as Wr,aX as eo,aY as ui,am as _t,l as Ce,o as fr,aZ as to,a_ as si,I as Vr,S as li,aI as Et,i as wt,as as ro,a5 as no,a$ as io,b0 as ao,b1 as oo,b2 as uo,q as ci,m as so,u as lo,b3 as co,b4 as fo,b5 as ho,aE as po,b6 as di,d as mo,b7 as go,b8 as vo,D as yo,G as fi,v as bo,b9 as _o,ba as Eo,bb as wo,bc as hi,bd as pi,be as Oo}from"./vendor.581b77cf.js";import{o as at,f as Vt,b as ie,i as pt,s as Ee,r as mi,a as Ze,c as nt,t as xo,d as So,e as gi,g as vi,C as Fo,h as Gr,j as hr,k as Gt,l as pr}from"./index.db58e438.js";import{S as Ye,F as Ao,a as Co,T as ko,b as Do,t as Bo}from"./index.16154476.js";import{b as Fe,E as Oe,a as Po,u as To,c as Io,d as yi,e as Ro}from"./index.f4301f1e.js";import{u as Kr,D as bi,a as qr}from"./index.da423918.js";/* empty css               */import{s as No}from"./shopStore.7a17f05b.js";import{M as Lo}from"./index.110ec091.js";/* empty css              */import{R as Mo,a as $o}from"./index.31bdb461.js";/* empty css               */import{R as Uo}from"./index.d4629795.js";/* empty css              */import{H as zo}from"./style.4b618b1b.js";import{c as jo}from"./clipboard.a809cca0.js";/* empty css               */import{e as Zr,s as _i}from"./entrepot.1530b3cd.js";import{getOrderFilter as Ho}from"./schema.292ea05a.js";/* empty css               */import{OrderCreateSchema2 as Wo}from"./schema.035d054d.js";function Vo({children:t,value:e,gap:i=4}){return re("span",{children:[t,O(Ka,{style:{cursor:"pointer",color:"rgb(22, 93, 255)",marginLeft:i},onClick:()=>{jo(e),we.success("\u590D\u5236\u6210\u529F")}})]})}var Ei=t=>{var u,o,f;const{buttonProps:e,id:i}=t,[n,r]=se.exports.useState(!1),a=_e(async()=>at.getLog(i).then(m=>m.data),{manual:!0});return re(ve,{children:[O(me,ue(q({icon:O($r,{}),onClick:()=>{a.run(),r(!0)}},e),{children:"\u64CD\u4F5C\u8BB0\u5F55"})),O(Te,{title:"\u64CD\u4F5C\u8BB0\u5F55",visible:n,onCancel:()=>r(!1),cancelText:"\u5173\u95ED",unmountOnExit:!0,onOk:async()=>{r(!1)},children:O(ht,{loading:a.loading,className:"mx-auto block max-h-96 overflow-y-auto",children:!a.loading&&((o=(u=a.data)==null?void 0:u.data.list)==null?void 0:o.length)?O(lr,{children:(f=a.data)==null?void 0:f.data.list.map(m=>re(lr.Item,{label:re("div",{children:[O("p",{children:m.operationContent||"-"}),re("p",{className:"mt-1",children:["\u64CD\u4F5C\u4EBA\uFF1A",m.operatorUser?O(Le,{color:"blue",size:"small",children:m.operatorUser}):"-"]})]}),children:[O("span",{children:m.operationProcedure}),O("span",{className:"ml-4 text-gray-500",children:Vt(m.createTime)})]},m.id))}):O(Ur,{description:"\u6682\u65E0\u8BB0\u5F55"})})})]})};const Be={getList(t){return ie.post("/api/logistics/order/list",t)},getDetail(t){return ie.get(`/api/logistics/order/info/${t}`)},insert(t){return ie.post("/api/logistics/order/insert",t)},cancel(t){return ie.post("/api/logistics/order/batch/cancel/order",{orderIdList:t})},refresh(t){return ie.post("/api/logistics/order/batch/update/order",t)},updateParameter(t){return ie.post("/api/logistics/order/update/shipping/parameter",t)},shipment(t){return ie.post("/api/logistics/order/arrange/shipment",t)},shipmentBatch(t){return ie.post("/api/logistics/order/arrange/shipmentBatch",t)},getShippingParameter(t){return ie.get(`/api/logistics/order/get/shipping/parameter/${t}`)},createShellOrder(t){return ie.get(`/api/logistics/order/get/tracking/number/${t}`)},saveOrder(t){return ie.post("/api/logistics/order/save/data",t)},exportOrderList(t){return ie.post("/api/logistics/order/exportXls",t,{responseType:"blob"})},getDownloadSheetFile(t){return ie.post("/api/logistics/order/getDownloadSheetFile",t)},countSheetFile(t){return ie.post("/api/logistics/order/countSheetFile",t)},exceptionOnHold(t){return ie.get("/api/logistics/order/mark/abeyance",{params:t})},overseasWarehouseReturnList(t){return ie.post("/api/logistics/order/overseasWarehouseReturn/list",t)},overseasWarehouseReturnCount(t){return ie.post("/api/logistics/order/overseasWarehouseReturn/count",t)},overseasWarehouseReturnRevocation(t){return ie.get(`/api/logistics/order/overseasWarehouseReturn/revocation/${t}`)},overseasWarehouseReturnDestroy(t){return ie.get(`/api/logistics/order/overseasWarehouseReturn/destroy/${t}`)},overseasWarehouseReturnDestroyBatch(t){return ie.post("/api/logistics/order/overseasWarehouseReturn/destroy/batch",t)},overseasWarehouseReturnReOutOverseasWarehouseReturnOrder(t){return ie.get("/api/logistics/order/overseasWarehouseReturn/reOutOverseasWarehouseReturnOrder",{params:t})},updatePickingStatus(t){return ie.get(`/api/logistics/order/mark/pickingProduct?productId=${t.productId}&pickingStatus=${t.pickingStatus}`)},updateConsignmentStatus(t){return ie.get(`/api/logistics/order/mark/delivery?orderNo=${t.orderNo}&consignmentStatus=${t.consignmentStatus}`)},updateRemark(t){return ie.get(`/api/logistics/order/stash/remark?id=${t.orderId}&remark=${t.remark}`)}};var wi={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(window,function(){return function(i){var n={};function r(a){if(n[a])return n[a].exports;var u=n[a]={i:a,l:!1,exports:{}};return i[a].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=i,r.c=n,r.d=function(a,u,o){r.o(a,u)||Object.defineProperty(a,u,{enumerable:!0,get:o})},r.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,u){if(u&1&&(a=r(a)),u&8||u&4&&typeof a=="object"&&a&&a.__esModule)return a;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),u&2&&typeof a!="string")for(var f in a)r.d(o,f,function(m){return a[m]}.bind(null,f));return o},r.n=function(a){var u=a&&a.__esModule?function(){return a.default}:function(){return a};return r.d(u,"a",u),u},r.o=function(a,u){return Object.prototype.hasOwnProperty.call(a,u)},r.p="",r(r.s=0)}({"./src/index.js":function(i,n,r){r.r(n),r("./src/sass/index.scss");var a=r("./src/js/init.js"),u=a.default.init;typeof window!="undefined"&&(window.printJS=u),n.default=u},"./src/js/browser.js":function(i,n,r){r.r(n);var a={isFirefox:function(){return typeof InstallTrigger!="undefined"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!a.isIE()&&!!window.StyleMedia},isChrome:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!o.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};n.default=a},"./src/js/functions.js":function(i,n,r){r.r(n),r.d(n,"addWrapper",function(){return f}),r.d(n,"capitalizePrint",function(){return m}),r.d(n,"collectStyles",function(){return l}),r.d(n,"addHeader",function(){return s}),r.d(n,"cleanUp",function(){return d}),r.d(n,"isRawHTML",function(){return v});var a=r("./src/js/modal.js"),u=r("./src/js/browser.js");function o(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(g){return typeof g}:o=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o(h)}function f(h,y){var g="font-family:"+y.font+" !important; font-size: "+y.font_size+" !important; width:100%;";return'<div style="'+g+'">'+h+"</div>"}function m(h){return h.charAt(0).toUpperCase()+h.slice(1)}function l(h,y){for(var g=document.defaultView||window,_="",w=g.getComputedStyle(h,""),A=0;A<w.length;A++)(y.targetStyles.indexOf("*")!==-1||y.targetStyle.indexOf(w[A])!==-1||c(y.targetStyles,w[A]))&&w.getPropertyValue(w[A])&&(_+=w[A]+":"+w.getPropertyValue(w[A])+";");return _+="max-width: "+y.maxWidth+"px !important; font-size: "+y.font_size+" !important;",_}function c(h,y){for(var g=0;g<h.length;g++)if(o(y)==="object"&&y.indexOf(h[g])!==-1)return!0;return!1}function s(h,y){var g=document.createElement("div");if(v(y.header))g.innerHTML=y.header;else{var _=document.createElement("h1"),w=document.createTextNode(y.header);_.appendChild(w),_.setAttribute("style",y.headerStyle),g.appendChild(_)}h.insertBefore(g,h.childNodes[0])}function d(h){h.showModal&&a.default.close(),h.onLoadingEnd&&h.onLoadingEnd(),(h.showModal||h.onLoadingStart)&&window.URL.revokeObjectURL(h.printable);var y="mouseover";(u.default.isChrome()||u.default.isFirefox())&&(y="focus");var g=function _(){window.removeEventListener(y,_),h.onPrintDialogClose();var w=document.getElementById(h.frameId);w&&w.remove()};window.addEventListener(y,g)}function v(h){var y=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return y.test(h)}},"./src/js/html.js":function(i,n,r){r.r(n);var a=r("./src/js/functions.js"),u=r("./src/js/print.js");function o(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(s){return typeof s}:o=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},o(l)}n.default={print:function(c,s){var d=m(c.printable)?c.printable:document.getElementById(c.printable);if(!d){window.console.error("Invalid HTML element id: "+c.printable);return}c.printableElement=f(d,c),c.header&&Object(a.addHeader)(c.printableElement,c),u.default.send(c,s)}};function f(l,c){for(var s=l.cloneNode(),d=Array.prototype.slice.call(l.childNodes),v=0;v<d.length;v++)if(c.ignoreElements.indexOf(d[v].id)===-1){var h=f(d[v],c);s.appendChild(h)}switch(c.scanStyles&&l.nodeType===1&&s.setAttribute("style",Object(a.collectStyles)(l,c)),l.tagName){case"SELECT":s.value=l.value;break;case"CANVAS":s.getContext("2d").drawImage(l,0,0);break}return s}function m(l){return o(l)==="object"&&l&&(l instanceof HTMLElement||l.nodeType===1)}},"./src/js/image.js":function(i,n,r){r.r(n);var a=r("./src/js/functions.js"),u=r("./src/js/print.js"),o=r("./src/js/browser.js");n.default={print:function(m,l){m.printable.constructor!==Array&&(m.printable=[m.printable]),m.printableElement=document.createElement("div"),m.printable.forEach(function(c){var s=document.createElement("img");if(s.setAttribute("style",m.imageStyle),s.src=c,o.default.isFirefox()){var d=s.src;s.src=d}var v=document.createElement("div");v.appendChild(s),m.printableElement.appendChild(v)}),m.header&&Object(a.addHeader)(m.printableElement,m),u.default.send(m,l)}}},"./src/js/init.js":function(i,n,r){r.r(n);var a=r("./src/js/browser.js"),u=r("./src/js/modal.js"),o=r("./src/js/pdf.js"),f=r("./src/js/html.js"),m=r("./src/js/raw-html.js"),l=r("./src/js/image.js"),c=r("./src/js/json.js");function s(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(y){return typeof y}:s=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},s(v)}var d=["pdf","html","image","json","raw-html"];n.default={init:function(){var h={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(C){throw C},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},y=arguments[0];if(y===void 0)throw new Error("printJS expects at least 1 attribute.");switch(s(y)){case"string":h.printable=encodeURI(y),h.fallbackPrintable=h.printable,h.type=arguments[1]||h.type;break;case"object":h.printable=y.printable,h.fallbackPrintable=typeof y.fallbackPrintable!="undefined"?y.fallbackPrintable:h.printable,h.fallbackPrintable=h.base64?"data:application/pdf;base64,".concat(h.fallbackPrintable):h.fallbackPrintable;for(var g in h)g==="printable"||g==="fallbackPrintable"||(h[g]=typeof y[g]!="undefined"?y[g]:h[g]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+s(y))}if(!h.printable)throw new Error("Missing printable information.");if(!h.type||typeof h.type!="string"||d.indexOf(h.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");h.showModal&&u.default.show(h),h.onLoadingStart&&h.onLoadingStart();var _=document.getElementById(h.frameId);_&&_.parentNode.removeChild(_);var w=document.createElement("iframe");switch(a.default.isFirefox()?w.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):w.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),w.setAttribute("id",h.frameId),h.type!=="pdf"&&(w.srcdoc="<html><head><title>"+h.documentTitle+"</title>",h.css&&(Array.isArray(h.css)||(h.css=[h.css]),h.css.forEach(function(B){w.srcdoc+='<link rel="stylesheet" href="'+B+'">'})),w.srcdoc+="</head><body></body></html>"),h.type){case"pdf":if(a.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var A=window.open(h.fallbackPrintable,"_blank");A.focus(),h.onIncompatibleBrowser()}catch(B){h.onError(B)}finally{h.showModal&&u.default.close(),h.onLoadingEnd&&h.onLoadingEnd()}else o.default.print(h,w);break;case"image":l.default.print(h,w);break;case"html":f.default.print(h,w);break;case"raw-html":m.default.print(h,w);break;case"json":c.default.print(h,w);break}}}},"./src/js/json.js":function(i,n,r){r.r(n);var a=r("./src/js/functions.js"),u=r("./src/js/print.js");function o(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(c){return typeof c}:o=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},o(m)}n.default={print:function(l,c){if(o(l.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof l.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!l.properties||!Array.isArray(l.properties))throw new Error("Invalid properties array for your JSON data.");l.properties=l.properties.map(function(s){return{field:o(s)==="object"?s.field:s,displayName:o(s)==="object"?s.displayName:s,columnSize:o(s)==="object"&&s.columnSize?s.columnSize+";":100/l.properties.length+"%;"}}),l.printableElement=document.createElement("div"),l.header&&Object(a.addHeader)(l.printableElement,l),l.printableElement.innerHTML+=f(l),u.default.send(l,c)}};function f(m){var l=m.printable,c=m.properties,s='<table style="border-collapse: collapse; width: 100%;">';m.repeatTableHeader&&(s+="<thead>"),s+="<tr>";for(var d=0;d<c.length;d++)s+='<th style="width:'+c[d].columnSize+";"+m.gridHeaderStyle+'">'+Object(a.capitalizePrint)(c[d].displayName)+"</th>";s+="</tr>",m.repeatTableHeader&&(s+="</thead>"),s+="<tbody>";for(var v=0;v<l.length;v++){s+="<tr>";for(var h=0;h<c.length;h++){var y=l[v],g=c[h].field.split(".");if(g.length>1)for(var _=0;_<g.length;_++)y=y[g[_]];else y=y[c[h].field];s+='<td style="width:'+c[h].columnSize+m.gridStyle+'">'+y+"</td>"}s+="</tr>"}return s+="</tbody></table>",s}},"./src/js/modal.js":function(i,n,r){r.r(n);var a={show:function(o){var f="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",m=document.createElement("div");m.setAttribute("style",f),m.setAttribute("id","printJS-Modal");var l=document.createElement("div");l.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var c=document.createElement("div");c.setAttribute("class","printClose"),c.setAttribute("id","printClose"),l.appendChild(c);var s=document.createElement("span");s.setAttribute("class","printSpinner"),l.appendChild(s);var d=document.createTextNode(o.modalMessage);l.appendChild(d),m.appendChild(l),document.getElementsByTagName("body")[0].appendChild(m),document.getElementById("printClose").addEventListener("click",function(){a.close()})},close:function(){var o=document.getElementById("printJS-Modal");o&&o.parentNode.removeChild(o)}};n.default=a},"./src/js/pdf.js":function(i,n,r){r.r(n);var a=r("./src/js/print.js"),u=r("./src/js/functions.js");n.default={print:function(m,l){if(m.base64){var c=Uint8Array.from(atob(m.printable),function(d){return d.charCodeAt(0)});o(m,l,c);return}m.printable=/^(blob|http|\/\/)/i.test(m.printable)?m.printable:window.location.origin+(m.printable.charAt(0)!=="/"?"/"+m.printable:m.printable);var s=new window.XMLHttpRequest;s.responseType="arraybuffer",s.addEventListener("error",function(){Object(u.cleanUp)(m),m.onError(s.statusText,s)}),s.addEventListener("load",function(){if([200,201].indexOf(s.status)===-1){Object(u.cleanUp)(m),m.onError(s.statusText,s);return}o(m,l,s.response)}),s.open("GET",m.printable,!0),s.send()}};function o(f,m,l){var c=new window.Blob([l],{type:"application/pdf"});c=window.URL.createObjectURL(c),m.setAttribute("src",c),a.default.send(f,m)}},"./src/js/print.js":function(i,n,r){r.r(n);var a=r("./src/js/browser.js"),u=r("./src/js/functions.js"),o={send:function(s,d){document.getElementsByTagName("body")[0].appendChild(d);var v=document.getElementById(s.frameId);v.onload=function(){if(s.type==="pdf"){a.default.isFirefox()?setTimeout(function(){return f(v,s)},1e3):f(v,s);return}var h=v.contentWindow||v.contentDocument;if(h.document&&(h=h.document),h.body.appendChild(s.printableElement),s.type!=="pdf"&&s.style){var y=document.createElement("style");y.innerHTML=s.style,h.head.appendChild(y)}var g=h.getElementsByTagName("img");g.length>0?m(Array.from(g)).then(function(){return f(v,s)}):f(v,s)}}};function f(c,s){try{if(c.focus(),a.default.isEdge()||a.default.isIE())try{c.contentWindow.document.execCommand("print",!1,null)}catch{c.contentWindow.print()}else c.contentWindow.print()}catch(d){s.onError(d)}finally{a.default.isFirefox()&&(c.style.visibility="hidden",c.style.left="-1px"),Object(u.cleanUp)(s)}}function m(c){var s=c.map(function(d){if(d.src&&d.src!==window.location.href)return l(d)});return Promise.all(s)}function l(c){return new Promise(function(s){var d=function v(){!c||typeof c.naturalWidth=="undefined"||c.naturalWidth===0||!c.complete?setTimeout(v,500):s()};d()})}n.default=o},"./src/js/raw-html.js":function(i,n,r){r.r(n);var a=r("./src/js/print.js");n.default={print:function(o,f){o.printableElement=document.createElement("div"),o.printableElement.setAttribute("style","width:100%"),o.printableElement.innerHTML=o.printable,a.default.send(o,f)}}},"./src/sass/index.scss":function(i,n,r){},0:function(i,n,r){i.exports=r("./src/index.js")}}).default})})(wi);var Oi=qa(wi.exports),xi={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(i){t.exports=i()})(function(){return function i(n,r,a){function u(m,l){if(!r[m]){if(!n[m]){var c=typeof cr=="function"&&cr;if(!l&&c)return c(m,!0);if(o)return o(m,!0);var s=new Error("Cannot find module '"+m+"'");throw s.code="MODULE_NOT_FOUND",s}var d=r[m]={exports:{}};n[m][0].call(d.exports,function(v){var h=n[m][1][v];return u(h||v)},d,d.exports,i,n,r,a)}return r[m].exports}for(var o=typeof cr=="function"&&cr,f=0;f<a.length;f++)u(a[f]);return u}({1:[function(i,n,r){var a=i("./utils"),u=i("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(f){for(var m,l,c,s,d,v,h,y=[],g=0,_=f.length,w=_,A=a.getTypeOf(f)!=="string";g<f.length;)w=_-g,c=A?(m=f[g++],l=g<_?f[g++]:0,g<_?f[g++]:0):(m=f.charCodeAt(g++),l=g<_?f.charCodeAt(g++):0,g<_?f.charCodeAt(g++):0),s=m>>2,d=(3&m)<<4|l>>4,v=1<w?(15&l)<<2|c>>6:64,h=2<w?63&c:64,y.push(o.charAt(s)+o.charAt(d)+o.charAt(v)+o.charAt(h));return y.join("")},r.decode=function(f){var m,l,c,s,d,v,h=0,y=0,g="data:";if(f.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var _,w=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===o.charAt(64)&&w--,f.charAt(f.length-2)===o.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=u.uint8array?new Uint8Array(0|w):new Array(0|w);h<f.length;)m=o.indexOf(f.charAt(h++))<<2|(s=o.indexOf(f.charAt(h++)))>>4,l=(15&s)<<4|(d=o.indexOf(f.charAt(h++)))>>2,c=(3&d)<<6|(v=o.indexOf(f.charAt(h++))),_[y++]=m,d!==64&&(_[y++]=l),v!==64&&(_[y++]=c);return _}},{"./support":30,"./utils":32}],2:[function(i,n,r){var a=i("./external"),u=i("./stream/DataWorker"),o=i("./stream/Crc32Probe"),f=i("./stream/DataLengthProbe");function m(l,c,s,d,v){this.compressedSize=l,this.uncompressedSize=c,this.crc32=s,this.compression=d,this.compressedContent=v}m.prototype={getContentWorker:function(){var l=new u(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new u(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(l,c,s){return l.pipe(new o).pipe(new f("uncompressedSize")).pipe(c.compressWorker(s)).pipe(new f("compressedSize")).withStreamInfo("compression",c)},n.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(i,n,r){var a=i("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},r.DEFLATE=i("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(i,n,r){var a=i("./utils"),u=function(){for(var o,f=[],m=0;m<256;m++){o=m;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;f[m]=o}return f}();n.exports=function(o,f){return o!==void 0&&o.length?a.getTypeOf(o)!=="string"?function(m,l,c,s){var d=u,v=s+c;m^=-1;for(var h=s;h<v;h++)m=m>>>8^d[255&(m^l[h])];return-1^m}(0|f,o,o.length,0):function(m,l,c,s){var d=u,v=s+c;m^=-1;for(var h=s;h<v;h++)m=m>>>8^d[255&(m^l.charCodeAt(h))];return-1^m}(0|f,o,o.length,0):0}},{"./utils":32}],5:[function(i,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(i,n,r){var a=null;a=typeof Promise!="undefined"?Promise:i("lie"),n.exports={Promise:a}},{lie:37}],7:[function(i,n,r){var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",u=i("pako"),o=i("./utils"),f=i("./stream/GenericWorker"),m=a?"uint8array":"array";function l(c,s){f.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=s,this.meta={}}r.magic="\b\0",o.inherits(l,f),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(m,c.data),!1)},l.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(s){c.push({data:s,meta:c.meta})}},r.compressWorker=function(c){return new l("Deflate",c)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(i,n,r){function a(d,v){var h,y="";for(h=0;h<v;h++)y+=String.fromCharCode(255&d),d>>>=8;return y}function u(d,v,h,y,g,_){var w,A,B=d.file,C=d.compression,N=_!==m.utf8encode,F=o.transformTo("string",_(B.name)),E=o.transformTo("string",m.utf8encode(B.name)),T=B.comment,M=o.transformTo("string",_(T)),S=o.transformTo("string",m.utf8encode(T)),k=E.length!==B.name.length,p=S.length!==T.length,R="",D="",x="",G=B.dir,L=B.date,K={crc32:0,compressedSize:0,uncompressedSize:0};v&&!h||(K.crc32=d.crc32,K.compressedSize=d.compressedSize,K.uncompressedSize=d.uncompressedSize);var z=0;v&&(z|=8),N||!k&&!p||(z|=2048);var $=0,Y=0;G&&($|=16),g==="UNIX"?(Y=798,$|=function(U,ne){var pe=U;return U||(pe=ne?16893:33204),(65535&pe)<<16}(B.unixPermissions,G)):(Y=20,$|=function(U){return 63&(U||0)}(B.dosPermissions)),w=L.getUTCHours(),w<<=6,w|=L.getUTCMinutes(),w<<=5,w|=L.getUTCSeconds()/2,A=L.getUTCFullYear()-1980,A<<=4,A|=L.getUTCMonth()+1,A<<=5,A|=L.getUTCDate(),k&&(D=a(1,1)+a(l(F),4)+E,R+="up"+a(D.length,2)+D),p&&(x=a(1,1)+a(l(M),4)+S,R+="uc"+a(x.length,2)+x);var V="";return V+=`
\0`,V+=a(z,2),V+=C.magic,V+=a(w,2),V+=a(A,2),V+=a(K.crc32,4),V+=a(K.compressedSize,4),V+=a(K.uncompressedSize,4),V+=a(F.length,2),V+=a(R.length,2),{fileRecord:c.LOCAL_FILE_HEADER+V+F+R,dirRecord:c.CENTRAL_FILE_HEADER+a(Y,2)+V+a(M.length,2)+"\0\0\0\0"+a($,4)+a(y,4)+F+R+M}}var o=i("../utils"),f=i("../stream/GenericWorker"),m=i("../utf8"),l=i("../crc32"),c=i("../signature");function s(d,v,h,y){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=h,this.encodeFileName=y,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(s,f),s.prototype.push=function(d){var v=d.meta.percent||0,h=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,f.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:h?(v+100*(h-y-1))/h:100}}))},s.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var v=this.streamFiles&&!d.file.dir;if(v){var h=u(d,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(d){this.accumulate=!1;var v=this.streamFiles&&!d.file.dir,h=u(d,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),v)this.push({data:function(y){return c.DATA_DESCRIPTOR+a(y.crc32,4)+a(y.compressedSize,4)+a(y.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var d=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var h=this.bytesWritten-d,y=function(g,_,w,A,B){var C=o.transformTo("string",B(A));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(g,2)+a(g,2)+a(_,4)+a(w,4)+a(C.length,2)+C}(this.dirRecords.length,h,d,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(d){this._sources.push(d);var v=this;return d.on("data",function(h){v.processChunk(h)}),d.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),d.on("error",function(h){v.error(h)}),this},s.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(d){var v=this._sources;if(!f.prototype.error.call(this,d))return!1;for(var h=0;h<v.length;h++)try{v[h].error(d)}catch{}return!0},s.prototype.lock=function(){f.prototype.lock.call(this);for(var d=this._sources,v=0;v<d.length;v++)d[v].lock()},n.exports=s},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(i,n,r){var a=i("../compressions"),u=i("./ZipFileWorker");r.generateWorker=function(o,f,m){var l=new u(f.streamFiles,m,f.platform,f.encodeFileName),c=0;try{o.forEach(function(s,d){c++;var v=function(_,w){var A=_||w,B=a[A];if(!B)throw new Error(A+" is not a valid compression method !");return B}(d.options.compression,f.compression),h=d.options.compressionOptions||f.compressionOptions||{},y=d.dir,g=d.date;d._compressWorker(v,h).withStreamInfo("file",{name:s,dir:y,date:g,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(s){l.error(s)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(i,n,r){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new a;for(var o in this)typeof this[o]!="function"&&(u[o]=this[o]);return u}}(a.prototype=i("./object")).loadAsync=i("./load"),a.support=i("./support"),a.defaults=i("./defaults"),a.version="3.10.1",a.loadAsync=function(u,o){return new a().loadAsync(u,o)},a.external=i("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(i,n,r){var a=i("./utils"),u=i("./external"),o=i("./utf8"),f=i("./zipEntries"),m=i("./stream/Crc32Probe"),l=i("./nodejsUtils");function c(s){return new u.Promise(function(d,v){var h=s.decompressed.getContentWorker().pipe(new m);h.on("error",function(y){v(y)}).on("end",function(){h.streamInfo.crc32!==s.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(s,d){var v=this;return d=a.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(s)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",s,!0,d.optimizedBinaryString,d.base64).then(function(h){var y=new f(d);return y.load(h),y}).then(function(h){var y=[u.Promise.resolve(h)],g=h.files;if(d.checkCRC32)for(var _=0;_<g.length;_++)y.push(c(g[_]));return u.Promise.all(y)}).then(function(h){for(var y=h.shift(),g=y.files,_=0;_<g.length;_++){var w=g[_],A=w.fileNameStr,B=a.resolve(w.fileNameStr);v.file(B,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:d.createFolders}),w.dir||(v.file(B).unsafeOriginalName=A)}return y.zipComment.length&&(v.comment=y.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(i,n,r){var a=i("../utils"),u=i("../stream/GenericWorker");function o(f,m){u.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(m)}a.inherits(o,u),o.prototype._bindStream=function(f){var m=this;(this._stream=f).pause(),f.on("data",function(l){m.push({data:l,meta:{percent:0}})}).on("error",function(l){m.isPaused?this.generatedError=l:m.error(l)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},o.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(i,n,r){var a=i("readable-stream").Readable;function u(o,f,m){a.call(this,f),this._helper=o;var l=this;o.on("data",function(c,s){l.push(c)||l._helper.pause(),m&&m(s)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}i("../utils").inherits(u,a),u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(i,n,r){n.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(a,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,u);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,u)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var u=new Buffer(a);return u.fill(0),u},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(i,n,r){function a(B,C,N){var F,E=o.getTypeOf(C),T=o.extend(N||{},l);T.date=T.date||new Date,T.compression!==null&&(T.compression=T.compression.toUpperCase()),typeof T.unixPermissions=="string"&&(T.unixPermissions=parseInt(T.unixPermissions,8)),T.unixPermissions&&16384&T.unixPermissions&&(T.dir=!0),T.dosPermissions&&16&T.dosPermissions&&(T.dir=!0),T.dir&&(B=g(B)),T.createFolders&&(F=y(B))&&_.call(this,F,!0);var M=E==="string"&&T.binary===!1&&T.base64===!1;N&&N.binary!==void 0||(T.binary=!M),(C instanceof c&&C.uncompressedSize===0||T.dir||!C||C.length===0)&&(T.base64=!1,T.binary=!0,C="",T.compression="STORE",E="string");var S=null;S=C instanceof c||C instanceof f?C:v.isNode&&v.isStream(C)?new h(B,C):o.prepareContent(B,C,T.binary,T.optimizedBinaryString,T.base64);var k=new s(B,S,T);this.files[B]=k}var u=i("./utf8"),o=i("./utils"),f=i("./stream/GenericWorker"),m=i("./stream/StreamHelper"),l=i("./defaults"),c=i("./compressedObject"),s=i("./zipObject"),d=i("./generate"),v=i("./nodejsUtils"),h=i("./nodejs/NodejsStreamInputAdapter"),y=function(B){B.slice(-1)==="/"&&(B=B.substring(0,B.length-1));var C=B.lastIndexOf("/");return 0<C?B.substring(0,C):""},g=function(B){return B.slice(-1)!=="/"&&(B+="/"),B},_=function(B,C){return C=C!==void 0?C:l.createFolders,B=g(B),this.files[B]||a.call(this,B,null,{dir:!0,createFolders:C}),this.files[B]};function w(B){return Object.prototype.toString.call(B)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(B){var C,N,F;for(C in this.files)F=this.files[C],(N=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&B(N,F)},filter:function(B){var C=[];return this.forEach(function(N,F){B(N,F)&&C.push(F)}),C},file:function(B,C,N){if(arguments.length!==1)return B=this.root+B,a.call(this,B,C,N),this;if(w(B)){var F=B;return this.filter(function(T,M){return!M.dir&&F.test(T)})}var E=this.files[this.root+B];return E&&!E.dir?E:null},folder:function(B){if(!B)return this;if(w(B))return this.filter(function(E,T){return T.dir&&B.test(E)});var C=this.root+B,N=_.call(this,C),F=this.clone();return F.root=N.name,F},remove:function(B){B=this.root+B;var C=this.files[B];if(C||(B.slice(-1)!=="/"&&(B+="/"),C=this.files[B]),C&&!C.dir)delete this.files[B];else for(var N=this.filter(function(E,T){return T.name.slice(0,B.length)===B}),F=0;F<N.length;F++)delete this.files[N[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(B){var C,N={};try{if((N=o.extend(B||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=N.type.toLowerCase(),N.compression=N.compression.toUpperCase(),N.type==="binarystring"&&(N.type="string"),!N.type)throw new Error("No output type specified.");o.checkSupport(N.type),N.platform!=="darwin"&&N.platform!=="freebsd"&&N.platform!=="linux"&&N.platform!=="sunos"||(N.platform="UNIX"),N.platform==="win32"&&(N.platform="DOS");var F=N.comment||this.comment||"";C=d.generateWorker(this,N,F)}catch(E){(C=new f("error")).error(E)}return new m(C,N.type||"string",N.mimeType)},generateAsync:function(B,C){return this.generateInternalStream(B).accumulate(C)},generateNodeStream:function(B,C){return(B=B||{}).type||(B.type="nodebuffer"),this.generateInternalStream(B).toNodejsStream(C)}};n.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(i,n,r){n.exports=i("stream")},{stream:void 0}],17:[function(i,n,r){var a=i("./DataReader");function u(o){a.call(this,o);for(var f=0;f<this.data.length;f++)o[f]=255&o[f]}i("../utils").inherits(u,a),u.prototype.byteAt=function(o){return this.data[this.zero+o]},u.prototype.lastIndexOfSignature=function(o){for(var f=o.charCodeAt(0),m=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===f&&this.data[s+1]===m&&this.data[s+2]===l&&this.data[s+3]===c)return s-this.zero;return-1},u.prototype.readAndCheckSignature=function(o){var f=o.charCodeAt(0),m=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),s=this.readData(4);return f===s[0]&&m===s[1]&&l===s[2]&&c===s[3]},u.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(i,n,r){var a=i("../utils");function u(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var f,m=0;for(this.checkOffset(o),f=this.index+o-1;f>=this.index;f--)m=(m<<8)+this.byteAt(f);return this.index+=o,m},readString:function(o){return a.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=u},{"../utils":32}],19:[function(i,n,r){var a=i("./Uint8ArrayReader");function u(o){a.call(this,o)}i("../utils").inherits(u,a),u.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(i,n,r){var a=i("./DataReader");function u(o){a.call(this,o)}i("../utils").inherits(u,a),u.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},u.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},u.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},u.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(i,n,r){var a=i("./ArrayReader");function u(o){a.call(this,o)}i("../utils").inherits(u,a),u.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(i,n,r){var a=i("../utils"),u=i("../support"),o=i("./ArrayReader"),f=i("./StringReader"),m=i("./NodeBufferReader"),l=i("./Uint8ArrayReader");n.exports=function(c){var s=a.getTypeOf(c);return a.checkSupport(s),s!=="string"||u.uint8array?s==="nodebuffer"?new m(c):u.uint8array?new l(a.transformTo("uint8array",c)):new o(a.transformTo("array",c)):new f(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(i,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(i,n,r){var a=i("./GenericWorker"),u=i("../utils");function o(f){a.call(this,"ConvertWorker to "+f),this.destType=f}u.inherits(o,a),o.prototype.processChunk=function(f){this.push({data:u.transformTo(this.destType,f.data),meta:f.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(i,n,r){var a=i("./GenericWorker"),u=i("../crc32");function o(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}i("../utils").inherits(o,a),o.prototype.processChunk=function(f){this.streamInfo.crc32=u(f.data,this.streamInfo.crc32||0),this.push(f)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(i,n,r){var a=i("../utils"),u=i("./GenericWorker");function o(f){u.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}a.inherits(o,u),o.prototype.processChunk=function(f){if(f){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+f.data.length}u.prototype.processChunk.call(this,f)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(i,n,r){var a=i("../utils"),u=i("./GenericWorker");function o(f){u.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(l){m.dataIsReady=!0,m.data=l,m.max=l&&l.length||0,m.type=a.getTypeOf(l),m.isPaused||m._tickAndRepeat()},function(l){m.error(l)})}a.inherits(o,u),o.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,m);break;case"uint8array":f=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":f=this.data.slice(this.index,m)}return this.index=m,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(i,n,r){function a(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,o){return this._listeners[u].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,o){if(this._listeners[u])for(var f=0;f<this._listeners[u].length;f++)this._listeners[u][f].call(this,o)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var o=this;return u.on("data",function(f){o.processChunk(f)}),u.on("end",function(){o.end()}),u.on("error",function(f){o.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,o){return this.extraStreamInfo[u]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},n.exports=a},{}],29:[function(i,n,r){var a=i("../utils"),u=i("./ConvertWorker"),o=i("./GenericWorker"),f=i("../base64"),m=i("../support"),l=i("../external"),c=null;if(m.nodestream)try{c=i("../nodejs/NodejsStreamOutputAdapter")}catch{}function s(v,h){return new l.Promise(function(y,g){var _=[],w=v._internalType,A=v._outputType,B=v._mimeType;v.on("data",function(C,N){_.push(C),h&&h(N)}).on("error",function(C){_=[],g(C)}).on("end",function(){try{var C=function(N,F,E){switch(N){case"blob":return a.newBlob(a.transformTo("arraybuffer",F),E);case"base64":return f.encode(F);default:return a.transformTo(N,F)}}(A,function(N,F){var E,T=0,M=null,S=0;for(E=0;E<F.length;E++)S+=F[E].length;switch(N){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(M=new Uint8Array(S),E=0;E<F.length;E++)M.set(F[E],T),T+=F[E].length;return M;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+N+"'")}}(w,_),B);y(C)}catch(N){g(N)}_=[]}).resume()})}function d(v,h,y){var g=h;switch(h){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=h,this._mimeType=y,a.checkSupport(g),this._worker=v.pipe(new u(g)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}d.prototype={accumulate:function(v){return s(this,v)},on:function(v,h){var y=this;return v==="data"?this._worker.on(v,function(g){h.call(y,g.data,g.meta)}):this._worker.on(v,function(){a.delay(h,arguments,y)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(i,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",r.nodebuffer=typeof Buffer!="undefined",r.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")r.blob=!1;else{var a=new ArrayBuffer(0);try{r.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(a),r.blob=u.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!i("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(i,n,r){for(var a=i("./utils"),u=i("./support"),o=i("./nodejsUtils"),f=i("./stream/GenericWorker"),m=new Array(256),l=0;l<256;l++)m[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;m[254]=m[254]=1;function c(){f.call(this,"utf-8 decode"),this.leftOver=null}function s(){f.call(this,"utf-8 encode")}r.utf8encode=function(d){return u.nodebuffer?o.newBufferFrom(d,"utf-8"):function(v){var h,y,g,_,w,A=v.length,B=0;for(_=0;_<A;_++)(64512&(y=v.charCodeAt(_)))==55296&&_+1<A&&(64512&(g=v.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),B+=y<128?1:y<2048?2:y<65536?3:4;for(h=u.uint8array?new Uint8Array(B):new Array(B),_=w=0;w<B;_++)(64512&(y=v.charCodeAt(_)))==55296&&_+1<A&&(64512&(g=v.charCodeAt(_+1)))==56320&&(y=65536+(y-55296<<10)+(g-56320),_++),y<128?h[w++]=y:(y<2048?h[w++]=192|y>>>6:(y<65536?h[w++]=224|y>>>12:(h[w++]=240|y>>>18,h[w++]=128|y>>>12&63),h[w++]=128|y>>>6&63),h[w++]=128|63&y);return h}(d)},r.utf8decode=function(d){return u.nodebuffer?a.transformTo("nodebuffer",d).toString("utf-8"):function(v){var h,y,g,_,w=v.length,A=new Array(2*w);for(h=y=0;h<w;)if((g=v[h++])<128)A[y++]=g;else if(4<(_=m[g]))A[y++]=65533,h+=_-1;else{for(g&=_===2?31:_===3?15:7;1<_&&h<w;)g=g<<6|63&v[h++],_--;1<_?A[y++]=65533:g<65536?A[y++]=g:(g-=65536,A[y++]=55296|g>>10&1023,A[y++]=56320|1023&g)}return A.length!==y&&(A.subarray?A=A.subarray(0,y):A.length=y),a.applyFromCharCode(A)}(d=a.transformTo(u.uint8array?"uint8array":"array",d))},a.inherits(c,f),c.prototype.processChunk=function(d){var v=a.transformTo(u.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var h=v;(v=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),v.set(h,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var y=function(_,w){var A;for((w=w||_.length)>_.length&&(w=_.length),A=w-1;0<=A&&(192&_[A])==128;)A--;return A<0||A===0?w:A+m[_[A]]>w?A:w}(v),g=v;y!==v.length&&(u.uint8array?(g=v.subarray(0,y),this.leftOver=v.subarray(y,v.length)):(g=v.slice(0,y),this.leftOver=v.slice(y,v.length))),this.push({data:r.utf8decode(g),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,a.inherits(s,f),s.prototype.processChunk=function(d){this.push({data:r.utf8encode(d.data),meta:d.meta})},r.Utf8EncodeWorker=s},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(i,n,r){var a=i("./support"),u=i("./base64"),o=i("./nodejsUtils"),f=i("./external");function m(h){return h}function l(h,y){for(var g=0;g<h.length;++g)y[g]=255&h.charCodeAt(g);return y}i("setimmediate"),r.newBlob=function(h,y){r.checkSupport("blob");try{return new Blob([h],{type:y})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(h),g.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(h,y,g){var _=[],w=0,A=h.length;if(A<=g)return String.fromCharCode.apply(null,h);for(;w<A;)y==="array"||y==="nodebuffer"?_.push(String.fromCharCode.apply(null,h.slice(w,Math.min(w+g,A)))):_.push(String.fromCharCode.apply(null,h.subarray(w,Math.min(w+g,A)))),w+=g;return _.join("")},stringifyByChar:function(h){for(var y="",g=0;g<h.length;g++)y+=String.fromCharCode(h[g]);return y},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function s(h){var y=65536,g=r.getTypeOf(h),_=!0;if(g==="uint8array"?_=c.applyCanBeUsed.uint8array:g==="nodebuffer"&&(_=c.applyCanBeUsed.nodebuffer),_)for(;1<y;)try{return c.stringifyByChunk(h,g,y)}catch{y=Math.floor(y/2)}return c.stringifyByChar(h)}function d(h,y){for(var g=0;g<h.length;g++)y[g]=h[g];return y}r.applyFromCharCode=s;var v={};v.string={string:m,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return v.string.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:function(h){return l(h,o.allocBuffer(h.length))}},v.array={string:s,array:m,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},v.arraybuffer={string:function(h){return s(new Uint8Array(h))},array:function(h){return d(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:m,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},v.uint8array={string:s,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:m,nodebuffer:function(h){return o.newBufferFrom(h)}},v.nodebuffer={string:s,array:function(h){return d(h,new Array(h.length))},arraybuffer:function(h){return v.nodebuffer.uint8array(h).buffer},uint8array:function(h){return d(h,new Uint8Array(h.length))},nodebuffer:m},r.transformTo=function(h,y){if(y=y||"",!h)return y;r.checkSupport(h);var g=r.getTypeOf(y);return v[g][h](y)},r.resolve=function(h){for(var y=h.split("/"),g=[],_=0;_<y.length;_++){var w=y[_];w==="."||w===""&&_!==0&&_!==y.length-1||(w===".."?g.pop():g.push(w))}return g.join("/")},r.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":a.nodebuffer&&o.isBuffer(h)?"nodebuffer":a.uint8array&&h instanceof Uint8Array?"uint8array":a.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(h){if(!a[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(h){var y,g,_="";for(g=0;g<(h||"").length;g++)_+="\\x"+((y=h.charCodeAt(g))<16?"0":"")+y.toString(16).toUpperCase();return _},r.delay=function(h,y,g){setImmediate(function(){h.apply(g||null,y||[])})},r.inherits=function(h,y){function g(){}g.prototype=y.prototype,h.prototype=new g},r.extend=function(){var h,y,g={};for(h=0;h<arguments.length;h++)for(y in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],y)&&g[y]===void 0&&(g[y]=arguments[h][y]);return g},r.prepareContent=function(h,y,g,_,w){return f.Promise.resolve(y).then(function(A){return a.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader!="undefined"?new f.Promise(function(B,C){var N=new FileReader;N.onload=function(F){B(F.target.result)},N.onerror=function(F){C(F.target.error)},N.readAsArrayBuffer(A)}):A}).then(function(A){var B=r.getTypeOf(A);return B?(B==="arraybuffer"?A=r.transformTo("uint8array",A):B==="string"&&(w?A=u.decode(A):g&&_!==!0&&(A=function(C){return l(C,a.uint8array?new Uint8Array(C.length):new Array(C.length))}(A))),A):f.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(i,n,r){var a=i("./reader/readerFor"),u=i("./utils"),o=i("./signature"),f=i("./zipEntry"),m=i("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var s=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(s)+", expected "+u.pretty(c)+")")}},isSignature:function(c,s){var d=this.reader.index;this.reader.setIndex(c);var v=this.reader.readString(4)===s;return this.reader.setIndex(d),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),s=m.uint8array?"uint8array":"array",d=u.transformTo(s,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,s,d,v=this.zip64EndOfCentralSize-44;0<v;)c=this.reader.readInt(2),s=this.reader.readInt(4),d=this.reader.readData(s),this.zip64ExtensibleData[c]={id:c,length:s,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,s;for(c=0;c<this.files.length;c++)s=this.files[c],this.reader.setIndex(s.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),s.readLocalPart(this.reader),s.handleUTF8(),s.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(c=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var s=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var v=s-d;if(0<v)this.isSignature(s,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(c){this.reader=a(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(i,n,r){var a=i("./reader/readerFor"),u=i("./utils"),o=i("./compressedObject"),f=i("./crc32"),m=i("./utf8"),l=i("./compressions"),c=i("./support");function s(d,v){this.options=d,this.loadOptions=v}s.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var v,h;if(d.skip(22),this.fileNameLength=d.readInt(2),h=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(y){for(var g in l)if(Object.prototype.hasOwnProperty.call(l,g)&&l[g].magic===y)return l[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var v=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(v),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=a(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var v,h,y,g=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<g;)v=d.readInt(2),h=d.readInt(2),y=d.readData(h),this.extraFields[v]={id:v,length:h,value:y};d.setIndex(g)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var h=u.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var g=u.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var v=a(d.value);return v.readInt(1)!==1||f(this.fileName)!==v.readInt(4)?null:m.utf8decode(v.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var v=a(d.value);return v.readInt(1)!==1||f(this.fileComment)!==v.readInt(4)?null:m.utf8decode(v.readData(d.length-5))}return null}},n.exports=s},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(i,n,r){function a(v,h,y){this.name=v,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=h,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var u=i("./stream/StreamHelper"),o=i("./stream/DataWorker"),f=i("./utf8"),m=i("./compressedObject"),l=i("./stream/GenericWorker");a.prototype={internalStream:function(v){var h=null,y="string";try{if(!v)throw new Error("No output type specified.");var g=(y=v.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),h=this._decompressWorker();var _=!this._dataBinary;_&&!g&&(h=h.pipe(new f.Utf8EncodeWorker)),!_&&g&&(h=h.pipe(new f.Utf8DecodeWorker))}catch(w){(h=new l("error")).error(w)}return new u(h,y,"")},async:function(v,h){return this.internalStream(v).accumulate(h)},nodeStream:function(v,h){return this.internalStream(v||"nodebuffer").toNodejsStream(h)},_compressWorker:function(v,h){if(this._data instanceof m&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new f.Utf8EncodeWorker)),m.createWorkerFrom(y,v,h)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],s=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)a.prototype[c[d]]=s;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(i,n,r){(function(a){var u,o,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var m=0,l=new f(v),c=a.document.createTextNode("");l.observe(c,{characterData:!0}),u=function(){c.data=m=++m%2}}else if(a.setImmediate||a.MessageChannel===void 0)u="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var h=a.document.createElement("script");h.onreadystatechange=function(){v(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},a.document.documentElement.appendChild(h)}:function(){setTimeout(v,0)};else{var s=new a.MessageChannel;s.port1.onmessage=v,u=function(){s.port2.postMessage(0)}}var d=[];function v(){var h,y;o=!0;for(var g=d.length;g;){for(y=d,d=[],h=-1;++h<g;)y[h]();g=d.length}o=!1}n.exports=function(h){d.push(h)!==1||o||u()}}).call(this,typeof ct!="undefined"?ct:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(i,n,r){var a=i("immediate");function u(){}var o={},f=["REJECTED"],m=["FULFILLED"],l=["PENDING"];function c(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,g!==u&&h(this,g)}function s(g,_,w){this.promise=g,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function d(g,_,w){a(function(){var A;try{A=_(w)}catch(B){return o.reject(g,B)}A===g?o.reject(g,new TypeError("Cannot resolve promise with itself")):o.resolve(g,A)})}function v(g){var _=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof _=="function")return function(){_.apply(g,arguments)}}function h(g,_){var w=!1;function A(N){w||(w=!0,o.reject(g,N))}function B(N){w||(w=!0,o.resolve(g,N))}var C=y(function(){_(B,A)});C.status==="error"&&A(C.value)}function y(g,_){var w={};try{w.value=g(_),w.status="success"}catch(A){w.status="error",w.value=A}return w}(n.exports=c).prototype.finally=function(g){if(typeof g!="function")return this;var _=this.constructor;return this.then(function(w){return _.resolve(g()).then(function(){return w})},function(w){return _.resolve(g()).then(function(){throw w})})},c.prototype.catch=function(g){return this.then(null,g)},c.prototype.then=function(g,_){if(typeof g!="function"&&this.state===m||typeof _!="function"&&this.state===f)return this;var w=new this.constructor(u);return this.state!==l?d(w,this.state===m?g:_,this.outcome):this.queue.push(new s(w,g,_)),w},s.prototype.callFulfilled=function(g){o.resolve(this.promise,g)},s.prototype.otherCallFulfilled=function(g){d(this.promise,this.onFulfilled,g)},s.prototype.callRejected=function(g){o.reject(this.promise,g)},s.prototype.otherCallRejected=function(g){d(this.promise,this.onRejected,g)},o.resolve=function(g,_){var w=y(v,_);if(w.status==="error")return o.reject(g,w.value);var A=w.value;if(A)h(g,A);else{g.state=m,g.outcome=_;for(var B=-1,C=g.queue.length;++B<C;)g.queue[B].callFulfilled(_)}return g},o.reject=function(g,_){g.state=f,g.outcome=_;for(var w=-1,A=g.queue.length;++w<A;)g.queue[w].callRejected(_);return g},c.resolve=function(g){return g instanceof this?g:o.resolve(new this(u),g)},c.reject=function(g){var _=new this(u);return o.reject(_,g)},c.all=function(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,A=!1;if(!w)return this.resolve([]);for(var B=new Array(w),C=0,N=-1,F=new this(u);++N<w;)E(g[N],N);return F;function E(T,M){_.resolve(T).then(function(S){B[M]=S,++C!==w||A||(A=!0,o.resolve(F,B))},function(S){A||(A=!0,o.reject(F,S))})}},c.race=function(g){var _=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=g.length,A=!1;if(!w)return this.resolve([]);for(var B=-1,C=new this(u);++B<w;)N=g[B],_.resolve(N).then(function(F){A||(A=!0,o.resolve(C,F))},function(F){A||(A=!0,o.reject(C,F))});var N;return C}},{immediate:36}],38:[function(i,n,r){var a={};(0,i("./lib/utils/common").assign)(a,i("./lib/deflate"),i("./lib/inflate"),i("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(i,n,r){var a=i("./zlib/deflate"),u=i("./utils/common"),o=i("./utils/strings"),f=i("./zlib/messages"),m=i("./zlib/zstream"),l=Object.prototype.toString,c=0,s=-1,d=0,v=8;function h(g){if(!(this instanceof h))return new h(g);this.options=u.assign({level:s,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},g||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var w=a.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(w!==c)throw new Error(f[w]);if(_.header&&a.deflateSetHeader(this.strm,_.header),_.dictionary){var A;if(A=typeof _.dictionary=="string"?o.string2buf(_.dictionary):l.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(w=a.deflateSetDictionary(this.strm,A))!==c)throw new Error(f[w]);this._dict_set=!0}}function y(g,_){var w=new h(_);if(w.push(g,!0),w.err)throw w.msg||f[w.err];return w.result}h.prototype.push=function(g,_){var w,A,B=this.strm,C=this.options.chunkSize;if(this.ended)return!1;A=_===~~_?_:_===!0?4:0,typeof g=="string"?B.input=o.string2buf(g):l.call(g)==="[object ArrayBuffer]"?B.input=new Uint8Array(g):B.input=g,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new u.Buf8(C),B.next_out=0,B.avail_out=C),(w=a.deflate(B,A))!==1&&w!==c)return this.onEnd(w),!(this.ended=!0);B.avail_out!==0&&(B.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(u.shrinkBuf(B.output,B.next_out))):this.onData(u.shrinkBuf(B.output,B.next_out)))}while((0<B.avail_in||B.avail_out===0)&&w!==1);return A===4?(w=a.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===c):A!==2||(this.onEnd(c),!(B.avail_out=0))},h.prototype.onData=function(g){this.chunks.push(g)},h.prototype.onEnd=function(g){g===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},r.Deflate=h,r.deflate=y,r.deflateRaw=function(g,_){return(_=_||{}).raw=!0,y(g,_)},r.gzip=function(g,_){return(_=_||{}).gzip=!0,y(g,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(i,n,r){var a=i("./zlib/inflate"),u=i("./utils/common"),o=i("./utils/strings"),f=i("./zlib/constants"),m=i("./zlib/messages"),l=i("./zlib/zstream"),c=i("./zlib/gzheader"),s=Object.prototype.toString;function d(h){if(!(this instanceof d))return new d(h);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},h||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||h&&h.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var g=a.inflateInit2(this.strm,y.windowBits);if(g!==f.Z_OK)throw new Error(m[g]);this.header=new c,a.inflateGetHeader(this.strm,this.header)}function v(h,y){var g=new d(y);if(g.push(h,!0),g.err)throw g.msg||m[g.err];return g.result}d.prototype.push=function(h,y){var g,_,w,A,B,C,N=this.strm,F=this.options.chunkSize,E=this.options.dictionary,T=!1;if(this.ended)return!1;_=y===~~y?y:y===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof h=="string"?N.input=o.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?N.input=new Uint8Array(h):N.input=h,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new u.Buf8(F),N.next_out=0,N.avail_out=F),(g=a.inflate(N,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&E&&(C=typeof E=="string"?o.string2buf(E):s.call(E)==="[object ArrayBuffer]"?new Uint8Array(E):E,g=a.inflateSetDictionary(this.strm,C)),g===f.Z_BUF_ERROR&&T===!0&&(g=f.Z_OK,T=!1),g!==f.Z_STREAM_END&&g!==f.Z_OK)return this.onEnd(g),!(this.ended=!0);N.next_out&&(N.avail_out!==0&&g!==f.Z_STREAM_END&&(N.avail_in!==0||_!==f.Z_FINISH&&_!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=o.utf8border(N.output,N.next_out),A=N.next_out-w,B=o.buf2string(N.output,w),N.next_out=A,N.avail_out=F-A,A&&u.arraySet(N.output,N.output,w,A,0),this.onData(B)):this.onData(u.shrinkBuf(N.output,N.next_out)))),N.avail_in===0&&N.avail_out===0&&(T=!0)}while((0<N.avail_in||N.avail_out===0)&&g!==f.Z_STREAM_END);return g===f.Z_STREAM_END&&(_=f.Z_FINISH),_===f.Z_FINISH?(g=a.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===f.Z_OK):_!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(N.avail_out=0))},d.prototype.onData=function(h){this.chunks.push(h)},d.prototype.onEnd=function(h){h===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Inflate=d,r.inflate=v,r.inflateRaw=function(h,y){return(y=y||{}).raw=!0,v(h,y)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(i,n,r){var a=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";r.assign=function(f){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var l=m.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(f[c]=l[c])}}return f},r.shrinkBuf=function(f,m){return f.length===m?f:f.subarray?f.subarray(0,m):(f.length=m,f)};var u={arraySet:function(f,m,l,c,s){if(m.subarray&&f.subarray)f.set(m.subarray(l,l+c),s);else for(var d=0;d<c;d++)f[s+d]=m[l+d]},flattenChunks:function(f){var m,l,c,s,d,v;for(m=c=0,l=f.length;m<l;m++)c+=f[m].length;for(v=new Uint8Array(c),m=s=0,l=f.length;m<l;m++)d=f[m],v.set(d,s),s+=d.length;return v}},o={arraySet:function(f,m,l,c,s){for(var d=0;d<c;d++)f[s+d]=m[l+d]},flattenChunks:function(f){return[].concat.apply([],f)}};r.setTyped=function(f){f?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,u)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(a)},{}],42:[function(i,n,r){var a=i("./common"),u=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var f=new a.Buf8(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function l(c,s){if(s<65537&&(c.subarray&&o||!c.subarray&&u))return String.fromCharCode.apply(null,a.shrinkBuf(c,s));for(var d="",v=0;v<s;v++)d+=String.fromCharCode(c[v]);return d}f[254]=f[254]=1,r.string2buf=function(c){var s,d,v,h,y,g=c.length,_=0;for(h=0;h<g;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<g&&(64512&(v=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(v-56320),h++),_+=d<128?1:d<2048?2:d<65536?3:4;for(s=new a.Buf8(_),h=y=0;y<_;h++)(64512&(d=c.charCodeAt(h)))==55296&&h+1<g&&(64512&(v=c.charCodeAt(h+1)))==56320&&(d=65536+(d-55296<<10)+(v-56320),h++),d<128?s[y++]=d:(d<2048?s[y++]=192|d>>>6:(d<65536?s[y++]=224|d>>>12:(s[y++]=240|d>>>18,s[y++]=128|d>>>12&63),s[y++]=128|d>>>6&63),s[y++]=128|63&d);return s},r.buf2binstring=function(c){return l(c,c.length)},r.binstring2buf=function(c){for(var s=new a.Buf8(c.length),d=0,v=s.length;d<v;d++)s[d]=c.charCodeAt(d);return s},r.buf2string=function(c,s){var d,v,h,y,g=s||c.length,_=new Array(2*g);for(d=v=0;d<g;)if((h=c[d++])<128)_[v++]=h;else if(4<(y=f[h]))_[v++]=65533,d+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&d<g;)h=h<<6|63&c[d++],y--;1<y?_[v++]=65533:h<65536?_[v++]=h:(h-=65536,_[v++]=55296|h>>10&1023,_[v++]=56320|1023&h)}return l(_,v)},r.utf8border=function(c,s){var d;for((s=s||c.length)>c.length&&(s=c.length),d=s-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?s:d+f[c[d]]>s?d:s}},{"./common":41}],43:[function(i,n,r){n.exports=function(a,u,o,f){for(var m=65535&a|0,l=a>>>16&65535|0,c=0;o!==0;){for(o-=c=2e3<o?2e3:o;l=l+(m=m+u[f++]|0)|0,--c;);m%=65521,l%=65521}return m|l<<16|0}},{}],44:[function(i,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(i,n,r){var a=function(){for(var u,o=[],f=0;f<256;f++){u=f;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;o[f]=u}return o}();n.exports=function(u,o,f,m){var l=a,c=m+f;u^=-1;for(var s=m;s<c;s++)u=u>>>8^l[255&(u^o[s])];return-1^u}},{}],46:[function(i,n,r){var a,u=i("../utils/common"),o=i("./trees"),f=i("./adler32"),m=i("./crc32"),l=i("./messages"),c=0,s=4,d=0,v=-2,h=-1,y=4,g=2,_=8,w=9,A=286,B=30,C=19,N=2*A+1,F=15,E=3,T=258,M=T+E+1,S=42,k=113,p=1,R=2,D=3,x=4;function G(b,Z){return b.msg=l[Z],Z}function L(b){return(b<<1)-(4<b?9:0)}function K(b){for(var Z=b.length;0<=--Z;)b[Z]=0}function z(b){var Z=b.state,W=Z.pending;W>b.avail_out&&(W=b.avail_out),W!==0&&(u.arraySet(b.output,Z.pending_buf,Z.pending_out,W,b.next_out),b.next_out+=W,Z.pending_out+=W,b.total_out+=W,b.avail_out-=W,Z.pending-=W,Z.pending===0&&(Z.pending_out=0))}function $(b,Z){o._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,Z),b.block_start=b.strstart,z(b.strm)}function Y(b,Z){b.pending_buf[b.pending++]=Z}function V(b,Z){b.pending_buf[b.pending++]=Z>>>8&255,b.pending_buf[b.pending++]=255&Z}function U(b,Z){var W,I,P=b.max_chain_length,j=b.strstart,X=b.prev_length,Q=b.nice_match,H=b.strstart>b.w_size-M?b.strstart-(b.w_size-M):0,J=b.window,te=b.w_mask,ee=b.prev,ce=b.strstart+T,ye=J[j+X-1],de=J[j+X];b.prev_length>=b.good_match&&(P>>=2),Q>b.lookahead&&(Q=b.lookahead);do if(J[(W=Z)+X]===de&&J[W+X-1]===ye&&J[W]===J[j]&&J[++W]===J[j+1]){j+=2,W++;do;while(J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&J[++j]===J[++W]&&j<ce);if(I=T-(ce-j),j=ce-T,X<I){if(b.match_start=Z,Q<=(X=I))break;ye=J[j+X-1],de=J[j+X]}}while((Z=ee[Z&te])>H&&--P!=0);return X<=b.lookahead?X:b.lookahead}function ne(b){var Z,W,I,P,j,X,Q,H,J,te,ee=b.w_size;do{if(P=b.window_size-b.lookahead-b.strstart,b.strstart>=ee+(ee-M)){for(u.arraySet(b.window,b.window,ee,ee,0),b.match_start-=ee,b.strstart-=ee,b.block_start-=ee,Z=W=b.hash_size;I=b.head[--Z],b.head[Z]=ee<=I?I-ee:0,--W;);for(Z=W=ee;I=b.prev[--Z],b.prev[Z]=ee<=I?I-ee:0,--W;);P+=ee}if(b.strm.avail_in===0)break;if(X=b.strm,Q=b.window,H=b.strstart+b.lookahead,J=P,te=void 0,te=X.avail_in,J<te&&(te=J),W=te===0?0:(X.avail_in-=te,u.arraySet(Q,X.input,X.next_in,te,H),X.state.wrap===1?X.adler=f(X.adler,Q,te,H):X.state.wrap===2&&(X.adler=m(X.adler,Q,te,H)),X.next_in+=te,X.total_in+=te,te),b.lookahead+=W,b.lookahead+b.insert>=E)for(j=b.strstart-b.insert,b.ins_h=b.window[j],b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+E-1])&b.hash_mask,b.prev[j&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=j,j++,b.insert--,!(b.lookahead+b.insert<E)););}while(b.lookahead<M&&b.strm.avail_in!==0)}function pe(b,Z){for(var W,I;;){if(b.lookahead<M){if(ne(b),b.lookahead<M&&Z===c)return p;if(b.lookahead===0)break}if(W=0,b.lookahead>=E&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+E-1])&b.hash_mask,W=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),W!==0&&b.strstart-W<=b.w_size-M&&(b.match_length=U(b,W)),b.match_length>=E)if(I=o._tr_tally(b,b.strstart-b.match_start,b.match_length-E),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=E){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+E-1])&b.hash_mask,W=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else I=o._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(I&&($(b,!1),b.strm.avail_out===0))return p}return b.insert=b.strstart<E-1?b.strstart:E-1,Z===s?($(b,!0),b.strm.avail_out===0?D:x):b.last_lit&&($(b,!1),b.strm.avail_out===0)?p:R}function ae(b,Z){for(var W,I,P;;){if(b.lookahead<M){if(ne(b),b.lookahead<M&&Z===c)return p;if(b.lookahead===0)break}if(W=0,b.lookahead>=E&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+E-1])&b.hash_mask,W=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=E-1,W!==0&&b.prev_length<b.max_lazy_match&&b.strstart-W<=b.w_size-M&&(b.match_length=U(b,W),b.match_length<=5&&(b.strategy===1||b.match_length===E&&4096<b.strstart-b.match_start)&&(b.match_length=E-1)),b.prev_length>=E&&b.match_length<=b.prev_length){for(P=b.strstart+b.lookahead-E,I=o._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-E),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=P&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+E-1])&b.hash_mask,W=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=E-1,b.strstart++,I&&($(b,!1),b.strm.avail_out===0))return p}else if(b.match_available){if((I=o._tr_tally(b,0,b.window[b.strstart-1]))&&$(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return p}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(I=o._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<E-1?b.strstart:E-1,Z===s?($(b,!0),b.strm.avail_out===0?D:x):b.last_lit&&($(b,!1),b.strm.avail_out===0)?p:R}function oe(b,Z,W,I,P){this.good_length=b,this.max_lazy=Z,this.nice_length=W,this.max_chain=I,this.func=P}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*N),this.dyn_dtree=new u.Buf16(2*(2*B+1)),this.bl_tree=new u.Buf16(2*(2*C+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(F+1),this.heap=new u.Buf16(2*A+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*A+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(b){var Z;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=g,(Z=b.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?S:k,b.adler=Z.wrap===2?0:1,Z.last_flush=c,o._tr_init(Z),d):G(b,v)}function ge(b){var Z=le(b);return Z===d&&function(W){W.window_size=2*W.w_size,K(W.head),W.max_lazy_match=a[W.level].max_lazy,W.good_match=a[W.level].good_length,W.nice_match=a[W.level].nice_length,W.max_chain_length=a[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=E-1,W.match_available=0,W.ins_h=0}(b.state),Z}function Se(b,Z,W,I,P,j){if(!b)return v;var X=1;if(Z===h&&(Z=6),I<0?(X=0,I=-I):15<I&&(X=2,I-=16),P<1||w<P||W!==_||I<8||15<I||Z<0||9<Z||j<0||y<j)return G(b,v);I===8&&(I=9);var Q=new he;return(b.state=Q).strm=b,Q.wrap=X,Q.gzhead=null,Q.w_bits=I,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=P+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+E-1)/E),Q.window=new u.Buf8(2*Q.w_size),Q.head=new u.Buf16(Q.hash_size),Q.prev=new u.Buf16(Q.w_size),Q.lit_bufsize=1<<P+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new u.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=Z,Q.strategy=j,Q.method=W,ge(b)}a=[new oe(0,0,0,0,function(b,Z){var W=65535;for(W>b.pending_buf_size-5&&(W=b.pending_buf_size-5);;){if(b.lookahead<=1){if(ne(b),b.lookahead===0&&Z===c)return p;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var I=b.block_start+W;if((b.strstart===0||b.strstart>=I)&&(b.lookahead=b.strstart-I,b.strstart=I,$(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-M&&($(b,!1),b.strm.avail_out===0))return p}return b.insert=0,Z===s?($(b,!0),b.strm.avail_out===0?D:x):(b.strstart>b.block_start&&($(b,!1),b.strm.avail_out),p)}),new oe(4,4,8,4,pe),new oe(4,5,16,8,pe),new oe(4,6,32,32,pe),new oe(4,4,16,16,ae),new oe(8,16,32,32,ae),new oe(8,16,128,128,ae),new oe(8,32,128,256,ae),new oe(32,128,258,1024,ae),new oe(32,258,258,4096,ae)],r.deflateInit=function(b,Z){return Se(b,Z,_,15,8,0)},r.deflateInit2=Se,r.deflateReset=ge,r.deflateResetKeep=le,r.deflateSetHeader=function(b,Z){return b&&b.state?b.state.wrap!==2?v:(b.state.gzhead=Z,d):v},r.deflate=function(b,Z){var W,I,P,j;if(!b||!b.state||5<Z||Z<0)return b?G(b,v):v;if(I=b.state,!b.output||!b.input&&b.avail_in!==0||I.status===666&&Z!==s)return G(b,b.avail_out===0?-5:v);if(I.strm=b,W=I.last_flush,I.last_flush=Z,I.status===S)if(I.wrap===2)b.adler=0,Y(I,31),Y(I,139),Y(I,8),I.gzhead?(Y(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),Y(I,255&I.gzhead.time),Y(I,I.gzhead.time>>8&255),Y(I,I.gzhead.time>>16&255),Y(I,I.gzhead.time>>24&255),Y(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),Y(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(Y(I,255&I.gzhead.extra.length),Y(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(b.adler=m(b.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(Y(I,0),Y(I,0),Y(I,0),Y(I,0),Y(I,0),Y(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),Y(I,3),I.status=k);else{var X=_+(I.w_bits-8<<4)<<8;X|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(X|=32),X+=31-X%31,I.status=k,V(I,X),I.strstart!==0&&(V(I,b.adler>>>16),V(I,65535&b.adler)),b.adler=1}if(I.status===69)if(I.gzhead.extra){for(P=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),z(b),P=I.pending,I.pending!==I.pending_buf_size));)Y(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){P=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),z(b),P=I.pending,I.pending===I.pending_buf_size)){j=1;break}j=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,Y(I,j)}while(j!==0);I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),j===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){P=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),z(b),P=I.pending,I.pending===I.pending_buf_size)){j=1;break}j=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,Y(I,j)}while(j!==0);I.gzhead.hcrc&&I.pending>P&&(b.adler=m(b.adler,I.pending_buf,I.pending-P,P)),j===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&z(b),I.pending+2<=I.pending_buf_size&&(Y(I,255&b.adler),Y(I,b.adler>>8&255),b.adler=0,I.status=k)):I.status=k),I.pending!==0){if(z(b),b.avail_out===0)return I.last_flush=-1,d}else if(b.avail_in===0&&L(Z)<=L(W)&&Z!==s)return G(b,-5);if(I.status===666&&b.avail_in!==0)return G(b,-5);if(b.avail_in!==0||I.lookahead!==0||Z!==c&&I.status!==666){var Q=I.strategy===2?function(H,J){for(var te;;){if(H.lookahead===0&&(ne(H),H.lookahead===0)){if(J===c)return p;break}if(H.match_length=0,te=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,te&&($(H,!1),H.strm.avail_out===0))return p}return H.insert=0,J===s?($(H,!0),H.strm.avail_out===0?D:x):H.last_lit&&($(H,!1),H.strm.avail_out===0)?p:R}(I,Z):I.strategy===3?function(H,J){for(var te,ee,ce,ye,de=H.window;;){if(H.lookahead<=T){if(ne(H),H.lookahead<=T&&J===c)return p;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=E&&0<H.strstart&&(ee=de[ce=H.strstart-1])===de[++ce]&&ee===de[++ce]&&ee===de[++ce]){ye=H.strstart+T;do;while(ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ee===de[++ce]&&ce<ye);H.match_length=T-(ye-ce),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=E?(te=o._tr_tally(H,1,H.match_length-E),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(te=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),te&&($(H,!1),H.strm.avail_out===0))return p}return H.insert=0,J===s?($(H,!0),H.strm.avail_out===0?D:x):H.last_lit&&($(H,!1),H.strm.avail_out===0)?p:R}(I,Z):a[I.level].func(I,Z);if(Q!==D&&Q!==x||(I.status=666),Q===p||Q===D)return b.avail_out===0&&(I.last_flush=-1),d;if(Q===R&&(Z===1?o._tr_align(I):Z!==5&&(o._tr_stored_block(I,0,0,!1),Z===3&&(K(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),z(b),b.avail_out===0))return I.last_flush=-1,d}return Z!==s?d:I.wrap<=0?1:(I.wrap===2?(Y(I,255&b.adler),Y(I,b.adler>>8&255),Y(I,b.adler>>16&255),Y(I,b.adler>>24&255),Y(I,255&b.total_in),Y(I,b.total_in>>8&255),Y(I,b.total_in>>16&255),Y(I,b.total_in>>24&255)):(V(I,b.adler>>>16),V(I,65535&b.adler)),z(b),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?d:1)},r.deflateEnd=function(b){var Z;return b&&b.state?(Z=b.state.status)!==S&&Z!==69&&Z!==73&&Z!==91&&Z!==103&&Z!==k&&Z!==666?G(b,v):(b.state=null,Z===k?G(b,-3):d):v},r.deflateSetDictionary=function(b,Z){var W,I,P,j,X,Q,H,J,te=Z.length;if(!b||!b.state||(j=(W=b.state).wrap)===2||j===1&&W.status!==S||W.lookahead)return v;for(j===1&&(b.adler=f(b.adler,Z,te,0)),W.wrap=0,te>=W.w_size&&(j===0&&(K(W.head),W.strstart=0,W.block_start=0,W.insert=0),J=new u.Buf8(W.w_size),u.arraySet(J,Z,te-W.w_size,W.w_size,0),Z=J,te=W.w_size),X=b.avail_in,Q=b.next_in,H=b.input,b.avail_in=te,b.next_in=0,b.input=Z,ne(W);W.lookahead>=E;){for(I=W.strstart,P=W.lookahead-(E-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[I+E-1])&W.hash_mask,W.prev[I&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=I,I++,--P;);W.strstart=I,W.lookahead=E-1,ne(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=E-1,W.match_available=0,b.next_in=Q,b.input=H,b.avail_in=X,W.wrap=j,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(i,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(i,n,r){n.exports=function(a,u){var o,f,m,l,c,s,d,v,h,y,g,_,w,A,B,C,N,F,E,T,M,S,k,p,R;o=a.state,f=a.next_in,p=a.input,m=f+(a.avail_in-5),l=a.next_out,R=a.output,c=l-(u-a.avail_out),s=l+(a.avail_out-257),d=o.dmax,v=o.wsize,h=o.whave,y=o.wnext,g=o.window,_=o.hold,w=o.bits,A=o.lencode,B=o.distcode,C=(1<<o.lenbits)-1,N=(1<<o.distbits)-1;e:do{w<15&&(_+=p[f++]<<w,w+=8,_+=p[f++]<<w,w+=8),F=A[_&C];t:for(;;){if(_>>>=E=F>>>24,w-=E,(E=F>>>16&255)==0)R[l++]=65535&F;else{if(!(16&E)){if((64&E)==0){F=A[(65535&F)+(_&(1<<E)-1)];continue t}if(32&E){o.mode=12;break e}a.msg="invalid literal/length code",o.mode=30;break e}T=65535&F,(E&=15)&&(w<E&&(_+=p[f++]<<w,w+=8),T+=_&(1<<E)-1,_>>>=E,w-=E),w<15&&(_+=p[f++]<<w,w+=8,_+=p[f++]<<w,w+=8),F=B[_&N];r:for(;;){if(_>>>=E=F>>>24,w-=E,!(16&(E=F>>>16&255))){if((64&E)==0){F=B[(65535&F)+(_&(1<<E)-1)];continue r}a.msg="invalid distance code",o.mode=30;break e}if(M=65535&F,w<(E&=15)&&(_+=p[f++]<<w,(w+=8)<E&&(_+=p[f++]<<w,w+=8)),d<(M+=_&(1<<E)-1)){a.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=E,w-=E,(E=l-c)<M){if(h<(E=M-E)&&o.sane){a.msg="invalid distance too far back",o.mode=30;break e}if(k=g,(S=0)===y){if(S+=v-E,E<T){for(T-=E;R[l++]=g[S++],--E;);S=l-M,k=R}}else if(y<E){if(S+=v+y-E,(E-=y)<T){for(T-=E;R[l++]=g[S++],--E;);if(S=0,y<T){for(T-=E=y;R[l++]=g[S++],--E;);S=l-M,k=R}}}else if(S+=y-E,E<T){for(T-=E;R[l++]=g[S++],--E;);S=l-M,k=R}for(;2<T;)R[l++]=k[S++],R[l++]=k[S++],R[l++]=k[S++],T-=3;T&&(R[l++]=k[S++],1<T&&(R[l++]=k[S++]))}else{for(S=l-M;R[l++]=R[S++],R[l++]=R[S++],R[l++]=R[S++],2<(T-=3););T&&(R[l++]=R[S++],1<T&&(R[l++]=R[S++]))}break}}break}}while(f<m&&l<s);f-=T=w>>3,_&=(1<<(w-=T<<3))-1,a.next_in=f,a.next_out=l,a.avail_in=f<m?m-f+5:5-(f-m),a.avail_out=l<s?s-l+257:257-(l-s),o.hold=_,o.bits=w}},{}],49:[function(i,n,r){var a=i("../utils/common"),u=i("./adler32"),o=i("./crc32"),f=i("./inffast"),m=i("./inftrees"),l=1,c=2,s=0,d=-2,v=1,h=852,y=592;function g(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(S){var k;return S&&S.state?(k=S.state,S.total_in=S.total_out=k.total=0,S.msg="",k.wrap&&(S.adler=1&k.wrap),k.mode=v,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new a.Buf32(h),k.distcode=k.distdyn=new a.Buf32(y),k.sane=1,k.back=-1,s):d}function A(S){var k;return S&&S.state?((k=S.state).wsize=0,k.whave=0,k.wnext=0,w(S)):d}function B(S,k){var p,R;return S&&S.state?(R=S.state,k<0?(p=0,k=-k):(p=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?d:(R.window!==null&&R.wbits!==k&&(R.window=null),R.wrap=p,R.wbits=k,A(S))):d}function C(S,k){var p,R;return S?(R=new _,(S.state=R).window=null,(p=B(S,k))!==s&&(S.state=null),p):d}var N,F,E=!0;function T(S){if(E){var k;for(N=new a.Buf32(512),F=new a.Buf32(32),k=0;k<144;)S.lens[k++]=8;for(;k<256;)S.lens[k++]=9;for(;k<280;)S.lens[k++]=7;for(;k<288;)S.lens[k++]=8;for(m(l,S.lens,0,288,N,0,S.work,{bits:9}),k=0;k<32;)S.lens[k++]=5;m(c,S.lens,0,32,F,0,S.work,{bits:5}),E=!1}S.lencode=N,S.lenbits=9,S.distcode=F,S.distbits=5}function M(S,k,p,R){var D,x=S.state;return x.window===null&&(x.wsize=1<<x.wbits,x.wnext=0,x.whave=0,x.window=new a.Buf8(x.wsize)),R>=x.wsize?(a.arraySet(x.window,k,p-x.wsize,x.wsize,0),x.wnext=0,x.whave=x.wsize):(R<(D=x.wsize-x.wnext)&&(D=R),a.arraySet(x.window,k,p-R,D,x.wnext),(R-=D)?(a.arraySet(x.window,k,p-R,R,0),x.wnext=R,x.whave=x.wsize):(x.wnext+=D,x.wnext===x.wsize&&(x.wnext=0),x.whave<x.wsize&&(x.whave+=D))),0}r.inflateReset=A,r.inflateReset2=B,r.inflateResetKeep=w,r.inflateInit=function(S){return C(S,15)},r.inflateInit2=C,r.inflate=function(S,k){var p,R,D,x,G,L,K,z,$,Y,V,U,ne,pe,ae,oe,he,le,ge,Se,b,Z,W,I,P=0,j=new a.Buf8(4),X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return d;(p=S.state).mode===12&&(p.mode=13),G=S.next_out,D=S.output,K=S.avail_out,x=S.next_in,R=S.input,L=S.avail_in,z=p.hold,$=p.bits,Y=L,V=K,Z=s;e:for(;;)switch(p.mode){case v:if(p.wrap===0){p.mode=13;break}for(;$<16;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(2&p.wrap&&z===35615){j[p.check=0]=255&z,j[1]=z>>>8&255,p.check=o(p.check,j,2,0),$=z=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&z)<<8)+(z>>8))%31){S.msg="incorrect header check",p.mode=30;break}if((15&z)!=8){S.msg="unknown compression method",p.mode=30;break}if($-=4,b=8+(15&(z>>>=4)),p.wbits===0)p.wbits=b;else if(b>p.wbits){S.msg="invalid window size",p.mode=30;break}p.dmax=1<<b,S.adler=p.check=1,p.mode=512&z?10:12,$=z=0;break;case 2:for(;$<16;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(p.flags=z,(255&p.flags)!=8){S.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){S.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=z>>8&1),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=o(p.check,j,2,0)),$=z=0,p.mode=3;case 3:for(;$<32;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.head&&(p.head.time=z),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,j[2]=z>>>16&255,j[3]=z>>>24&255,p.check=o(p.check,j,4,0)),$=z=0,p.mode=4;case 4:for(;$<16;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.head&&(p.head.xflags=255&z,p.head.os=z>>8),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=o(p.check,j,2,0)),$=z=0,p.mode=5;case 5:if(1024&p.flags){for(;$<16;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.length=z,p.head&&(p.head.extra_len=z),512&p.flags&&(j[0]=255&z,j[1]=z>>>8&255,p.check=o(p.check,j,2,0)),$=z=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(L<(U=p.length)&&(U=L),U&&(p.head&&(b=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),a.arraySet(p.head.extra,R,x,U,b)),512&p.flags&&(p.check=o(p.check,R,U,x)),L-=U,x+=U,p.length-=U),p.length))break e;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(L===0)break e;for(U=0;b=R[x+U++],p.head&&b&&p.length<65536&&(p.head.name+=String.fromCharCode(b)),b&&U<L;);if(512&p.flags&&(p.check=o(p.check,R,U,x)),L-=U,x+=U,b)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(L===0)break e;for(U=0;b=R[x+U++],p.head&&b&&p.length<65536&&(p.head.comment+=String.fromCharCode(b)),b&&U<L;);if(512&p.flags&&(p.check=o(p.check,R,U,x)),L-=U,x+=U,b)break e}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;$<16;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(z!==(65535&p.check)){S.msg="header crc mismatch",p.mode=30;break}$=z=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),S.adler=p.check=0,p.mode=12;break;case 10:for(;$<32;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}S.adler=p.check=g(z),$=z=0,p.mode=11;case 11:if(p.havedict===0)return S.next_out=G,S.avail_out=K,S.next_in=x,S.avail_in=L,p.hold=z,p.bits=$,2;S.adler=p.check=1,p.mode=12;case 12:if(k===5||k===6)break e;case 13:if(p.last){z>>>=7&$,$-=7&$,p.mode=27;break}for(;$<3;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}switch(p.last=1&z,$-=1,3&(z>>>=1)){case 0:p.mode=14;break;case 1:if(T(p),p.mode=20,k!==6)break;z>>>=2,$-=2;break e;case 2:p.mode=17;break;case 3:S.msg="invalid block type",p.mode=30}z>>>=2,$-=2;break;case 14:for(z>>>=7&$,$-=7&$;$<32;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if((65535&z)!=(z>>>16^65535)){S.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&z,$=z=0,p.mode=15,k===6)break e;case 15:p.mode=16;case 16:if(U=p.length){if(L<U&&(U=L),K<U&&(U=K),U===0)break e;a.arraySet(D,R,x,U,G),L-=U,x+=U,K-=U,G+=U,p.length-=U;break}p.mode=12;break;case 17:for(;$<14;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(p.nlen=257+(31&z),z>>>=5,$-=5,p.ndist=1+(31&z),z>>>=5,$-=5,p.ncode=4+(15&z),z>>>=4,$-=4,286<p.nlen||30<p.ndist){S.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;$<3;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.lens[X[p.have++]]=7&z,z>>>=3,$-=3}for(;p.have<19;)p.lens[X[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,W={bits:p.lenbits},Z=m(0,p.lens,0,19,p.lencode,0,p.work,W),p.lenbits=W.bits,Z){S.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;oe=(P=p.lencode[z&(1<<p.lenbits)-1])>>>16&255,he=65535&P,!((ae=P>>>24)<=$);){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(he<16)z>>>=ae,$-=ae,p.lens[p.have++]=he;else{if(he===16){for(I=ae+2;$<I;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(z>>>=ae,$-=ae,p.have===0){S.msg="invalid bit length repeat",p.mode=30;break}b=p.lens[p.have-1],U=3+(3&z),z>>>=2,$-=2}else if(he===17){for(I=ae+3;$<I;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}$-=ae,b=0,U=3+(7&(z>>>=ae)),z>>>=3,$-=3}else{for(I=ae+7;$<I;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}$-=ae,b=0,U=11+(127&(z>>>=ae)),z>>>=7,$-=7}if(p.have+U>p.nlen+p.ndist){S.msg="invalid bit length repeat",p.mode=30;break}for(;U--;)p.lens[p.have++]=b}}if(p.mode===30)break;if(p.lens[256]===0){S.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,W={bits:p.lenbits},Z=m(l,p.lens,0,p.nlen,p.lencode,0,p.work,W),p.lenbits=W.bits,Z){S.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,W={bits:p.distbits},Z=m(c,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,W),p.distbits=W.bits,Z){S.msg="invalid distances set",p.mode=30;break}if(p.mode=20,k===6)break e;case 20:p.mode=21;case 21:if(6<=L&&258<=K){S.next_out=G,S.avail_out=K,S.next_in=x,S.avail_in=L,p.hold=z,p.bits=$,f(S,V),G=S.next_out,D=S.output,K=S.avail_out,x=S.next_in,R=S.input,L=S.avail_in,z=p.hold,$=p.bits,p.mode===12&&(p.back=-1);break}for(p.back=0;oe=(P=p.lencode[z&(1<<p.lenbits)-1])>>>16&255,he=65535&P,!((ae=P>>>24)<=$);){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(oe&&(240&oe)==0){for(le=ae,ge=oe,Se=he;oe=(P=p.lencode[Se+((z&(1<<le+ge)-1)>>le)])>>>16&255,he=65535&P,!(le+(ae=P>>>24)<=$);){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}z>>>=le,$-=le,p.back+=le}if(z>>>=ae,$-=ae,p.back+=ae,p.length=he,oe===0){p.mode=26;break}if(32&oe){p.back=-1,p.mode=12;break}if(64&oe){S.msg="invalid literal/length code",p.mode=30;break}p.extra=15&oe,p.mode=22;case 22:if(p.extra){for(I=p.extra;$<I;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.length+=z&(1<<p.extra)-1,z>>>=p.extra,$-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;oe=(P=p.distcode[z&(1<<p.distbits)-1])>>>16&255,he=65535&P,!((ae=P>>>24)<=$);){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if((240&oe)==0){for(le=ae,ge=oe,Se=he;oe=(P=p.distcode[Se+((z&(1<<le+ge)-1)>>le)])>>>16&255,he=65535&P,!(le+(ae=P>>>24)<=$);){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}z>>>=le,$-=le,p.back+=le}if(z>>>=ae,$-=ae,p.back+=ae,64&oe){S.msg="invalid distance code",p.mode=30;break}p.offset=he,p.extra=15&oe,p.mode=24;case 24:if(p.extra){for(I=p.extra;$<I;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}p.offset+=z&(1<<p.extra)-1,z>>>=p.extra,$-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){S.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(K===0)break e;if(U=V-K,p.offset>U){if((U=p.offset-U)>p.whave&&p.sane){S.msg="invalid distance too far back",p.mode=30;break}ne=U>p.wnext?(U-=p.wnext,p.wsize-U):p.wnext-U,U>p.length&&(U=p.length),pe=p.window}else pe=D,ne=G-p.offset,U=p.length;for(K<U&&(U=K),K-=U,p.length-=U;D[G++]=pe[ne++],--U;);p.length===0&&(p.mode=21);break;case 26:if(K===0)break e;D[G++]=p.length,K--,p.mode=21;break;case 27:if(p.wrap){for(;$<32;){if(L===0)break e;L--,z|=R[x++]<<$,$+=8}if(V-=K,S.total_out+=V,p.total+=V,V&&(S.adler=p.check=p.flags?o(p.check,D,V,G-V):u(p.check,D,V,G-V)),V=K,(p.flags?z:g(z))!==p.check){S.msg="incorrect data check",p.mode=30;break}$=z=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;$<32;){if(L===0)break e;L--,z+=R[x++]<<$,$+=8}if(z!==(4294967295&p.total)){S.msg="incorrect length check",p.mode=30;break}$=z=0}p.mode=29;case 29:Z=1;break e;case 30:Z=-3;break e;case 31:return-4;case 32:default:return d}return S.next_out=G,S.avail_out=K,S.next_in=x,S.avail_in=L,p.hold=z,p.bits=$,(p.wsize||V!==S.avail_out&&p.mode<30&&(p.mode<27||k!==4))&&M(S,S.output,S.next_out,V-S.avail_out)?(p.mode=31,-4):(Y-=S.avail_in,V-=S.avail_out,S.total_in+=Y,S.total_out+=V,p.total+=V,p.wrap&&V&&(S.adler=p.check=p.flags?o(p.check,D,V,S.next_out-V):u(p.check,D,V,S.next_out-V)),S.data_type=p.bits+(p.last?64:0)+(p.mode===12?128:0)+(p.mode===20||p.mode===15?256:0),(Y==0&&V===0||k===4)&&Z===s&&(Z=-5),Z)},r.inflateEnd=function(S){if(!S||!S.state)return d;var k=S.state;return k.window&&(k.window=null),S.state=null,s},r.inflateGetHeader=function(S,k){var p;return S&&S.state?(2&(p=S.state).wrap)==0?d:((p.head=k).done=!1,s):d},r.inflateSetDictionary=function(S,k){var p,R=k.length;return S&&S.state?(p=S.state).wrap!==0&&p.mode!==11?d:p.mode===11&&u(1,k,R,0)!==p.check?-3:M(S,k,R,R)?(p.mode=31,-4):(p.havedict=1,s):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(i,n,r){var a=i("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,c,s,d,v,h,y,g){var _,w,A,B,C,N,F,E,T,M=g.bits,S=0,k=0,p=0,R=0,D=0,x=0,G=0,L=0,K=0,z=0,$=null,Y=0,V=new a.Buf16(16),U=new a.Buf16(16),ne=null,pe=0;for(S=0;S<=15;S++)V[S]=0;for(k=0;k<d;k++)V[c[s+k]]++;for(D=M,R=15;1<=R&&V[R]===0;R--);if(R<D&&(D=R),R===0)return v[h++]=20971520,v[h++]=20971520,g.bits=1,0;for(p=1;p<R&&V[p]===0;p++);for(D<p&&(D=p),S=L=1;S<=15;S++)if(L<<=1,(L-=V[S])<0)return-1;if(0<L&&(l===0||R!==1))return-1;for(U[1]=0,S=1;S<15;S++)U[S+1]=U[S]+V[S];for(k=0;k<d;k++)c[s+k]!==0&&(y[U[c[s+k]]++]=k);if(N=l===0?($=ne=y,19):l===1?($=u,Y-=257,ne=o,pe-=257,256):($=f,ne=m,-1),S=p,C=h,G=k=z=0,A=-1,B=(K=1<<(x=D))-1,l===1&&852<K||l===2&&592<K)return 1;for(;;){for(F=S-G,T=y[k]<N?(E=0,y[k]):y[k]>N?(E=ne[pe+y[k]],$[Y+y[k]]):(E=96,0),_=1<<S-G,p=w=1<<x;v[C+(z>>G)+(w-=_)]=F<<24|E<<16|T|0,w!==0;);for(_=1<<S-1;z&_;)_>>=1;if(_!==0?(z&=_-1,z+=_):z=0,k++,--V[S]==0){if(S===R)break;S=c[s+y[k]]}if(D<S&&(z&B)!==A){for(G===0&&(G=D),C+=p,L=1<<(x=S-G);x+G<R&&!((L-=V[x+G])<=0);)x++,L<<=1;if(K+=1<<x,l===1&&852<K||l===2&&592<K)return 1;v[A=z&B]=D<<24|x<<16|C-h|0}}return z!==0&&(v[C+z]=S-G<<24|64<<16|0),g.bits=D,0}},{"../utils/common":41}],51:[function(i,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(i,n,r){var a=i("../utils/common"),u=0,o=1;function f(P){for(var j=P.length;0<=--j;)P[j]=0}var m=0,l=29,c=256,s=c+1+l,d=30,v=19,h=2*s+1,y=15,g=16,_=7,w=256,A=16,B=17,C=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(s+2));f(M);var S=new Array(2*d);f(S);var k=new Array(512);f(k);var p=new Array(256);f(p);var R=new Array(l);f(R);var D,x,G,L=new Array(d);function K(P,j,X,Q,H){this.static_tree=P,this.extra_bits=j,this.extra_base=X,this.elems=Q,this.max_length=H,this.has_stree=P&&P.length}function z(P,j){this.dyn_tree=P,this.max_code=0,this.stat_desc=j}function $(P){return P<256?k[P]:k[256+(P>>>7)]}function Y(P,j){P.pending_buf[P.pending++]=255&j,P.pending_buf[P.pending++]=j>>>8&255}function V(P,j,X){P.bi_valid>g-X?(P.bi_buf|=j<<P.bi_valid&65535,Y(P,P.bi_buf),P.bi_buf=j>>g-P.bi_valid,P.bi_valid+=X-g):(P.bi_buf|=j<<P.bi_valid&65535,P.bi_valid+=X)}function U(P,j,X){V(P,X[2*j],X[2*j+1])}function ne(P,j){for(var X=0;X|=1&P,P>>>=1,X<<=1,0<--j;);return X>>>1}function pe(P,j,X){var Q,H,J=new Array(y+1),te=0;for(Q=1;Q<=y;Q++)J[Q]=te=te+X[Q-1]<<1;for(H=0;H<=j;H++){var ee=P[2*H+1];ee!==0&&(P[2*H]=ne(J[ee]++,ee))}}function ae(P){var j;for(j=0;j<s;j++)P.dyn_ltree[2*j]=0;for(j=0;j<d;j++)P.dyn_dtree[2*j]=0;for(j=0;j<v;j++)P.bl_tree[2*j]=0;P.dyn_ltree[2*w]=1,P.opt_len=P.static_len=0,P.last_lit=P.matches=0}function oe(P){8<P.bi_valid?Y(P,P.bi_buf):0<P.bi_valid&&(P.pending_buf[P.pending++]=P.bi_buf),P.bi_buf=0,P.bi_valid=0}function he(P,j,X,Q){var H=2*j,J=2*X;return P[H]<P[J]||P[H]===P[J]&&Q[j]<=Q[X]}function le(P,j,X){for(var Q=P.heap[X],H=X<<1;H<=P.heap_len&&(H<P.heap_len&&he(j,P.heap[H+1],P.heap[H],P.depth)&&H++,!he(j,Q,P.heap[H],P.depth));)P.heap[X]=P.heap[H],X=H,H<<=1;P.heap[X]=Q}function ge(P,j,X){var Q,H,J,te,ee=0;if(P.last_lit!==0)for(;Q=P.pending_buf[P.d_buf+2*ee]<<8|P.pending_buf[P.d_buf+2*ee+1],H=P.pending_buf[P.l_buf+ee],ee++,Q===0?U(P,H,j):(U(P,(J=p[H])+c+1,j),(te=N[J])!==0&&V(P,H-=R[J],te),U(P,J=$(--Q),X),(te=F[J])!==0&&V(P,Q-=L[J],te)),ee<P.last_lit;);U(P,w,j)}function Se(P,j){var X,Q,H,J=j.dyn_tree,te=j.stat_desc.static_tree,ee=j.stat_desc.has_stree,ce=j.stat_desc.elems,ye=-1;for(P.heap_len=0,P.heap_max=h,X=0;X<ce;X++)J[2*X]!==0?(P.heap[++P.heap_len]=ye=X,P.depth[X]=0):J[2*X+1]=0;for(;P.heap_len<2;)J[2*(H=P.heap[++P.heap_len]=ye<2?++ye:0)]=1,P.depth[H]=0,P.opt_len--,ee&&(P.static_len-=te[2*H+1]);for(j.max_code=ye,X=P.heap_len>>1;1<=X;X--)le(P,J,X);for(H=ce;X=P.heap[1],P.heap[1]=P.heap[P.heap_len--],le(P,J,1),Q=P.heap[1],P.heap[--P.heap_max]=X,P.heap[--P.heap_max]=Q,J[2*H]=J[2*X]+J[2*Q],P.depth[H]=(P.depth[X]>=P.depth[Q]?P.depth[X]:P.depth[Q])+1,J[2*X+1]=J[2*Q+1]=H,P.heap[1]=H++,le(P,J,1),2<=P.heap_len;);P.heap[--P.heap_max]=P.heap[1],function(de,Pe){var ke,Ae,Re,be,Ue,tt,Ke=Pe.dyn_tree,ar=Pe.max_code,Ht=Pe.stat_desc.static_tree,or=Pe.stat_desc.has_stree,vt=Pe.stat_desc.extra_bits,ur=Pe.stat_desc.extra_base,je=Pe.stat_desc.max_length,qe=0;for(be=0;be<=y;be++)de.bl_count[be]=0;for(Ke[2*de.heap[de.heap_max]+1]=0,ke=de.heap_max+1;ke<h;ke++)je<(be=Ke[2*Ke[2*(Ae=de.heap[ke])+1]+1]+1)&&(be=je,qe++),Ke[2*Ae+1]=be,ar<Ae||(de.bl_count[be]++,Ue=0,ur<=Ae&&(Ue=vt[Ae-ur]),tt=Ke[2*Ae],de.opt_len+=tt*(be+Ue),or&&(de.static_len+=tt*(Ht[2*Ae+1]+Ue)));if(qe!==0){do{for(be=je-1;de.bl_count[be]===0;)be--;de.bl_count[be]--,de.bl_count[be+1]+=2,de.bl_count[je]--,qe-=2}while(0<qe);for(be=je;be!==0;be--)for(Ae=de.bl_count[be];Ae!==0;)ar<(Re=de.heap[--ke])||(Ke[2*Re+1]!==be&&(de.opt_len+=(be-Ke[2*Re+1])*Ke[2*Re],Ke[2*Re+1]=be),Ae--)}}(P,j),pe(J,ye,P.bl_count)}function b(P,j,X){var Q,H,J=-1,te=j[1],ee=0,ce=7,ye=4;for(te===0&&(ce=138,ye=3),j[2*(X+1)+1]=65535,Q=0;Q<=X;Q++)H=te,te=j[2*(Q+1)+1],++ee<ce&&H===te||(ee<ye?P.bl_tree[2*H]+=ee:H!==0?(H!==J&&P.bl_tree[2*H]++,P.bl_tree[2*A]++):ee<=10?P.bl_tree[2*B]++:P.bl_tree[2*C]++,J=H,ye=(ee=0)===te?(ce=138,3):H===te?(ce=6,3):(ce=7,4))}function Z(P,j,X){var Q,H,J=-1,te=j[1],ee=0,ce=7,ye=4;for(te===0&&(ce=138,ye=3),Q=0;Q<=X;Q++)if(H=te,te=j[2*(Q+1)+1],!(++ee<ce&&H===te)){if(ee<ye)for(;U(P,H,P.bl_tree),--ee!=0;);else H!==0?(H!==J&&(U(P,H,P.bl_tree),ee--),U(P,A,P.bl_tree),V(P,ee-3,2)):ee<=10?(U(P,B,P.bl_tree),V(P,ee-3,3)):(U(P,C,P.bl_tree),V(P,ee-11,7));J=H,ye=(ee=0)===te?(ce=138,3):H===te?(ce=6,3):(ce=7,4)}}f(L);var W=!1;function I(P,j,X,Q){V(P,(m<<1)+(Q?1:0),3),function(H,J,te,ee){oe(H),ee&&(Y(H,te),Y(H,~te)),a.arraySet(H.pending_buf,H.window,J,te,H.pending),H.pending+=te}(P,j,X,!0)}r._tr_init=function(P){W||(function(){var j,X,Q,H,J,te=new Array(y+1);for(H=Q=0;H<l-1;H++)for(R[H]=Q,j=0;j<1<<N[H];j++)p[Q++]=H;for(p[Q-1]=H,H=J=0;H<16;H++)for(L[H]=J,j=0;j<1<<F[H];j++)k[J++]=H;for(J>>=7;H<d;H++)for(L[H]=J<<7,j=0;j<1<<F[H]-7;j++)k[256+J++]=H;for(X=0;X<=y;X++)te[X]=0;for(j=0;j<=143;)M[2*j+1]=8,j++,te[8]++;for(;j<=255;)M[2*j+1]=9,j++,te[9]++;for(;j<=279;)M[2*j+1]=7,j++,te[7]++;for(;j<=287;)M[2*j+1]=8,j++,te[8]++;for(pe(M,s+1,te),j=0;j<d;j++)S[2*j+1]=5,S[2*j]=ne(j,5);D=new K(M,N,c+1,s,y),x=new K(S,F,0,d,y),G=new K(new Array(0),E,0,v,_)}(),W=!0),P.l_desc=new z(P.dyn_ltree,D),P.d_desc=new z(P.dyn_dtree,x),P.bl_desc=new z(P.bl_tree,G),P.bi_buf=0,P.bi_valid=0,ae(P)},r._tr_stored_block=I,r._tr_flush_block=function(P,j,X,Q){var H,J,te=0;0<P.level?(P.strm.data_type===2&&(P.strm.data_type=function(ee){var ce,ye=4093624447;for(ce=0;ce<=31;ce++,ye>>>=1)if(1&ye&&ee.dyn_ltree[2*ce]!==0)return u;if(ee.dyn_ltree[18]!==0||ee.dyn_ltree[20]!==0||ee.dyn_ltree[26]!==0)return o;for(ce=32;ce<c;ce++)if(ee.dyn_ltree[2*ce]!==0)return o;return u}(P)),Se(P,P.l_desc),Se(P,P.d_desc),te=function(ee){var ce;for(b(ee,ee.dyn_ltree,ee.l_desc.max_code),b(ee,ee.dyn_dtree,ee.d_desc.max_code),Se(ee,ee.bl_desc),ce=v-1;3<=ce&&ee.bl_tree[2*T[ce]+1]===0;ce--);return ee.opt_len+=3*(ce+1)+5+5+4,ce}(P),H=P.opt_len+3+7>>>3,(J=P.static_len+3+7>>>3)<=H&&(H=J)):H=J=X+5,X+4<=H&&j!==-1?I(P,j,X,Q):P.strategy===4||J===H?(V(P,2+(Q?1:0),3),ge(P,M,S)):(V(P,4+(Q?1:0),3),function(ee,ce,ye,de){var Pe;for(V(ee,ce-257,5),V(ee,ye-1,5),V(ee,de-4,4),Pe=0;Pe<de;Pe++)V(ee,ee.bl_tree[2*T[Pe]+1],3);Z(ee,ee.dyn_ltree,ce-1),Z(ee,ee.dyn_dtree,ye-1)}(P,P.l_desc.max_code+1,P.d_desc.max_code+1,te+1),ge(P,P.dyn_ltree,P.dyn_dtree)),ae(P),Q&&oe(P)},r._tr_tally=function(P,j,X){return P.pending_buf[P.d_buf+2*P.last_lit]=j>>>8&255,P.pending_buf[P.d_buf+2*P.last_lit+1]=255&j,P.pending_buf[P.l_buf+P.last_lit]=255&X,P.last_lit++,j===0?P.dyn_ltree[2*X]++:(P.matches++,j--,P.dyn_ltree[2*(p[X]+c+1)]++,P.dyn_dtree[2*$(j)]++),P.last_lit===P.lit_bufsize-1},r._tr_align=function(P){V(P,2,3),U(P,w,M),function(j){j.bi_valid===16?(Y(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(P)}},{"../utils/common":41}],53:[function(i,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(i,n,r){(function(a){(function(u,o){if(!u.setImmediate){var f,m,l,c,s=1,d={},v=!1,h=u.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(u);y=y&&y.setTimeout?y:u,f={}.toString.call(u.process)==="[object process]"?function(A){process.nextTick(function(){_(A)})}:function(){if(u.postMessage&&!u.importScripts){var A=!0,B=u.onmessage;return u.onmessage=function(){A=!1},u.postMessage("","*"),u.onmessage=B,A}}()?(c="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",w,!1):u.attachEvent("onmessage",w),function(A){u.postMessage(c+A,"*")}):u.MessageChannel?((l=new MessageChannel).port1.onmessage=function(A){_(A.data)},function(A){l.port2.postMessage(A)}):h&&"onreadystatechange"in h.createElement("script")?(m=h.documentElement,function(A){var B=h.createElement("script");B.onreadystatechange=function(){_(A),B.onreadystatechange=null,m.removeChild(B),B=null},m.appendChild(B)}):function(A){setTimeout(_,0,A)},y.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var B=new Array(arguments.length-1),C=0;C<B.length;C++)B[C]=arguments[C+1];var N={callback:A,args:B};return d[s]=N,f(s),s++},y.clearImmediate=g}function g(A){delete d[A]}function _(A){if(v)setTimeout(_,0,A);else{var B=d[A];if(B){v=!0;try{(function(C){var N=C.callback,F=C.args;switch(F.length){case 0:N();break;case 1:N(F[0]);break;case 2:N(F[0],F[1]);break;case 3:N(F[0],F[1],F[2]);break;default:N.apply(o,F)}})(B)}finally{g(A),v=!1}}}}function w(A){A.source===u&&typeof A.data=="string"&&A.data.indexOf(c)===0&&_(+A.data.slice(c.length))}})(typeof self=="undefined"?a===void 0?this:a:self)}).call(this,typeof ct!="undefined"?ct:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})})(xi);var Si=xi.exports;async function Go(t,e,i={}){const{zipName:n=`\u9762\u5355\u6570\u636E${Ne().format("YYYY-MM-DD")}.zip`,concurrency:r=5,timeout:a=3e4,retries:u=2}=i;if(typeof Si=="undefined")throw new Error("JSZip\u5E93\u672A\u52A0\u8F7D\uFF0C\u8BF7\u5F15\u5165JSZip CDN\u6216\u5B89\u88C5\u4F9D\u8D56");const o=new Si,f=t.length;let m=0,l=0,c=0;const s=(y,g="",_="")=>{const w=f>0?Math.round(m/f*100):0;e({current:m,total:f,percentage:w,status:y,fileName:g,failed:l,downloading:c,errorMsg:_})},v=(y=>{let g=0;const _=[],w=async B=>new Promise((C,N)=>{_.push({fn:B,resolve:C,reject:N}),A()}),A=()=>{if(g>=y||_.length===0)return;g++;const{fn:B,resolve:C,reject:N}=_.shift();B().then(C).catch(N).finally(()=>{g--,A()})};return w})(r),h=async(y,g)=>v(async()=>{let _;for(let w=0;w<=u;w++)try{c++,s("downloading",`\u6587\u4EF6 ${g+1}/${f}`,w>0?`\u91CD\u8BD5 ${w}/${u}`:"");const A=new AbortController,B=setTimeout(()=>A.abort(),a),C=await fetch(y,{signal:A.signal,method:"GET",headers:{Accept:"application/pdf,*/*"},mode:"cors"});if(clearTimeout(B),!C.ok)throw new Error(`HTTP ${C.status}: ${C.statusText}`);const N=C.headers.get("content-type");N&&!N.includes("pdf")&&!N.includes("application/octet-stream")&&console.warn(`\u6587\u4EF6 ${g+1} \u53EF\u80FD\u4E0D\u662FPDF\u683C\u5F0F: ${N}`);const F=await C.arrayBuffer();let E=`document_${String(g+1).padStart(4,"0")}.pdf`;try{const p=new URL(y).pathname.split("/").pop();p&&(p.toLowerCase().includes(".pdf")||p.length>0)&&(E=p.endsWith(".pdf")?p:`${p}.pdf`)}catch{}let T=E,M=1;for(;o.files[T];)T=`${E.replace(/\.pdf$/i,"")}_${M}.pdf`,M++;return o.file(T,F),m++,c--,s("completed",T),{success:!0,fileName:T,size:F.byteLength}}catch(A){if(_=A,c--,w===u)return l++,m++,s("failed",`\u6587\u4EF6 ${g+1}`,A.message),console.error(`\u4E0B\u8F7D\u5931\u8D25 [${g+1}/${f}]:`,y,A.message),{success:!1,error:A.message,url:y,index:g+1};await new Promise(B=>setTimeout(B,1e3*(w+1)))}return{success:!1,error:(_==null?void 0:_.message)||"\u672A\u77E5\u9519\u8BEF",url:y,index:g+1}});try{if(s("starting","\u5F00\u59CB\u4E0B\u8F7D..."),f===0)throw new Error("PDF\u94FE\u63A5\u6570\u7EC4\u4E3A\u7A7A");const y=t.map((N,F)=>h(N,F)),g=await Promise.all(y),_=g.filter(N=>N.success),w=g.filter(N=>!N.success);if(_.length===0)throw new Error("\u6240\u6709\u6587\u4EF6\u4E0B\u8F7D\u5931\u8D25");s("zipping","\u6B63\u5728\u538B\u7F29\u6587\u4EF6...");const A=await o.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}},N=>{const F=Math.round(N.percent);s("zipping",`\u538B\u7F29\u4E2D... ${F}%`)}),B=_.reduce((N,F)=>N+(F.size||0),0);s("finished",`\u5B8C\u6210\uFF01\u6210\u529F: ${_.length}, \u5931\u8D25: ${w.length}, \u603B\u5927\u5C0F: ${Ko(B)}`);const C={zipBlob:A,results:{total:f,successful:_.length,failed:w.length,totalSize:B,zipSize:A.size,failedItems:w,successfulItems:_}};return qo(C.zipBlob,n),C}catch(y){throw s("error","\u5904\u7406\u5931\u8D25",y.message),y}}function Ko(t,e=2){if(t===0)return"0 Bytes";const i=1024,n=e<0?0:e,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(i));return parseFloat((t/Math.pow(i,a)).toFixed(n))+" "+r[a]}function qo(t,e="pdfs.zip"){const i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}async function Zo(t){try{const e=await fetch(t,{method:"GET",headers:{Accept:"application/pdf"}});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const i=await e.blob(),n=new Blob([i],{type:"application/pdf"});return URL.createObjectURL(n)}catch(e){throw console.error("\u521B\u5EFAPDF Blob URL\u5931\u8D25:",e),e}}var Fi=({orderItem:t,buttonProps:e})=>{const[i,n]=se.exports.useState(""),{run:r,loading:a}=_e(async()=>{var o;let u=(o=t==null?void 0:t.orderPackageList)==null?void 0:o.reduce((f,m)=>f||m.documentUrl,"");if(!u)if(pt())await Ee(()=>at.getSheet(t.id),"\u67E5\u770B\u9762\u5355");else{const f=await Ee(()=>Be.createShellOrder(t.id),"\u67E5\u770B\u9762\u5355").then(m=>{var l;return(l=m.data.data)==null?void 0:l.list});u=(f==null?void 0:f[0])||mi.baseUrl+`/api/logistics/order/get/tracking/number/${t.id}`}if(u=await Zo(u),!u){we.error("\u6682\u672A\u83B7\u53D6\u5230\u9762\u5355\uFF0C\u8BF7\u5237\u65B0\u540E\u91CD\u8BD5\uFF01");return}n(u)},{manual:!0});return re(ve,{children:[e?O(me,ue(q({loading:a,icon:O($r,{}),onClick:()=>{r()}},e),{children:"\u67E5\u770B\u9762\u5355"})):re(rt,{children:[re(dr,{className:"text-sm",type:"text",icon:O(Za,{}),onClick:()=>{try{Oi({printable:t==null?void 0:t.orderPackageList[0].documentUrl,type:"pdf",showModal:!0})}catch(u){(u.message||"").includes("Missing printable information")?we.error(u.message):we.error(u.message||"\u6253\u5370\u51FA\u9519\uFF01\u8BF7\u68C0\u67E5\u76F8\u5173\u4FE1\u606F")}},children:["\u6253\u5370",a?O(ht,{size:12}):""]}),re(dr,{className:"text-sm",type:"text",icon:O($r,{}),onClick:()=>{r()},children:["\u67E5\u770B\u9762\u5355",a?O(ht,{size:12}):""]})]}),O(Te,{className:"modal-content-not-padding",title:"\u9762\u5355\u4FE1\u606F",style:{width:800},visible:!!i,footer:null,onCancel:()=>{n("")},hideCancel:!0,onConfirm:()=>{n("")},children:i?O("iframe",{className:"h-[700px] w-full border-none outline-none",src:i}):O(ht,{loading:!0})})]})},Ai=t=>{const{buttonProps:e,ids:i,children:n}=t,r=_e(async()=>{if(!(i==null?void 0:i.length))return we.error("\u8BF7\u9009\u62E9\u8BA2\u5355");await Ee(()=>Ze()?Be.refresh(i):at.refresh(i[0]),"\u66F4\u65B0"),Fe.emit(Oe.refreshOrderPage)},{manual:!0});return O(ve,{children:O(me,ue(q({type:"text",status:"warning",loading:r.loading,onClick:()=>{r.run()}},e),{children:n||"\u66F4\u65B0\u8BA2\u5355"}))})};const Xo=t=>{const{item:e,setCurrentOrder:i,setActionType:n}=t;return O("header",{className:"flex items-center p-2 border-b",children:re(me.Group,{children:[O(me,{disabled:e.orderStatus&&!["0","1","2"].includes(e.orderStatus),onClick:()=>{const r=structuredClone(ue(q({},e),{clickPack:e.orderStatus==="5"||!e.whetherPack,logisticsOrderProductList:e.orderProductVOList.map(a=>ue(q({},a),{productInventoryVO:{stockProductId:a.stockProductId,number:a.stockUse}})),sendWarehouse:e.sendWarehouse==="0"?void 0:e.sendWarehouse}));i(r),n(Ye.edit)},children:e.whetherPack&&e.orderStatus!=="5"?"\u7F16\u8F91\u6253\u5305":"\u4E00\u952E\u6253\u5305"}),O(me,{disabled:!["0","1","2"].includes(e.orderStatus)||!e.whetherPack,onClick:async()=>{await nt({content:"\u786E\u5B9A\u8981\u53D6\u6D88\u6253\u5305\u5417\uFF1F"}),await Ee(()=>at.cancelPack(e.id),"\u53D6\u6D88\u6253\u5305"),Fe.emit(Oe.refreshOrderPage)},children:"\u53D6\u6D88\u6253\u5305"}),O(Fi,{orderItem:e,buttonProps:{}}),O(Ai,{buttonProps:{type:"default",status:"default"},ids:[e.id]}),O(me,{onClick:()=>{i(ue(q({},e),{logisticsOrderProductList:e.orderProductVOList})),n(Ye.create)},children:"\u6DFB\u52A0\u5546\u54C1"}),O(Ei,{id:e.id})]})})},Xr={};function Qr(t="default-test"){return _e(()=>(Xr[t]=Xr[t]||No.getList({pageNum:1,pageSize:50}),Xr[t].then(i=>i.data.data.list.map(n=>({label:n.shopName,value:n.platformShopId})))))}var Qo=t=>{var i;const e=Qr();return e.loading?O(ht,{}):((i=e.data)==null?void 0:i.length)?O(Pt.Group,ue(q({},t),{children:e.data.filter(n=>n.label).map(n=>O(Pt,{className:"pl-0",value:n.value,children:({checked:r})=>O(me,{tabIndex:-1,type:r?"primary":"default",children:n.label},n.value)},n.value))})):O(ve,{children:"-"})};function Ci(t){var n;const{value:e}=t,{data:i}=Qr();return O(ve,{children:((n=i==null?void 0:i.find(r=>r.value===e))==null?void 0:n.label)||"-"})}function Yo(t){const{data:e,loading:i}=Qr();return O(zr,q({placeholder:"\u8BF7\u9009\u62E9\u5E97\u94FA",loading:i,allowClear:!0,options:e},t))}Ne.extend(Xa);function ki(t,e,i){var l,c;const n=Ne(),r=Ne(t).diff(n),a=Ne.duration(r),u=Math.floor(a.asDays()),o=a.hours(),f=a.minutes();return((c=(l=i.orderPackageList)==null?void 0:l[0])==null?void 0:c.logisticsStatus)==="LOGISTICS_INVALID"?{expired:!0,dateStr:"\u903E\u671F"}:r<=0?{expired:!0,dateStr:""}:{expired:!1,dateStr:`\u5269\u4F59${u}\u5929${o}\u5C0F\u65F6${f}\u5206\u949F${e}`}}function M0(t=0){const e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=t%60;let r="";return e>0&&(r+=`${e}\u5C0F\u65F6`),i>0&&(r+=`${i}\u5206\u949F`),(n>0||e===0&&i===0)&&(r+=`${n}\u79D2`),r}const Di=["\u8766\u76AE\u5E97\u5230\u5E97","7-ELEVEN","OK Mart","\u5168\u5BB6","\u840A\u723E\u5BCC"],Jo={"\u7EBF\u4E0B7-ELEVEN":"red",\u7EBF\u4E0B\u65B0\u7AF9\u7269\u6D41:"orangered",\u7EBF\u4E0B\u5168\u5BB6:"orange","OK Mart":"gold",\u840A\u723E\u5BCC:"lime",\u8766\u76AE\u5E97\u5230\u5E97:"green",\u8CE3\u5BB6\u5B85\u914D:"blue","\u8CE3\u5BB6\u5B85\u914D\uFF1A\u5927\u578B/\u8D85\u91CD\u7269\u54C1\u904B\u9001":"blue",\u5168\u5BB6:"arcoblue","7-ELEVEN":"purple",\u5B85\u914D\u901A:"pinkpurple",\u9ED1\u8C93\u5B85\u6025\u4FBF:"magenta",\u65B0\u7AF9\u7269\u6D41:"#f53f3f",\u5609\u91CC\u5FEB\u905E:"#7816ff",\u5E97\u5230\u5BB6\u5B85\u914D:"#00b42a"},eu="\u901F\u904B\u5BF6",Bi={\u5F85\u5165\u5E93:"0",\u90E8\u5206\u5165\u5E93:"1",\u5F85\u51FA\u5E93:"2",\u5DF2\u4EA4\u8FD0:"3",\u5DF2\u51FA\u5E93:"4",\u5DF2\u53D6\u6D88:"5",\u5DF2\u5173\u95ED:"6"},Kt={\u5DF2\u88C5\u8239:"SHIPPED",\u5DF2\u53D6\u6D88:"CANCELLED",\u53D6\u6D88\u4E2D:"IN_CANCEL",\u5DF2\u5B8C\u6210:"COMPLETED"},tu="7";var ru=({data:t})=>{var n;const{data:e}=Kr({dictCode:"shopee_status"}),i=se.exports.useMemo(()=>{if(t&&t.shipByDate){if([Kt.\u5DF2\u5B8C\u6210,Kt.\u5DF2\u53D6\u6D88].includes(t.shopeeStatus))return"";if(t.shippingTime){const r=Ne(t.shippingTime).endOf("day");return Ne().diff(r,"day")>3?"":ki(r.add(2,"day"),"\u8FDB\u5E97",t).dateStr}if(t.shipByDate)return ki(t.shipByDate,"\u53D1\u8D27",t).dateStr}return""},[t==null?void 0:t.shipByDate,t==null?void 0:t.shippingTime,t==null?void 0:t.shopeeStatus]);return re(ve,{children:[t.createType==="0"?re(ve,{children:[O(fe,{className:"w-[180px]",label:"Shopee\u72B6\u6001",value:((n=e==null?void 0:e.find(r=>r.value===t.shopeeStatus))==null?void 0:n.label)||"-"}),pt()?O(fe,{className:"w-[240px] truncate",label:"\u5E97\u94FA",value:O(Ci,{value:t.platformShopId})}):null]}):O(fe,{className:"w-[240px]",label:"\u8BA2\u5355\u7C7B\u578B",value:"\u8DE8\u5883 \u53F0\u6E7E/\u81EA\u5EFA"}),t.sendWarehouse&&t.sendWarehouse!=="0"?re("div",{className:"w-[240px]",children:[O("span",{className:kt,children:"\u4ED3\u5E93\uFF1A"}),O("span",{className:Dt,children:O(Po,{value:t.sendWarehouse})})]}):null,O("div",{className:"ml-auto",children:O("span",{className:Me("!w-auto !pb-0 !text-red-500 !font-bold"),children:i})})]})},nu={"order-table":"_order-table_dhx5k_1"};const qt={getClaimList(t){return ie.post("/api/parcel/management/claim/list",t)},getProblemList(t){return ie.post("/api/parcel/management/problem/list",t)},getRejectList(t){return ie.post("/api/reject/management/list",t)},addReject(t){return ie.post("/api/reject/management/insert",t)},cancelReject(t){return ie.get(`/api/reject/management/cancel/${t}`)},orderCancelReject(t){return ie.post("/api/reject/management/order/cancel",t)},getReturnList(t){return ie.post("/api/return/management/list",t)},claimHandle(t){return ie.get("/api/parcel/management/claim/parcel",{params:t})},updateExpressStatus(t){return ie.post("/api/logistics/order/update/order/product/status",t)},returnOperation(t){return ie.post("/api/return/management/insert",t)},cancelReturn(t){return ie.get(`/api/return/management/cancel/${t}`)},orderCancelReturn(t){return ie.post("/api/return/management/order/cancel",t)},getOrderTrack(t){return ie.get(`/api/logistics/order/get/tracking/info/${t}`)}};const iu=t=>{const o=t,{buttonProps:e,children:i,isModal:n,deleteRequest:r}=o,a=ft(o,["buttonProps","children","isModal","deleteRequest"]),u=_e(()=>r?Ee(()=>r()):null,{manual:!0});return n?O(ve,{children:i||O(me,ue(q({icon:O(ti,{}),status:"danger",size:"small",loading:u.loading,onClick:()=>{nt({content:a.content,title:a.title}).then(()=>{u.run(),a.onOk({})})}},e),{children:"\u5220\u9664"}))}):O(ri,ue(q({title:"\u786E\u8BA4\u5220\u9664\uFF1F",disabled:e==null?void 0:e.disabled,okButtonProps:{loading:u.loading}},a),{onOk:f=>{var m;u.run(),(m=a==null?void 0:a.onOk)==null||m.call(a,f)},children:i||O(me,ue(q({icon:O(ti,{}),status:"danger",size:"small",loading:u.loading},e),{children:"\u5220\u9664"}))}))};var Yr=iu;const au=t=>{const{label:e,tipContent:i,toolTipProps:n={}}=t;return re("span",{children:[e,O(ni,ue(q({},n),{content:i,children:O(Qa,{style:{marginLeft:4}})}))]})},ou=({label:t,tips:e,position:i="top"})=>e?O(au,{label:t,tipContent:e,toolTipProps:{position:i}}):O(ve,{children:t});var uu=t=>{const e=To();return e.loading?O(ht,{}):e.data?O(Pt.Group,ue(q({size:"small"},t),{children:[{label:"\u5168\u90E8",value:void 0},...e.data].map(i=>{var n;return O(Pt,{className:"pl-0",value:i.value,children:({checked:r})=>O(me,{tabIndex:-1,type:r?"primary":"default",children:i.label},i.value||"all")},(n=i.value)!=null?n:"all")})})):O(ve,{children:"-"})};const su={productInfo(t){return ie.get(`/api/logistics/product/info/${t}`)},addGoodsInfo(t){return ie.post("/api/logistics/product/insert",t)},addGoodsInfoBatch(t){return ie.post("/api/logistics/product/insertBatch",t)},getProductList(t){return ie.post("/api/logistics/product/list",t)},deleteGoodsInfo(t){return ie.get(`/api/logistics/product/remove/${t}`)},synchronousGoodsInfo(t){return ie.post("/api/logistics/product/synchronous/assignment/product",t)},synchronousGoods(t){return ie.post("/api/logistics/product/synchronous/product",t)},updateGoodsInfo(t){return ie.post("/api/logistics/product/update",t)},getLogs(t){return ie.post("/api/stock/log/list",t)}},$0={getList(t){return ie.post("/api/stock/apply/list",t)},insert(t){return ie.post("/api/stock/apply/insert",t)},remove(t){return ie.get(`/api/stock/apply/remove/${t}`)},logs(t){return ie.get(`/api/stock/apply/log/list/${t}`)},warehousing(t){return ie.post("/api/stock/apply/put/storage",t)},setRemark(t){return ie.post("/api/stock/apply/set/remark",t)}},lu={getList(t){return ie.post("/api/stock/product/list",t)},remove(t){return ie.get(`/api/stock/product/remove/${t}`)},info(t){return ie.get(`/api/stock/product/info/${t}`)},changeQuantity(t){return ie.post("/api/stock/product/changeQuantity",t)}},Pi=ii.createContext({}),cu=t=>{const{formRef:e,children:i,createRequest:n,updateRequest:r,refreshRequest:a}=t,[u,o]=se.exports.useState(null),[f,m]=se.exports.useState(null),l=se.exports.useCallback((v,h)=>{m(h),o(v)},[o]);se.exports.useEffect(()=>{u===Ye.edit?e.setFieldsValue(f):u||e.setFieldsValue(null)},[u]);function c(){var v;(v=e==null?void 0:e.resetFields)==null||v.call(e),o(null),a==null||a()}const s=_e(async v=>{n&&(await Ee(()=>n(v)),c())},{manual:!0}),d=_e(async v=>{r&&(await Ee(()=>r(v)),c())},{manual:!0});return O(Pi.Provider,{value:{showType:u,setShowType:l,createAction:s,updateAction:d,resetAndRefreshHandle:c},children:i})};function Ti(t={}){return Object.entries(t).reduce((e,[i,n])=>{if(["",null,void 0].includes(n))return e;const r=JSON.stringify(n);return e?`${e}&${i}=${encodeURIComponent(r)}`:`?${i}=${encodeURIComponent(r)}`},"")}function du(t=location.search.slice(1)){if(!t)return{};const e=t.split("&"),i={};for(const n of e){const[r,a]=n.split("=");try{i[r]=JSON.parse(decodeURIComponent(a))}catch{i[r]=a}}return i}const Ii=new Map;function fu(t){const{initialValues:e,cacheId:i,isSearchParams:n=!0}=t,r=Ya(),[a,u]=se.exports.useState(q(q(q({},e),i?Ii.get(i):{}),n?du():{}));return se.exports.useEffect(()=>{if(n){const f=Ti(a);r.replace({search:f})}i&&Ii.set(i,a)},[a,n,i]),{value:a,setValue:u,resetParams:f=>{const m=f||e;if(n){const l=Ti(m);r.replace({search:l})}return u(m),m}}}const hu=se.exports.forwardRef((t,e)=>{const{name:i,formItemConfigList:n,isSearchParams:r=!0,className:a,style:u,majorKey:o="id",tableProps:f,formProps:m,initialValues:l={},createInitialValue:c={},showActions:s=!0,createText:d="\u65B0\u5EFA",createButtonProps:v={},formModalProps:h={},filterFormProps:y={},deleteConfirmKey:g,requestQueryTransform:_,requestEditBodyTransform:w,openEditTransform:A,leftTool:B,onView:C,createRequest:N,createHandle:F,getListRequest:E,updateRequest:T,removeRequest:M,showRemoveButton:S,middleTool:k,onDataChange:p}=t,[R]=De.useForm(),[D]=De.useForm(),{value:x,setValue:G,resetParams:L}=fu({initialValues:l,isSearchParams:r}),K=se.exports.useRef(null),[z,$]=jr(`${i}-page-size`,{defaultValue:10}),[Y,V]=Ja(`${i}-page-num`,{defaultValue:1}),{data:U,run:ne,loading:pe}=_e(()=>E==null?void 0:E(ue(q({},_?_(x):x),{pageNum:Y,pageSize:z})).then(le=>{const ge=le.data.data;if(ge.total&&ge.list.length===0&&Y!==1){V(Y-1);return}return p==null||p(ge),ge}).catch(le=>(we.error(`\u67E5\u8BE2${i||""}\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5 ${(le==null?void 0:le.message)||""}`),null)),{refreshDeps:[z,Y]});se.exports.useImperativeHandle(e,()=>({refreshSearchTable:ne,searchFormRef:D}));const ae=se.exports.useMemo(()=>n.find(le=>le.schema.field==="actions"),[n]),oe=n.some(le=>le.isSearch),he=oe||N;return O(cu,{formRef:R,createRequest:N,updateRequest:le=>T(w?w(le):le),refreshRequest:ne,children:O(Pi.Consumer,{children:({showType:le,setShowType:ge,createAction:Se,updateAction:b})=>{var Z;return re("div",{className:a,style:u,children:[oe?O(ut,ue(q({},m),{form:D,initialValues:x,formItemConfigList:Ri(n,"isSearch"),onValuesChange:(W,I)=>{G(I)}})):null,he?re("div",{className:Me("flex justify-between pr-2",oe?"py-6":"pb-6"),children:[oe?re(rt,{size:16,children:[O(me,{type:"default",loading:pe,icon:O(ai,{}),onClick:()=>{D.clearFields(),D.setFieldsValue(L()),setTimeout(()=>{Y===1?ne():V(1)})},children:"\u91CD\u7F6E"}),O(me,{type:"primary",icon:O(oi,{}),loading:pe,onClick:()=>ne(),children:"\u67E5\u8BE2"})]}):null,re(rt,{size:16,children:[(N||F)&&O(me,ue(q({type:"primary",onClick:()=>{F?F():ge(Ye.create)},icon:O(Hr,{})},v),{children:d})),B==null?void 0:B()]})]}):null,k==null?void 0:k(),O(Wr,ue(q({rowKey:o,pagination:{pageSize:z,current:Y,total:(U==null?void 0:U.total)||((Z=f==null?void 0:f.data)==null?void 0:Z.length),showTotal:!0,sizeCanChange:!0,onChange(W,I){V(W),$(I)}},data:U==null?void 0:U.list,loading:pe},f),{columns:[...pu(n.filter(W=>!W.hideTable&&W.schema.field!=="actions")),...s?[ue(q({title:"\u64CD\u4F5C",key:"actions",width:315},ae),{render:(W,I,P)=>{var j;return re(rt,{size:0,children:[C&&O(me,{type:"text",icon:O(eo,{}),onClick:()=>{C(I)},children:"\u67E5\u770B"}),(j=ae==null?void 0:ae.render)==null?void 0:j.call(ae,W,I,P),T&&O(me,{type:"text",status:"warning",icon:O(ui,{}),onClick:()=>{ge(Ye.edit,A?A(I):I)},children:"\u7F16\u8F91"}),M&&(S?S(I):!0)?O(Yr,{buttonProps:{type:"text"},onOk:()=>{g?nt({content:O(_t,{ref:K,placeholder:`\u8BF7\u8F93\u5165\u5220\u9664\u540D\u79F0(${I[g]})`}),onOk(){K.current.dom.value===I[g]?Ee(()=>M(I[o])).then(()=>{ne()}):we.error("\u540D\u79F0\u586B\u5199\u9519\u8BEF\uFF01")}}):Ee(()=>M(I[o])).then(()=>{ne()})}}):null]})}})]:[]]})),O(Te,ue(q(ue(q({},Ao),{confirmLoading:(Se==null?void 0:Se.loading)||(b==null?void 0:b.loading),onCancel:()=>{ge(null),R.resetFields()},onOk:async()=>{const W=await R.validate();switch(le){case Ye.create:Se.run(W);break;case Ye.edit:b.run(W);break}},visible:!!le,title:`${Co[le]}${i}`,unmountOnExit:!0}),h),{children:O(ut,q({initialValues:c,form:R,labelLength:8,span:12,className:"pb-4 pt-6",formItemConfigList:[...Ri(n,"isCreate",{showType:le}),{schema:{field:o},formItemProps:{hidden:!0}}]},y))}))]})}})})});function Ri(t,e,i={}){return t.filter(r=>r[e]).map(r=>q(ue(q({},Ce.exports.omit(r,["isCreate","isSearch","dynamicHandle"])),{schema:ue(q({},r.schema),{required:e==="isSearch"?!1:r.schema.required,rules:e==="isSearch"?null:r.schema.rules})}),r.dynamicHandle?r.dynamicHandle(i):{}))}function pu(t){return t.filter(i=>{var n;return!((n=i.formItemProps)==null?void 0:n.hidden)}).map(i=>ue(q({},i),{title:i.title||i.schema.label,dataIndex:i.schema.field}))}var Jr=hu,en=t=>{var n;const{data:e,className:i}=t;return re("div",{className:`p-2 w-full flex items-center ${i}`,children:[O(fr,{className:"size-16",src:Ce.exports.isArray(e.productImg)?(n=e.productImg)==null?void 0:n[0]:e.productImg}),O("div",{className:"ml-2 flex-1 w-0",children:re("div",{className:"text-sm text-gray-500",children:[O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"SKU",value:e.sku}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u5546\u54C1\u540D\u79F0",value:e.productName}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u5546\u54C1\u7F16\u7801",value:e.productCode}),(e==null?void 0:e.platformItemId)?O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u5E73\u53F0\u5546\u54C1ID",value:e.platformItemId}):null]})})]})},mu=t=>{const{value:e,onChange:i}=t,[n,r]=se.exports.useState(!1),[a,u]=se.exports.useState([...e||[]]),[o,f]=se.exports.useState();return re("div",{children:[O(me,{onClick:()=>{r(!0)},children:"\u70B9\u51FB\u9009\u62E9"}),(e==null?void 0:e.length)?O(Jr,{className:"mt-4",name:"\u5546\u54C1\u9009\u62E9",tableProps:{data:e},formItemConfigList:[{schema:{label:"\u5546\u54C1\u540D\u79F0",field:"productName"},width:300,render:(m,l)=>O(en,{data:l})},{schema:{label:"\u6570\u91CF",field:"num"},render(m,l){return O(Mo,{value:m,title:"\u4FEE\u6539\u6570\u91CF",type:$o.Number,onChange:c=>(l.num=c,console.log(e),i([...e]),Promise.resolve({data:{code:0}}))})}},{schema:{label:"\u64CD\u4F5C",field:"actions"},render(m,l){return O(me,{type:"text",onClick:()=>{i(e.filter(c=>c!==l))},children:"\u79FB\u9664"})}}]}):null,O(Te,{style:{width:"850px"},visible:n,title:"\u5546\u54C1\u9009\u62E9",onConfirm:()=>{i(a),r(!1)},onCancel:()=>{r(!1)},children:O(Jr,{getListRequest:(...m)=>su.getProductList(...m).then(l=>(f(l.data.data.list),u([]),l)),name:"\u5546\u54C1\u9009\u62E9",showActions:!1,tableProps:{rowKey:"id",rowSelection:{type:"checkbox",selectedRowKeys:a.map(m=>m.id),onChange:m=>{u(o.filter(l=>m.includes(l.id)).map(l=>ue(q({},l),{num:20})))},onSelectAll:m=>{u(m?o.map(l=>ue(q({},l),{num:20})):[])}}},formItemConfigList:[{schema:{label:"\u5546\u54C1\u540D\u79F0",field:"productName"},render:(m,l)=>re("div",{className:"flex items-center",children:[O(fr,{className:"size-14 mr-1 overflow-hidden object-cover",src:l.productImg}),O("div",{className:"w-44",children:l.productName})]}),isSearch:!0},{schema:{label:"SKU",field:"sku"}}]})})]})};const gu={get(t){return ie.post("/api/role/list",t)},create(t){return ie.post("/api/role/insert",q({menuIds:[],roleCode:Ce.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},t))},remove(t){return ie.get(`/api/role/remove/${t}`)},update(t){return ie.post("/api/role/update",t)},info(t){return ie.get(`/api/role/info/${t}`)}},vu={get(t){return ie.post("/api/tenantry/role/list",t)},create(t){return ie.post("/api/tenantry/role/insert",q({menuIds:[],roleCode:Ce.exports.random(0,1e3).toString(),systemAcquiesce:0,tenantryId:0},t))},remove(t){return ie.get(`/api/tenantry/role/remove/${t}`)},update(t){return ie.post("/api/tenantry/role/update",t)},info(t){return ie.get(`/api/tenantry/role/info/${t}`)},getRoleUsers(t){return ie.get(`/api/tenantry/role/user/info/${t}`)},saveRoleMenu(t){return ie.post("/api/tenantry/role/menu/save/or/update",t)},saveRoleUser(t){return ie.post("/api/tenantry/role/user/save/or/update",t)},saveRoleUserByAdmin(t){return ie.post("/api/tenantry/role/save/or/update/user",t)},saveRoleMenuByAdmin(t){return ie.post("/api/tenantry/role/save/or/update/menu",t)}};let tn,rn;function yu(){return tn=tn||gu.get({pageNum:1,pageSize:50}).then(t=>{var e;return(e=t.data.data)==null?void 0:e.list.map(i=>({label:i.roleName,value:i.id}))}),tn}function bu(){return rn=rn||vu.get({pageNum:1,pageSize:50}).then(t=>{var e;return(e=t.data.data)==null?void 0:e.list.map(i=>({label:i.roleName,value:i.id}))}),rn}function Ni(){return _e(()=>Ze()?yu():bu())}function U0(t){var n;const{value:e}=t,{data:i}=Ni();return O(ve,{children:(n=i==null?void 0:i.find(r=>String(r.value)===String(e)))==null?void 0:n.label})}const _u=t=>{const e=Ni();return O(zr,ue(q({placeholder:"\u8BF7\u9009\u62E9"},t),{options:e.data,loading:e.loading}))};function Eu(t,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(n){if(n!=="default"&&!(n in t)){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}})}),Object.freeze(t)}function Li(t,e){return new Promise(function(i,n){let r;return wu(t).then(function(a){try{return r=a,i(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(u){return n(u)}},n)})}const wu=t=>new Promise((e,i)=>{const n=new FileReader;n.addEventListener("load",({target:{result:r}})=>{const a=new DataView(r);let u=0;if(a.getUint16(u)!==65496)return i("not a valid JPEG");for(u+=2;;){const o=a.getUint16(u);if(o===65498)break;const f=a.getUint16(u+2);if(o===65505&&a.getUint32(u+4)===1165519206){const m=u+10;let l;switch(a.getUint16(m)){case 18761:l=!0;break;case 19789:l=!1;break;default:return i("TIFF header contains invalid endian")}if(a.getUint16(m+2,l)!==42)return i("TIFF header contains invalid version");const c=a.getUint32(m+4,l),s=m+c+2+12*a.getUint16(m+c,l);for(let d=m+c+2;d<s;d+=12)if(a.getUint16(d,l)==274){if(a.getUint16(d+2,l)!==3)return i("Orientation data type is invalid");if(a.getUint32(d+4,l)!==1)return i("Orientation data count is invalid");a.setUint16(d+8,1,l);break}return e(r.slice(u,u+2+f))}u+=2+f}return e(new Blob)}),n.readAsArrayBuffer(t)});var mr={},Ou={get exports(){return mr},set exports(t){mr=t}};(function(t){var e,i,n={};Ou.exports=n,n.parse=function(r,a){for(var u=n.bin.readUshort,o=n.bin.readUint,f=0,m={},l=new Uint8Array(r),c=l.length-4;o(l,c)!=101010256;)c--;f=c,f+=4;var s=u(l,f+=4);u(l,f+=2);var d=o(l,f+=2),v=o(l,f+=4);f+=4,f=v;for(var h=0;h<s;h++){o(l,f),f+=4,f+=4,f+=4,o(l,f+=4),d=o(l,f+=4);var y=o(l,f+=4),g=u(l,f+=4),_=u(l,f+2),w=u(l,f+4);f+=6;var A=o(l,f+=8);f+=4,f+=g+_+w,n._readLocal(l,A,m,d,y,a)}return m},n._readLocal=function(r,a,u,o,f,m){var l=n.bin.readUshort,c=n.bin.readUint;c(r,a),l(r,a+=4),l(r,a+=2);var s=l(r,a+=2);c(r,a+=2),c(r,a+=4),a+=4;var d=l(r,a+=8),v=l(r,a+=2);a+=2;var h=n.bin.readUTF8(r,a,d);if(a+=d,a+=v,m)u[h]={size:f,csize:o};else{var y=new Uint8Array(r.buffer,a);if(s==0)u[h]=new Uint8Array(y.buffer.slice(a,a+o));else{if(s!=8)throw"unknown compression method: "+s;var g=new Uint8Array(f);n.inflateRaw(y,g),u[h]=g}}},n.inflateRaw=function(r,a){return n.F.inflate(r,a)},n.inflate=function(r,a){return r[0],r[1],n.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),a)},n.deflate=function(r,a){a==null&&(a={level:6});var u=0,o=new Uint8Array(50+Math.floor(1.1*r.length));o[u]=120,o[u+1]=156,u+=2,u=n.F.deflateRaw(r,o,u,a.level);var f=n.adler(r,0,r.length);return o[u+0]=f>>>24&255,o[u+1]=f>>>16&255,o[u+2]=f>>>8&255,o[u+3]=f>>>0&255,new Uint8Array(o.buffer,0,u+4)},n.deflateRaw=function(r,a){a==null&&(a={level:6});var u=new Uint8Array(50+Math.floor(1.1*r.length)),o=n.F.deflateRaw(r,u,o,a.level);return new Uint8Array(u.buffer,0,o)},n.encode=function(r,a){a==null&&(a=!1);var u=0,o=n.bin.writeUint,f=n.bin.writeUshort,m={};for(var l in r){var c=!n._noNeed(l)&&!a,s=r[l],d=n.crc.crc(s,0,s.length);m[l]={cpr:c,usize:s.length,crc:d,file:c?n.deflateRaw(s):s}}for(var l in m)u+=m[l].file.length+30+46+2*n.bin.sizeUTF8(l);u+=22;var v=new Uint8Array(u),h=0,y=[];for(var l in m){var g=m[l];y.push(h),h=n._writeHeader(v,h,l,g,0)}var _=0,w=h;for(var l in m)g=m[l],y.push(h),h=n._writeHeader(v,h,l,g,1,y[_++]);var A=h-w;return o(v,h,101010256),h+=4,f(v,h+=4,_),f(v,h+=2,_),o(v,h+=2,A),o(v,h+=4,w),h+=4,h+=2,v.buffer},n._noNeed=function(r){var a=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},n._writeHeader=function(r,a,u,o,f,m){var l=n.bin.writeUint,c=n.bin.writeUshort,s=o.file;return l(r,a,f==0?67324752:33639248),a+=4,f==1&&(a+=2),c(r,a,20),c(r,a+=2,0),c(r,a+=2,o.cpr?8:0),l(r,a+=2,0),l(r,a+=4,o.crc),l(r,a+=4,s.length),l(r,a+=4,o.usize),c(r,a+=4,n.bin.sizeUTF8(u)),c(r,a+=2,0),a+=2,f==1&&(a+=2,a+=2,l(r,a+=6,m),a+=4),a+=n.bin.writeUTF8(r,a,u),f==0&&(r.set(s,a),a+=s.length),a},n.crc={table:function(){for(var r=new Uint32Array(256),a=0;a<256;a++){for(var u=a,o=0;o<8;o++)1&u?u=3988292384^u>>>1:u>>>=1;r[a]=u}return r}(),update:function(r,a,u,o){for(var f=0;f<o;f++)r=n.crc.table[255&(r^a[u+f])]^r>>>8;return r},crc:function(r,a,u){return 4294967295^n.crc.update(4294967295,r,a,u)}},n.adler=function(r,a,u){for(var o=1,f=0,m=a,l=a+u;m<l;){for(var c=Math.min(m+5552,l);m<c;)f+=o+=r[m++];o%=65521,f%=65521}return f<<16|o},n.bin={readUshort:function(r,a){return r[a]|r[a+1]<<8},writeUshort:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255},readUint:function(r,a){return 16777216*r[a+3]+(r[a+2]<<16|r[a+1]<<8|r[a])},writeUint:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255,r[a+2]=u>>16&255,r[a+3]=u>>24&255},readASCII:function(r,a,u){for(var o="",f=0;f<u;f++)o+=String.fromCharCode(r[a+f]);return o},writeASCII:function(r,a,u){for(var o=0;o<u.length;o++)r[a+o]=u.charCodeAt(o)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,a,u){for(var o,f="",m=0;m<u;m++)f+="%"+n.bin.pad(r[a+m].toString(16));try{o=decodeURIComponent(f)}catch{return n.bin.readASCII(r,a,u)}return o},writeUTF8:function(r,a,u){for(var o=u.length,f=0,m=0;m<o;m++){var l=u.charCodeAt(m);if((4294967168&l)==0)r[a+f]=l,f++;else if((4294965248&l)==0)r[a+f]=192|l>>6,r[a+f+1]=128|l>>0&63,f+=2;else if((4294901760&l)==0)r[a+f]=224|l>>12,r[a+f+1]=128|l>>6&63,r[a+f+2]=128|l>>0&63,f+=3;else{if((4292870144&l)!=0)throw"e";r[a+f]=240|l>>18,r[a+f+1]=128|l>>12&63,r[a+f+2]=128|l>>6&63,r[a+f+3]=128|l>>0&63,f+=4}}return f},sizeUTF8:function(r){for(var a=r.length,u=0,o=0;o<a;o++){var f=r.charCodeAt(o);if((4294967168&f)==0)u++;else if((4294965248&f)==0)u+=2;else if((4294901760&f)==0)u+=3;else{if((4292870144&f)!=0)throw"e";u+=4}}return u}},n.F={},n.F.deflateRaw=function(r,a,u,o){var f=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],m=n.F.U,l=n.F._goodIndex;n.F._hash;var c=n.F._putsE,s=0,d=u<<3,v=0,h=r.length;if(o==0){for(;s<h;)c(a,d,s+(M=Math.min(65535,h-s))==h?1:0),d=n.F._copyExact(r,s,M,a,d+8),s+=M;return d>>>3}var y=m.lits,g=m.strt,_=m.prev,w=0,A=0,B=0,C=0,N=0,F=0;for(h>2&&(g[F=n.F._hash(r,0)]=0),s=0;s<h;s++){if(N=F,s+1<h-2){F=n.F._hash(r,s+1);var E=s+1&32767;_[E]=g[F],g[F]=E}if(v<=s){(w>14e3||A>26697)&&h-s>100&&(v<s&&(y[w]=s-v,w+=2,v=s),d=n.F._writeBlock(s==h-1||v==h?1:0,y,w,C,r,B,s-B,a,d),w=A=C=0,B=s);var T=0;s<h-2&&(T=n.F._bestMatch(r,s,_,N,Math.min(f[2],h-s),f[3]));var M=T>>>16,S=65535&T;if(T!=0){S=65535&T;var k=l(M=T>>>16,m.of0);m.lhst[257+k]++;var p=l(S,m.df0);m.dhst[p]++,C+=m.exb[k]+m.dxb[p],y[w]=M<<23|s-v,y[w+1]=S<<16|k<<8|p,w+=2,v=s+M}else m.lhst[r[s]]++;A++}}for(B==s&&r.length!=0||(v<s&&(y[w]=s-v,w+=2,v=s),d=n.F._writeBlock(1,y,w,C,r,B,s-B,a,d),w=0,A=0,w=A=C=0,B=s);(7&d)!=0;)d++;return d>>>3},n.F._bestMatch=function(r,a,u,o,f,m){var l=32767&a,c=u[l],s=l-c+32768&32767;if(c==l||o!=n.F._hash(r,a-s))return 0;for(var d=0,v=0,h=Math.min(32767,a);s<=h&&--m!=0&&c!=l;){if(d==0||r[a+d]==r[a+d-s]){var y=n.F._howLong(r,a,s);if(y>d){if(v=s,(d=y)>=f)break;s+2<y&&(y=s+2);for(var g=0,_=0;_<y-2;_++){var w=a-s+_+32768&32767,A=w-u[w]+32768&32767;A>g&&(g=A,c=w)}}}s+=(l=c)-(c=u[l])+32768&32767}return d<<16|v},n.F._howLong=function(r,a,u){if(r[a]!=r[a-u]||r[a+1]!=r[a+1-u]||r[a+2]!=r[a+2-u])return 0;var o=a,f=Math.min(r.length,a+258);for(a+=3;a<f&&r[a]==r[a-u];)a++;return a-o},n.F._hash=function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(r,a,u,o,f,m,l,c,s){var d,v,h,y,g,_,w,A,B,C=n.F.U,N=n.F._putsF,F=n.F._putsE;C.lhst[256]++,v=(d=n.F.getTrees())[0],h=d[1],y=d[2],g=d[3],_=d[4],w=d[5],A=d[6],B=d[7];var E=32+((s+3&7)==0?0:8-(s+3&7))+(l<<3),T=o+n.F.contSize(C.fltree,C.lhst)+n.F.contSize(C.fdtree,C.dhst),M=o+n.F.contSize(C.ltree,C.lhst)+n.F.contSize(C.dtree,C.dhst);M+=14+3*w+n.F.contSize(C.itree,C.ihst)+(2*C.ihst[16]+3*C.ihst[17]+7*C.ihst[18]);for(var S=0;S<286;S++)C.lhst[S]=0;for(S=0;S<30;S++)C.dhst[S]=0;for(S=0;S<19;S++)C.ihst[S]=0;var k=E<T&&E<M?0:T<M?1:2;if(N(c,s,r),N(c,s+1,k),s+=3,k==0){for(;(7&s)!=0;)s++;s=n.F._copyExact(f,m,l,c,s)}else{var p,R;if(k==1&&(p=C.fltree,R=C.fdtree),k==2){n.F.makeCodes(C.ltree,v),n.F.revCodes(C.ltree,v),n.F.makeCodes(C.dtree,h),n.F.revCodes(C.dtree,h),n.F.makeCodes(C.itree,y),n.F.revCodes(C.itree,y),p=C.ltree,R=C.dtree,F(c,s,g-257),F(c,s+=5,_-1),F(c,s+=5,w-4),s+=4;for(var D=0;D<w;D++)F(c,s+3*D,C.itree[1+(C.ordr[D]<<1)]);s+=3*w,s=n.F._codeTiny(A,C.itree,c,s),s=n.F._codeTiny(B,C.itree,c,s)}for(var x=m,G=0;G<u;G+=2){for(var L=a[G],K=L>>>23,z=x+(8388607&L);x<z;)s=n.F._writeLit(f[x++],p,c,s);if(K!=0){var $=a[G+1],Y=$>>16,V=$>>8&255,U=255&$;F(c,s=n.F._writeLit(257+V,p,c,s),K-C.of0[V]),s+=C.exb[V],N(c,s=n.F._writeLit(U,R,c,s),Y-C.df0[U]),s+=C.dxb[U],x+=K}}s=n.F._writeLit(256,p,c,s)}return s},n.F._copyExact=function(r,a,u,o,f){var m=f>>>3;return o[m]=u,o[m+1]=u>>>8,o[m+2]=255-o[m],o[m+3]=255-o[m+1],m+=4,o.set(new Uint8Array(r.buffer,a,u),m),f+(u+4<<3)},n.F.getTrees=function(){for(var r=n.F.U,a=n.F._hufTree(r.lhst,r.ltree,15),u=n.F._hufTree(r.dhst,r.dtree,15),o=[],f=n.F._lenCodes(r.ltree,o),m=[],l=n.F._lenCodes(r.dtree,m),c=0;c<o.length;c+=2)r.ihst[o[c]]++;for(c=0;c<m.length;c+=2)r.ihst[m[c]]++;for(var s=n.F._hufTree(r.ihst,r.itree,7),d=19;d>4&&r.itree[1+(r.ordr[d-1]<<1)]==0;)d--;return[a,u,s,f,l,d,o,m]},n.F.getSecond=function(r){for(var a=[],u=0;u<r.length;u+=2)a.push(r[u+1]);return a},n.F.nonZero=function(r){for(var a="",u=0;u<r.length;u+=2)r[u+1]!=0&&(a+=(u>>1)+",");return a},n.F.contSize=function(r,a){for(var u=0,o=0;o<a.length;o++)u+=a[o]*r[1+(o<<1)];return u},n.F._codeTiny=function(r,a,u,o){for(var f=0;f<r.length;f+=2){var m=r[f],l=r[f+1];o=n.F._writeLit(m,a,u,o);var c=m==16?2:m==17?3:7;m>15&&(n.F._putsE(u,o,l,c),o+=c)}return o},n.F._lenCodes=function(r,a){for(var u=r.length;u!=2&&r[u-1]==0;)u-=2;for(var o=0;o<u;o+=2){var f=r[o+1],m=o+3<u?r[o+3]:-1,l=o+5<u?r[o+5]:-1,c=o==0?-1:r[o-1];if(f==0&&m==f&&l==f){for(var s=o+5;s+2<u&&r[s+2]==f;)s+=2;(d=Math.min(s+1-o>>>1,138))<11?a.push(17,d-3):a.push(18,d-11),o+=2*d-2}else if(f==c&&m==f&&l==f){for(s=o+5;s+2<u&&r[s+2]==f;)s+=2;var d=Math.min(s+1-o>>>1,6);a.push(16,d-3),o+=2*d-2}else a.push(f,0)}return u>>>1},n.F._hufTree=function(r,a,u){var o=[],f=r.length,m=a.length,l=0;for(l=0;l<m;l+=2)a[l]=0,a[l+1]=0;for(l=0;l<f;l++)r[l]!=0&&o.push({lit:l,f:r[l]});var c=o.length,s=o.slice(0);if(c==0)return 0;if(c==1){var d=o[0].lit;return s=d==0?1:0,a[1+(d<<1)]=1,a[1+(s<<1)]=1,1}o.sort(function(A,B){return A.f-B.f});var v=o[0],h=o[1],y=0,g=1,_=2;for(o[0]={lit:-1,f:v.f+h.f,l:v,r:h,d:0};g!=c-1;)v=y!=g&&(_==c||o[y].f<o[_].f)?o[y++]:o[_++],h=y!=g&&(_==c||o[y].f<o[_].f)?o[y++]:o[_++],o[g++]={lit:-1,f:v.f+h.f,l:v,r:h};var w=n.F.setDepth(o[g-1],0);for(w>u&&(n.F.restrictDepth(s,u,w),w=u),l=0;l<c;l++)a[1+(s[l].lit<<1)]=s[l].d;return w},n.F.setDepth=function(r,a){return r.lit!=-1?(r.d=a,a):Math.max(n.F.setDepth(r.l,a+1),n.F.setDepth(r.r,a+1))},n.F.restrictDepth=function(r,a,u){var o=0,f=1<<u-a,m=0;for(r.sort(function(c,s){return s.d==c.d?c.f-s.f:s.d-c.d}),o=0;o<r.length&&r[o].d>a;o++){var l=r[o].d;r[o].d=a,m+=f-(1<<u-l)}for(m>>>=u-a;m>0;)(l=r[o].d)<a?(r[o].d++,m-=1<<a-l-1):o++;for(;o>=0;o--)r[o].d==a&&m<0&&(r[o].d--,m++);m!=0&&console.log("debt left")},n.F._goodIndex=function(r,a){var u=0;return a[16|u]<=r&&(u|=16),a[8|u]<=r&&(u|=8),a[4|u]<=r&&(u|=4),a[2|u]<=r&&(u|=2),a[1|u]<=r&&(u|=1),u},n.F._writeLit=function(r,a,u,o){return n.F._putsF(u,o,a[r<<1]),o+a[1+(r<<1)]},n.F.inflate=function(r,a){var u=Uint8Array;if(r[0]==3&&r[1]==0)return a||new u(0);var o=n.F,f=o._bitsF,m=o._bitsE,l=o._decodeTiny,c=o.makeCodes,s=o.codes2map,d=o._get17,v=o.U,h=a==null;h&&(a=new u(r.length>>>2<<3));for(var y,g,_=0,w=0,A=0,B=0,C=0,N=0,F=0,E=0,T=0;_==0;)if(_=f(r,T,1),w=f(r,T+1,2),T+=3,w!=0){if(h&&(a=n.F._check(a,E+(1<<17))),w==1&&(y=v.flmap,g=v.fdmap,N=511,F=31),w==2){A=m(r,T,5)+257,B=m(r,T+5,5)+1,C=m(r,T+10,4)+4,T+=14;for(var M=0;M<38;M+=2)v.itree[M]=0,v.itree[M+1]=0;var S=1;for(M=0;M<C;M++){var k=m(r,T+3*M,3);v.itree[1+(v.ordr[M]<<1)]=k,k>S&&(S=k)}T+=3*C,c(v.itree,S),s(v.itree,S,v.imap),y=v.lmap,g=v.dmap,T=l(v.imap,(1<<S)-1,A+B,r,T,v.ttree);var p=o._copyOut(v.ttree,0,A,v.ltree);N=(1<<p)-1;var R=o._copyOut(v.ttree,A,B,v.dtree);F=(1<<R)-1,c(v.ltree,p),s(v.ltree,p,y),c(v.dtree,R),s(v.dtree,R,g)}for(;;){var D=y[d(r,T)&N];T+=15&D;var x=D>>>4;if(x>>>8==0)a[E++]=x;else{if(x==256)break;var G=E+x-254;if(x>264){var L=v.ldef[x-257];G=E+(L>>>3)+m(r,T,7&L),T+=7&L}var K=g[d(r,T)&F];T+=15&K;var z=K>>>4,$=v.ddef[z],Y=($>>>4)+f(r,T,15&$);for(T+=15&$,h&&(a=n.F._check(a,E+(1<<17)));E<G;)a[E]=a[E++-Y],a[E]=a[E++-Y],a[E]=a[E++-Y],a[E]=a[E++-Y];E=G}}}else{(7&T)!=0&&(T+=8-(7&T));var V=4+(T>>>3),U=r[V-4]|r[V-3]<<8;h&&(a=n.F._check(a,E+U)),a.set(new u(r.buffer,r.byteOffset+V,U),E),T=V+U<<3,E+=U}return a.length==E?a:a.slice(0,E)},n.F._check=function(r,a){var u=r.length;if(a<=u)return r;var o=new Uint8Array(Math.max(u<<1,a));return o.set(r,0),o},n.F._decodeTiny=function(r,a,u,o,f,m){for(var l=n.F._bitsE,c=n.F._get17,s=0;s<u;){var d=r[c(o,f)&a];f+=15&d;var v=d>>>4;if(v<=15)m[s]=v,s++;else{var h=0,y=0;v==16?(y=3+l(o,f,2),f+=2,h=m[s-1]):v==17?(y=3+l(o,f,3),f+=3):v==18&&(y=11+l(o,f,7),f+=7);for(var g=s+y;s<g;)m[s]=h,s++}}return f},n.F._copyOut=function(r,a,u,o){for(var f=0,m=0,l=o.length>>>1;m<u;){var c=r[m+a];o[m<<1]=0,o[1+(m<<1)]=c,c>f&&(f=c),m++}for(;m<l;)o[m<<1]=0,o[1+(m<<1)]=0,m++;return f},n.F.makeCodes=function(r,a){for(var u,o,f,m,l=n.F.U,c=r.length,s=l.bl_count,d=0;d<=a;d++)s[d]=0;for(d=1;d<c;d+=2)s[r[d]]++;var v=l.next_code;for(u=0,s[0]=0,o=1;o<=a;o++)u=u+s[o-1]<<1,v[o]=u;for(f=0;f<c;f+=2)(m=r[f+1])!=0&&(r[f]=v[m],v[m]++)},n.F.codes2map=function(r,a,u){for(var o=r.length,f=n.F.U.rev15,m=0;m<o;m+=2)if(r[m+1]!=0)for(var l=m>>1,c=r[m+1],s=l<<4|c,d=a-c,v=r[m]<<d,h=v+(1<<d);v!=h;)u[f[v]>>>15-a]=s,v++},n.F.revCodes=function(r,a){for(var u=n.F.U.rev15,o=15-a,f=0;f<r.length;f+=2){var m=r[f]<<a-r[f+1];r[f]=u[m]>>>o}},n.F._putsE=function(r,a,u){u<<=7&a;var o=a>>>3;r[o]|=u,r[o+1]|=u>>>8},n.F._putsF=function(r,a,u){u<<=7&a;var o=a>>>3;r[o]|=u,r[o+1]|=u>>>8,r[o+2]|=u>>>16},n.F._bitsE=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8)>>>(7&a)&(1<<u)-1},n.F._bitsF=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)&(1<<u)-1},n.F._get17=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)},n.F._get25=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16|r[3+(a>>>3)]<<24)>>>(7&a)},n.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=n.F.U,a=0;a<32768;a++){var u=a;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,r.rev15[a]=(u>>>16|u<<16)>>>17}function o(f,m,l){for(;m--!=0;)f.push(0,l)}for(a=0;a<32;a++)r.ldef[a]=r.of0[a]<<3|r.exb[a],r.ddef[a]=r.df0[a]<<4|r.dxb[a];o(r.fltree,144,8),o(r.fltree,112,9),o(r.fltree,24,7),o(r.fltree,8,8),n.F.makeCodes(r.fltree,9),n.F.codes2map(r.fltree,9,r.flmap),n.F.revCodes(r.fltree,9),o(r.fdtree,32,5),n.F.makeCodes(r.fdtree,5),n.F.codes2map(r.fdtree,5,r.fdmap),n.F.revCodes(r.fdtree,5),o(r.itree,19,0),o(r.ltree,286,0),o(r.dtree,30,0),o(r.ttree,320,0)}()})();var xu=Eu({__proto__:null,default:mr},[mr]);const it=function(){var t={nextZero(l,c){for(;l[c]!=0;)c++;return c},readUshort:(l,c)=>l[c]<<8|l[c+1],writeUshort(l,c,s){l[c]=s>>8&255,l[c+1]=255&s},readUint:(l,c)=>16777216*l[c]+(l[c+1]<<16|l[c+2]<<8|l[c+3]),writeUint(l,c,s){l[c]=s>>24&255,l[c+1]=s>>16&255,l[c+2]=s>>8&255,l[c+3]=255&s},readASCII(l,c,s){let d="";for(let v=0;v<s;v++)d+=String.fromCharCode(l[c+v]);return d},writeASCII(l,c,s){for(let d=0;d<s.length;d++)l[c+d]=s.charCodeAt(d)},readBytes(l,c,s){const d=[];for(let v=0;v<s;v++)d.push(l[c+v]);return d},pad:l=>l.length<2?`0${l}`:l,readUTF8(l,c,s){let d,v="";for(let h=0;h<s;h++)v+=`%${t.pad(l[c+h].toString(16))}`;try{d=decodeURIComponent(v)}catch{return t.readASCII(l,c,s)}return d}};function e(l,c,s,d){const v=c*s,h=a(d),y=Math.ceil(c*h/8),g=new Uint8Array(4*v),_=new Uint32Array(g.buffer),{ctype:w}=d,{depth:A}=d,B=t.readUshort;if(w==6){const L=v<<2;if(A==8)for(var C=0;C<L;C+=4)g[C]=l[C],g[C+1]=l[C+1],g[C+2]=l[C+2],g[C+3]=l[C+3];if(A==16)for(C=0;C<L;C++)g[C]=l[C<<1]}else if(w==2){const L=d.tabs.tRNS;if(L==null){if(A==8)for(C=0;C<v;C++){var N=3*C;_[C]=255<<24|l[N+2]<<16|l[N+1]<<8|l[N]}if(A==16)for(C=0;C<v;C++)N=6*C,_[C]=255<<24|l[N+4]<<16|l[N+2]<<8|l[N]}else{var F=L[0];const K=L[1],z=L[2];if(A==8)for(C=0;C<v;C++){var E=C<<2;N=3*C,_[C]=255<<24|l[N+2]<<16|l[N+1]<<8|l[N],l[N]==F&&l[N+1]==K&&l[N+2]==z&&(g[E+3]=0)}if(A==16)for(C=0;C<v;C++)E=C<<2,N=6*C,_[C]=255<<24|l[N+4]<<16|l[N+2]<<8|l[N],B(l,N)==F&&B(l,N+2)==K&&B(l,N+4)==z&&(g[E+3]=0)}}else if(w==3){const L=d.tabs.PLTE,K=d.tabs.tRNS,z=K?K.length:0;if(A==1)for(var T=0;T<s;T++){var M=T*y,S=T*c;for(C=0;C<c;C++){E=S+C<<2;var k=3*(p=l[M+(C>>3)]>>7-((7&C)<<0)&1);g[E]=L[k],g[E+1]=L[k+1],g[E+2]=L[k+2],g[E+3]=p<z?K[p]:255}}if(A==2)for(T=0;T<s;T++)for(M=T*y,S=T*c,C=0;C<c;C++)E=S+C<<2,k=3*(p=l[M+(C>>2)]>>6-((3&C)<<1)&3),g[E]=L[k],g[E+1]=L[k+1],g[E+2]=L[k+2],g[E+3]=p<z?K[p]:255;if(A==4)for(T=0;T<s;T++)for(M=T*y,S=T*c,C=0;C<c;C++)E=S+C<<2,k=3*(p=l[M+(C>>1)]>>4-((1&C)<<2)&15),g[E]=L[k],g[E+1]=L[k+1],g[E+2]=L[k+2],g[E+3]=p<z?K[p]:255;if(A==8)for(C=0;C<v;C++){var p;E=C<<2,k=3*(p=l[C]),g[E]=L[k],g[E+1]=L[k+1],g[E+2]=L[k+2],g[E+3]=p<z?K[p]:255}}else if(w==4){if(A==8)for(C=0;C<v;C++){E=C<<2;var R=l[D=C<<1];g[E]=R,g[E+1]=R,g[E+2]=R,g[E+3]=l[D+1]}if(A==16)for(C=0;C<v;C++){var D;E=C<<2,R=l[D=C<<2],g[E]=R,g[E+1]=R,g[E+2]=R,g[E+3]=l[D+2]}}else if(w==0)for(F=d.tabs.tRNS?d.tabs.tRNS:-1,T=0;T<s;T++){const L=T*y,K=T*c;if(A==1)for(var x=0;x<c;x++){var G=(R=255*(l[L+(x>>>3)]>>>7-(7&x)&1))==255*F?0:255;_[K+x]=G<<24|R<<16|R<<8|R}else if(A==2)for(x=0;x<c;x++)G=(R=85*(l[L+(x>>>2)]>>>6-((3&x)<<1)&3))==85*F?0:255,_[K+x]=G<<24|R<<16|R<<8|R;else if(A==4)for(x=0;x<c;x++)G=(R=17*(l[L+(x>>>1)]>>>4-((1&x)<<2)&15))==17*F?0:255,_[K+x]=G<<24|R<<16|R<<8|R;else if(A==8)for(x=0;x<c;x++)G=(R=l[L+x])==F?0:255,_[K+x]=G<<24|R<<16|R<<8|R;else if(A==16)for(x=0;x<c;x++)R=l[L+(x<<1)],G=B(l,L+(x<<1))==F?0:255,_[K+x]=G<<24|R<<16|R<<8|R}return g}function i(l,c,s,d){const v=a(l),h=Math.ceil(s*v/8),y=new Uint8Array((h+1+l.interlace)*d);return c=l.tabs.CgBI?r(c,y):n(c,y),l.interlace==0?c=u(c,l,0,s,d):l.interlace==1&&(c=function(_,w){const A=w.width,B=w.height,C=a(w),N=C>>3,F=Math.ceil(A*C/8),E=new Uint8Array(B*F);let T=0;const M=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1];let R=0;for(;R<7;){const x=k[R],G=p[R];let L=0,K=0,z=M[R];for(;z<B;)z+=x,K++;let $=S[R];for(;$<A;)$+=G,L++;const Y=Math.ceil(L*C/8);u(_,w,T,L,K);let V=0,U=M[R];for(;U<B;){let ne=S[R],pe=T+V*Y<<3;for(;ne<A;){var D;if(C==1&&(D=(D=_[pe>>3])>>7-(7&pe)&1,E[U*F+(ne>>3)]|=D<<7-((7&ne)<<0)),C==2&&(D=(D=_[pe>>3])>>6-(7&pe)&3,E[U*F+(ne>>2)]|=D<<6-((3&ne)<<1)),C==4&&(D=(D=_[pe>>3])>>4-(7&pe)&15,E[U*F+(ne>>1)]|=D<<4-((1&ne)<<2)),C>=8){const ae=U*F+ne*N;for(let oe=0;oe<N;oe++)E[ae+oe]=_[(pe>>3)+oe]}pe+=C,ne+=G}V++,U+=x}L*K!=0&&(T+=K*(1+Y)),R+=1}return E}(c,l)),c}function n(l,c){return r(new Uint8Array(l.buffer,2,l.length-6),c)}var r=function(){const l={H:{}};return l.H.N=function(c,s){const d=Uint8Array;let v,h,y=0,g=0,_=0,w=0,A=0,B=0,C=0,N=0,F=0;if(c[0]==3&&c[1]==0)return s||new d(0);const E=l.H,T=E.b,M=E.e,S=E.R,k=E.n,p=E.A,R=E.Z,D=E.m,x=s==null;for(x&&(s=new d(c.length>>>2<<5));y==0;)if(y=T(c,F,1),g=T(c,F+1,2),F+=3,g!=0){if(x&&(s=l.H.W(s,N+(1<<17))),g==1&&(v=D.J,h=D.h,B=511,C=31),g==2){_=M(c,F,5)+257,w=M(c,F+5,5)+1,A=M(c,F+10,4)+4,F+=14;let L=1;for(var G=0;G<38;G+=2)D.Q[G]=0,D.Q[G+1]=0;for(G=0;G<A;G++){const $=M(c,F+3*G,3);D.Q[1+(D.X[G]<<1)]=$,$>L&&(L=$)}F+=3*A,k(D.Q,L),p(D.Q,L,D.u),v=D.w,h=D.d,F=S(D.u,(1<<L)-1,_+w,c,F,D.v);const K=E.V(D.v,0,_,D.C);B=(1<<K)-1;const z=E.V(D.v,_,w,D.D);C=(1<<z)-1,k(D.C,K),p(D.C,K,v),k(D.D,z),p(D.D,z,h)}for(;;){const L=v[R(c,F)&B];F+=15&L;const K=L>>>4;if(K>>>8==0)s[N++]=K;else{if(K==256)break;{let z=N+K-254;if(K>264){const ne=D.q[K-257];z=N+(ne>>>3)+M(c,F,7&ne),F+=7&ne}const $=h[R(c,F)&C];F+=15&$;const Y=$>>>4,V=D.c[Y],U=(V>>>4)+T(c,F,15&V);for(F+=15&V;N<z;)s[N]=s[N++-U],s[N]=s[N++-U],s[N]=s[N++-U],s[N]=s[N++-U];N=z}}}}else{(7&F)!=0&&(F+=8-(7&F));const L=4+(F>>>3),K=c[L-4]|c[L-3]<<8;x&&(s=l.H.W(s,N+K)),s.set(new d(c.buffer,c.byteOffset+L,K),N),F=L+K<<3,N+=K}return s.length==N?s:s.slice(0,N)},l.H.W=function(c,s){const d=c.length;if(s<=d)return c;const v=new Uint8Array(d<<1);return v.set(c,0),v},l.H.R=function(c,s,d,v,h,y){const g=l.H.e,_=l.H.Z;let w=0;for(;w<d;){const A=c[_(v,h)&s];h+=15&A;const B=A>>>4;if(B<=15)y[w]=B,w++;else{let C=0,N=0;B==16?(N=3+g(v,h,2),h+=2,C=y[w-1]):B==17?(N=3+g(v,h,3),h+=3):B==18&&(N=11+g(v,h,7),h+=7);const F=w+N;for(;w<F;)y[w]=C,w++}}return h},l.H.V=function(c,s,d,v){let h=0,y=0;const g=v.length>>>1;for(;y<d;){const _=c[y+s];v[y<<1]=0,v[1+(y<<1)]=_,_>h&&(h=_),y++}for(;y<g;)v[y<<1]=0,v[1+(y<<1)]=0,y++;return h},l.H.n=function(c,s){const d=l.H.m,v=c.length;let h,y,g,_;const w=d.j;for(var A=0;A<=s;A++)w[A]=0;for(A=1;A<v;A+=2)w[c[A]]++;const B=d.K;for(h=0,w[0]=0,y=1;y<=s;y++)h=h+w[y-1]<<1,B[y]=h;for(g=0;g<v;g+=2)_=c[g+1],_!=0&&(c[g]=B[_],B[_]++)},l.H.A=function(c,s,d){const v=c.length,h=l.H.m.r;for(let y=0;y<v;y+=2)if(c[y+1]!=0){const g=y>>1,_=c[y+1],w=g<<4|_,A=s-_;let B=c[y]<<A;const C=B+(1<<A);for(;B!=C;)d[h[B]>>>15-s]=w,B++}},l.H.l=function(c,s){const d=l.H.m.r,v=15-s;for(let h=0;h<c.length;h+=2){const y=c[h]<<s-c[h+1];c[h]=d[y]>>>v}},l.H.M=function(c,s,d){d<<=7&s;const v=s>>>3;c[v]|=d,c[v+1]|=d>>>8},l.H.I=function(c,s,d){d<<=7&s;const v=s>>>3;c[v]|=d,c[v+1]|=d>>>8,c[v+2]|=d>>>16},l.H.e=function(c,s,d){return(c[s>>>3]|c[1+(s>>>3)]<<8)>>>(7&s)&(1<<d)-1},l.H.b=function(c,s,d){return(c[s>>>3]|c[1+(s>>>3)]<<8|c[2+(s>>>3)]<<16)>>>(7&s)&(1<<d)-1},l.H.Z=function(c,s){return(c[s>>>3]|c[1+(s>>>3)]<<8|c[2+(s>>>3)]<<16)>>>(7&s)},l.H.i=function(c,s){return(c[s>>>3]|c[1+(s>>>3)]<<8|c[2+(s>>>3)]<<16|c[3+(s>>>3)]<<24)>>>(7&s)},l.H.m=function(){const c=Uint16Array,s=Uint32Array;return{K:new c(16),j:new c(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new c(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new s(32),J:new c(512),_:[],h:new c(32),$:[],w:new c(32768),C:[],v:[],d:new c(32768),D:[],u:new c(512),Q:[],r:new c(32768),s:new s(286),Y:new s(30),a:new s(19),t:new s(15e3),k:new c(65536),g:new c(32768)}}(),function(){const c=l.H.m;for(var s=0;s<32768;s++){let v=s;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,c.r[s]=(v>>>16|v<<16)>>>17}function d(v,h,y){for(;h--!=0;)v.push(0,y)}for(s=0;s<32;s++)c.q[s]=c.S[s]<<3|c.T[s],c.c[s]=c.p[s]<<4|c.z[s];d(c._,144,8),d(c._,112,9),d(c._,24,7),d(c._,8,8),l.H.n(c._,9),l.H.A(c._,9,c.J),l.H.l(c._,9),d(c.$,32,5),l.H.n(c.$,5),l.H.A(c.$,5,c.h),l.H.l(c.$,5),d(c.Q,19,0),d(c.C,286,0),d(c.D,30,0),d(c.v,320,0)}(),l.H.N}();function a(l){return[1,null,3,1,2,null,4][l.ctype]*l.depth}function u(l,c,s,d,v){let h=a(c);const y=Math.ceil(d*h/8);let g,_;h=Math.ceil(h/8);let w=l[s],A=0;if(w>1&&(l[s]=[0,0,1][w-2]),w==3)for(A=h;A<y;A++)l[A+1]=l[A+1]+(l[A+1-h]>>>1)&255;for(let B=0;B<v;B++)if(g=s+B*y,_=g+B+1,w=l[_-1],A=0,w==0)for(;A<y;A++)l[g+A]=l[_+A];else if(w==1){for(;A<h;A++)l[g+A]=l[_+A];for(;A<y;A++)l[g+A]=l[_+A]+l[g+A-h]}else if(w==2)for(;A<y;A++)l[g+A]=l[_+A]+l[g+A-y];else if(w==3){for(;A<h;A++)l[g+A]=l[_+A]+(l[g+A-y]>>>1);for(;A<y;A++)l[g+A]=l[_+A]+(l[g+A-y]+l[g+A-h]>>>1)}else{for(;A<h;A++)l[g+A]=l[_+A]+o(0,l[g+A-y],0);for(;A<y;A++)l[g+A]=l[_+A]+o(l[g+A-h],l[g+A-y],l[g+A-h-y])}return l}function o(l,c,s){const d=l+c-s,v=d-l,h=d-c,y=d-s;return v*v<=h*h&&v*v<=y*y?l:h*h<=y*y?c:s}function f(l,c,s){s.width=t.readUint(l,c),c+=4,s.height=t.readUint(l,c),c+=4,s.depth=l[c],c++,s.ctype=l[c],c++,s.compress=l[c],c++,s.filter=l[c],c++,s.interlace=l[c],c++}function m(l,c,s,d,v,h,y,g,_){const w=Math.min(c,v),A=Math.min(s,h);let B=0,C=0;for(let R=0;R<A;R++)for(let D=0;D<w;D++)if(y>=0&&g>=0?(B=R*c+D<<2,C=(g+R)*v+y+D<<2):(B=(-g+R)*c-y+D<<2,C=R*v+D<<2),_==0)d[C]=l[B],d[C+1]=l[B+1],d[C+2]=l[B+2],d[C+3]=l[B+3];else if(_==1){var N=l[B+3]*(1/255),F=l[B]*N,E=l[B+1]*N,T=l[B+2]*N,M=d[C+3]*(1/255),S=d[C]*M,k=d[C+1]*M,p=d[C+2]*M;const x=1-N,G=N+M*x,L=G==0?0:1/G;d[C+3]=255*G,d[C+0]=(F+S*x)*L,d[C+1]=(E+k*x)*L,d[C+2]=(T+p*x)*L}else if(_==2)N=l[B+3],F=l[B],E=l[B+1],T=l[B+2],M=d[C+3],S=d[C],k=d[C+1],p=d[C+2],N==M&&F==S&&E==k&&T==p?(d[C]=0,d[C+1]=0,d[C+2]=0,d[C+3]=0):(d[C]=F,d[C+1]=E,d[C+2]=T,d[C+3]=N);else if(_==3){if(N=l[B+3],F=l[B],E=l[B+1],T=l[B+2],M=d[C+3],S=d[C],k=d[C+1],p=d[C+2],N==M&&F==S&&E==k&&T==p)continue;if(N<220&&M>20)return!1}return!0}return{decode:function(c){const s=new Uint8Array(c);let d=8;const v=t,h=v.readUshort,y=v.readUint,g={tabs:{},frames:[]},_=new Uint8Array(s.length);let w,A=0,B=0;const C=[137,80,78,71,13,10,26,10];for(var N=0;N<8;N++)if(s[N]!=C[N])throw"The input is not a PNG file!";for(;d<s.length;){const R=v.readUint(s,d);d+=4;const D=v.readASCII(s,d,4);if(d+=4,D=="IHDR")f(s,d,g);else if(D=="iCCP"){for(var F=d;s[F]!=0;)F++;v.readASCII(s,d,F-d),s[F+1];const x=s.slice(F+2,d+R);let G=null;try{G=n(x)}catch{G=r(x)}g.tabs[D]=G}else if(D=="CgBI")g.tabs[D]=s.slice(d,d+4);else if(D=="IDAT"){for(N=0;N<R;N++)_[A+N]=s[d+N];A+=R}else if(D=="acTL")g.tabs[D]={num_frames:y(s,d),num_plays:y(s,d+4)},w=new Uint8Array(s.length);else if(D=="fcTL"){B!=0&&((p=g.frames[g.frames.length-1]).data=i(g,w.slice(0,B),p.rect.width,p.rect.height),B=0);const x={x:y(s,d+12),y:y(s,d+16),width:y(s,d+4),height:y(s,d+8)};let G=h(s,d+22);G=h(s,d+20)/(G==0?100:G);const L={rect:x,delay:Math.round(1e3*G),dispose:s[d+24],blend:s[d+25]};g.frames.push(L)}else if(D=="fdAT"){for(N=0;N<R-4;N++)w[B+N]=s[d+N+4];B+=R-4}else if(D=="pHYs")g.tabs[D]=[v.readUint(s,d),v.readUint(s,d+4),s[d+8]];else if(D=="cHRM")for(g.tabs[D]=[],N=0;N<8;N++)g.tabs[D].push(v.readUint(s,d+4*N));else if(D=="tEXt"||D=="zTXt"){g.tabs[D]==null&&(g.tabs[D]={});var E=v.nextZero(s,d),T=v.readASCII(s,d,E-d),M=d+R-E-1;if(D=="tEXt")k=v.readASCII(s,E+1,M);else{var S=n(s.slice(E+2,E+2+M));k=v.readUTF8(S,0,S.length)}g.tabs[D][T]=k}else if(D=="iTXt"){g.tabs[D]==null&&(g.tabs[D]={}),E=0,F=d,E=v.nextZero(s,F),T=v.readASCII(s,F,E-F);const x=s[F=E+1];var k;s[F+1],F+=2,E=v.nextZero(s,F),v.readASCII(s,F,E-F),F=E+1,E=v.nextZero(s,F),v.readUTF8(s,F,E-F),M=R-((F=E+1)-d),x==0?k=v.readUTF8(s,F,M):(S=n(s.slice(F,F+M)),k=v.readUTF8(S,0,S.length)),g.tabs[D][T]=k}else if(D=="PLTE")g.tabs[D]=v.readBytes(s,d,R);else if(D=="hIST"){const x=g.tabs.PLTE.length/3;for(g.tabs[D]=[],N=0;N<x;N++)g.tabs[D].push(h(s,d+2*N))}else if(D=="tRNS")g.ctype==3?g.tabs[D]=v.readBytes(s,d,R):g.ctype==0?g.tabs[D]=h(s,d):g.ctype==2&&(g.tabs[D]=[h(s,d),h(s,d+2),h(s,d+4)]);else if(D=="gAMA")g.tabs[D]=v.readUint(s,d)/1e5;else if(D=="sRGB")g.tabs[D]=s[d];else if(D=="bKGD")g.ctype==0||g.ctype==4?g.tabs[D]=[h(s,d)]:g.ctype==2||g.ctype==6?g.tabs[D]=[h(s,d),h(s,d+2),h(s,d+4)]:g.ctype==3&&(g.tabs[D]=s[d]);else if(D=="IEND")break;d+=R,v.readUint(s,d),d+=4}var p;return B!=0&&((p=g.frames[g.frames.length-1]).data=i(g,w.slice(0,B),p.rect.width,p.rect.height)),g.data=i(g,_,g.width,g.height),delete g.compress,delete g.interlace,delete g.filter,g},toRGBA8:function(c){const s=c.width,d=c.height;if(c.tabs.acTL==null)return[e(c.data,s,d,c).buffer];const v=[];c.frames[0].data==null&&(c.frames[0].data=c.data);const h=s*d*4,y=new Uint8Array(h),g=new Uint8Array(h),_=new Uint8Array(h);for(let A=0;A<c.frames.length;A++){const B=c.frames[A],C=B.rect.x,N=B.rect.y,F=B.rect.width,E=B.rect.height,T=e(B.data,F,E,c);if(A!=0)for(var w=0;w<h;w++)_[w]=y[w];if(B.blend==0?m(T,F,E,y,s,d,C,N,0):B.blend==1&&m(T,F,E,y,s,d,C,N,1),v.push(y.buffer.slice(0)),B.dispose!=0){if(B.dispose==1)m(g,F,E,y,s,d,C,N,0);else if(B.dispose==2)for(w=0;w<h;w++)y[w]=_[w]}}return v},_paeth:o,_copyTile:m,_bin:t}}();(function(){const{_copyTile:t}=it,{_bin:e}=it,i=it._paeth;var n={table:function(){const F=new Uint32Array(256);for(let E=0;E<256;E++){let T=E;for(let M=0;M<8;M++)1&T?T=3988292384^T>>>1:T>>>=1;F[E]=T}return F}(),update(F,E,T,M){for(let S=0;S<M;S++)F=n.table[255&(F^E[T+S])]^F>>>8;return F},crc:(F,E,T)=>4294967295^n.update(4294967295,F,E,T)};function r(F,E,T,M){E[T]+=F[0]*M>>4,E[T+1]+=F[1]*M>>4,E[T+2]+=F[2]*M>>4,E[T+3]+=F[3]*M>>4}function a(F){return Math.max(0,Math.min(255,F))}function u(F,E){const T=F[0]-E[0],M=F[1]-E[1],S=F[2]-E[2],k=F[3]-E[3];return T*T+M*M+S*S+k*k}function o(F,E,T,M,S,k,p){p==null&&(p=1);const R=M.length,D=[];for(var x=0;x<R;x++){const U=M[x];D.push([U>>>0&255,U>>>8&255,U>>>16&255,U>>>24&255])}for(x=0;x<R;x++){let U=4294967295;for(var G=0,L=0;L<R;L++){var K=u(D[x],D[L]);L!=x&&K<U&&(U=K,G=L)}}const z=new Uint32Array(S.buffer),$=new Int16Array(E*T*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(x=0;x<Y.length;x++)Y[x]=255*((Y[x]+.5)/16-.5);for(let U=0;U<T;U++)for(let ne=0;ne<E;ne++){var V;x=4*(U*E+ne),p!=2?V=[a(F[x]+$[x]),a(F[x+1]+$[x+1]),a(F[x+2]+$[x+2]),a(F[x+3]+$[x+3])]:(K=Y[4*(3&U)+(3&ne)],V=[a(F[x]+K),a(F[x+1]+K),a(F[x+2]+K),a(F[x+3]+K)]),G=0;let pe=16777215;for(L=0;L<R;L++){const he=u(V,D[L]);he<pe&&(pe=he,G=L)}const ae=D[G],oe=[V[0]-ae[0],V[1]-ae[1],V[2]-ae[2],V[3]-ae[3]];p==1&&(ne!=E-1&&r(oe,$,x+4,7),U!=T-1&&(ne!=0&&r(oe,$,x+4*E-4,3),r(oe,$,x+4*E,5),ne!=E-1&&r(oe,$,x+4*E+4,1))),k[x>>2]=G,z[x>>2]=M[G]}}function f(F,E,T,M,S){S==null&&(S={});const{crc:k}=n,p=e.writeUint,R=e.writeUshort,D=e.writeASCII;let x=8;const G=F.frames.length>1;let L,K=!1,z=33+(G?20:0);if(S.sRGB!=null&&(z+=13),S.pHYs!=null&&(z+=21),S.iCCP!=null&&(L=pako.deflate(S.iCCP),z+=21+L.length+4),F.ctype==3){for(var $=F.plte.length,Y=0;Y<$;Y++)F.plte[Y]>>>24!=255&&(K=!0);z+=8+3*$+4+(K?8+1*$+4:0)}for(var V=0;V<F.frames.length;V++)G&&(z+=38),z+=(ae=F.frames[V]).cimg.length+12,V!=0&&(z+=4);z+=12;const U=new Uint8Array(z),ne=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)U[Y]=ne[Y];if(p(U,x,13),x+=4,D(U,x,"IHDR"),x+=4,p(U,x,E),x+=4,p(U,x,T),x+=4,U[x]=F.depth,x++,U[x]=F.ctype,x++,U[x]=0,x++,U[x]=0,x++,U[x]=0,x++,p(U,x,k(U,x-17,17)),x+=4,S.sRGB!=null&&(p(U,x,1),x+=4,D(U,x,"sRGB"),x+=4,U[x]=S.sRGB,x++,p(U,x,k(U,x-5,5)),x+=4),S.iCCP!=null){const oe=13+L.length;p(U,x,oe),x+=4,D(U,x,"iCCP"),x+=4,D(U,x,"ICC profile"),x+=11,x+=2,U.set(L,x),x+=L.length,p(U,x,k(U,x-(oe+4),oe+4)),x+=4}if(S.pHYs!=null&&(p(U,x,9),x+=4,D(U,x,"pHYs"),x+=4,p(U,x,S.pHYs[0]),x+=4,p(U,x,S.pHYs[1]),x+=4,U[x]=S.pHYs[2],x++,p(U,x,k(U,x-13,13)),x+=4),G&&(p(U,x,8),x+=4,D(U,x,"acTL"),x+=4,p(U,x,F.frames.length),x+=4,p(U,x,S.loop!=null?S.loop:0),x+=4,p(U,x,k(U,x-12,12)),x+=4),F.ctype==3){for(p(U,x,3*($=F.plte.length)),x+=4,D(U,x,"PLTE"),x+=4,Y=0;Y<$;Y++){const oe=3*Y,he=F.plte[Y],le=255&he,ge=he>>>8&255,Se=he>>>16&255;U[x+oe+0]=le,U[x+oe+1]=ge,U[x+oe+2]=Se}if(x+=3*$,p(U,x,k(U,x-3*$-4,3*$+4)),x+=4,K){for(p(U,x,$),x+=4,D(U,x,"tRNS"),x+=4,Y=0;Y<$;Y++)U[x+Y]=F.plte[Y]>>>24&255;x+=$,p(U,x,k(U,x-$-4,$+4)),x+=4}}let pe=0;for(V=0;V<F.frames.length;V++){var ae=F.frames[V];G&&(p(U,x,26),x+=4,D(U,x,"fcTL"),x+=4,p(U,x,pe++),x+=4,p(U,x,ae.rect.width),x+=4,p(U,x,ae.rect.height),x+=4,p(U,x,ae.rect.x),x+=4,p(U,x,ae.rect.y),x+=4,R(U,x,M[V]),x+=2,R(U,x,1e3),x+=2,U[x]=ae.dispose,x++,U[x]=ae.blend,x++,p(U,x,k(U,x-30,30)),x+=4);const oe=ae.cimg;p(U,x,($=oe.length)+(V==0?0:4)),x+=4;const he=x;D(U,x,V==0?"IDAT":"fdAT"),x+=4,V!=0&&(p(U,x,pe++),x+=4),U.set(oe,x),x+=$,p(U,x,k(U,he,x-he)),x+=4}return p(U,x,0),x+=4,D(U,x,"IEND"),x+=4,p(U,x,k(U,x-4,4)),x+=4,U.buffer}function m(F,E,T){for(let M=0;M<F.frames.length;M++){const S=F.frames[M];S.rect.width;const k=S.rect.height,p=new Uint8Array(k*S.bpl+k);S.cimg=d(S.img,k,S.bpp,S.bpl,p,E,T)}}function l(F,E,T,M,S){const k=S[0],p=S[1],R=S[2],D=S[3],x=S[4],G=S[5];let L=6,K=8,z=255;for(var $=0;$<F.length;$++){const W=new Uint8Array(F[$]);for(var Y=W.length,V=0;V<Y;V+=4)z&=W[V+3]}const U=z!=255,ne=function(I,P,j,X,Q,H){const J=[];for(var te=0;te<I.length;te++){const ke=new Uint8Array(I[te]),Ae=new Uint32Array(ke.buffer);var ee;let Re=0,be=0,Ue=P,tt=j,Ke=X?1:0;if(te!=0){const ar=H||X||te==1||J[te-2].dispose!=0?1:2;let Ht=0,or=1e9;for(let vt=0;vt<ar;vt++){var ce=new Uint8Array(I[te-1-vt]);const ur=new Uint32Array(I[te-1-vt]);let je=P,qe=j,Bt=-1,Wt=-1;for(let yt=0;yt<j;yt++)for(let bt=0;bt<P;bt++)Ae[de=yt*P+bt]!=ur[de]&&(bt<je&&(je=bt),bt>Bt&&(Bt=bt),yt<qe&&(qe=yt),yt>Wt&&(Wt=yt));Bt==-1&&(je=qe=Bt=Wt=0),Q&&((1&je)==1&&je--,(1&qe)==1&&qe--);const Qn=(Bt-je+1)*(Wt-qe+1);Qn<or&&(or=Qn,Ht=vt,Re=je,be=qe,Ue=Bt-je+1,tt=Wt-qe+1)}ce=new Uint8Array(I[te-1-Ht]),Ht==1&&(J[te-1].dispose=2),ee=new Uint8Array(Ue*tt*4),t(ce,P,j,ee,Ue,tt,-Re,-be,0),Ke=t(ke,P,j,ee,Ue,tt,-Re,-be,3)?1:0,Ke==1?s(ke,P,j,ee,{x:Re,y:be,width:Ue,height:tt}):t(ke,P,j,ee,Ue,tt,-Re,-be,0)}else ee=ke.slice(0);J.push({rect:{x:Re,y:be,width:Ue,height:tt},img:ee,blend:Ke,dispose:0})}if(X)for(te=0;te<J.length;te++){if((Pe=J[te]).blend==1)continue;const ke=Pe.rect,Ae=J[te-1].rect,Re=Math.min(ke.x,Ae.x),be=Math.min(ke.y,Ae.y),Ue={x:Re,y:be,width:Math.max(ke.x+ke.width,Ae.x+Ae.width)-Re,height:Math.max(ke.y+ke.height,Ae.y+Ae.height)-be};J[te-1].dispose=1,te-1!=0&&c(I,P,j,J,te-1,Ue,Q),c(I,P,j,J,te,Ue,Q)}let ye=0;if(I.length!=1)for(var de=0;de<J.length;de++){var Pe;ye+=(Pe=J[de]).rect.width*Pe.rect.height}return J}(F,E,T,k,p,R),pe={},ae=[],oe=[];if(M!=0){const W=[];for(V=0;V<ne.length;V++)W.push(ne[V].img.buffer);const I=function(Q){let H=0;for(var J=0;J<Q.length;J++)H+=Q[J].byteLength;const te=new Uint8Array(H);let ee=0;for(J=0;J<Q.length;J++){const ce=new Uint8Array(Q[J]),ye=ce.length;for(let de=0;de<ye;de+=4){let Pe=ce[de],ke=ce[de+1],Ae=ce[de+2];const Re=ce[de+3];Re==0&&(Pe=ke=Ae=0),te[ee+de]=Pe,te[ee+de+1]=ke,te[ee+de+2]=Ae,te[ee+de+3]=Re}ee+=ye}return te.buffer}(W),P=h(I,M);for(V=0;V<P.plte.length;V++)ae.push(P.plte[V].est.rgba);let j=0;for(V=0;V<ne.length;V++){const X=(le=ne[V]).img.length;var he=new Uint8Array(P.inds.buffer,j>>2,X>>2);oe.push(he);const Q=new Uint8Array(P.abuf,j,X);G&&o(le.img,le.rect.width,le.rect.height,ae,Q,he),le.img.set(Q),j+=X}}else for($=0;$<ne.length;$++){var le=ne[$];const W=new Uint32Array(le.img.buffer);var ge=le.rect.width;for(Y=W.length,he=new Uint8Array(Y),oe.push(he),V=0;V<Y;V++){const I=W[V];if(V!=0&&I==W[V-1])he[V]=he[V-1];else if(V>ge&&I==W[V-ge])he[V]=he[V-ge];else{let P=pe[I];if(P==null&&(pe[I]=P=ae.length,ae.push(I),ae.length>=300))break;he[V]=P}}}const Se=ae.length;for(Se<=256&&x==0&&(K=Se<=2?1:Se<=4?2:Se<=16?4:8,K=Math.max(K,D)),$=0;$<ne.length;$++){(le=ne[$]).rect.x,le.rect.y,ge=le.rect.width;const W=le.rect.height;let I=le.img;new Uint32Array(I.buffer);let P=4*ge,j=4;if(Se<=256&&x==0){P=Math.ceil(K*ge/8);var b=new Uint8Array(P*W);const X=oe[$];for(let Q=0;Q<W;Q++){V=Q*P;const H=Q*ge;if(K==8)for(var Z=0;Z<ge;Z++)b[V+Z]=X[H+Z];else if(K==4)for(Z=0;Z<ge;Z++)b[V+(Z>>1)]|=X[H+Z]<<4-4*(1&Z);else if(K==2)for(Z=0;Z<ge;Z++)b[V+(Z>>2)]|=X[H+Z]<<6-2*(3&Z);else if(K==1)for(Z=0;Z<ge;Z++)b[V+(Z>>3)]|=X[H+Z]<<7-1*(7&Z)}I=b,L=3,j=1}else if(U==0&&ne.length==1){b=new Uint8Array(ge*W*3);const X=ge*W;for(V=0;V<X;V++){const Q=3*V,H=4*V;b[Q]=I[H],b[Q+1]=I[H+1],b[Q+2]=I[H+2]}I=b,L=2,j=3,P=3*ge}le.img=I,le.bpl=P,le.bpp=j}return{ctype:L,depth:K,plte:ae,frames:ne}}function c(F,E,T,M,S,k,p){const R=Uint8Array,D=Uint32Array,x=new R(F[S-1]),G=new D(F[S-1]),L=S+1<F.length?new R(F[S+1]):null,K=new R(F[S]),z=new D(K.buffer);let $=E,Y=T,V=-1,U=-1;for(let pe=0;pe<k.height;pe++)for(let ae=0;ae<k.width;ae++){const oe=k.x+ae,he=k.y+pe,le=he*E+oe,ge=z[le];ge==0||M[S-1].dispose==0&&G[le]==ge&&(L==null||L[4*le+3]!=0)||(oe<$&&($=oe),oe>V&&(V=oe),he<Y&&(Y=he),he>U&&(U=he))}V==-1&&($=Y=V=U=0),p&&((1&$)==1&&$--,(1&Y)==1&&Y--),k={x:$,y:Y,width:V-$+1,height:U-Y+1};const ne=M[S];ne.rect=k,ne.blend=1,ne.img=new Uint8Array(k.width*k.height*4),M[S-1].dispose==0?(t(x,E,T,ne.img,k.width,k.height,-k.x,-k.y,0),s(K,E,T,ne.img,k)):t(K,E,T,ne.img,k.width,k.height,-k.x,-k.y,0)}function s(F,E,T,M,S){t(F,E,T,M,S.width,S.height,-S.x,-S.y,2)}function d(F,E,T,M,S,k,p){const R=[];let D,x=[0,1,2,3,4];k!=-1?x=[k]:(E*M>5e5||T==1)&&(x=[0]),p&&(D={level:0});const G=xu;for(var L=0;L<x.length;L++){for(let $=0;$<E;$++)v(S,F,$,M,T,x[L]);R.push(G.deflate(S,D))}let K,z=1e9;for(L=0;L<R.length;L++)R[L].length<z&&(K=L,z=R[L].length);return R[K]}function v(F,E,T,M,S,k){const p=T*M;let R=p+T;if(F[R]=k,R++,k==0)if(M<500)for(var D=0;D<M;D++)F[R+D]=E[p+D];else F.set(new Uint8Array(E.buffer,p,M),R);else if(k==1){for(D=0;D<S;D++)F[R+D]=E[p+D];for(D=S;D<M;D++)F[R+D]=E[p+D]-E[p+D-S]+256&255}else if(T==0){for(D=0;D<S;D++)F[R+D]=E[p+D];if(k==2)for(D=S;D<M;D++)F[R+D]=E[p+D];if(k==3)for(D=S;D<M;D++)F[R+D]=E[p+D]-(E[p+D-S]>>1)+256&255;if(k==4)for(D=S;D<M;D++)F[R+D]=E[p+D]-i(E[p+D-S],0,0)+256&255}else{if(k==2)for(D=0;D<M;D++)F[R+D]=E[p+D]+256-E[p+D-M]&255;if(k==3){for(D=0;D<S;D++)F[R+D]=E[p+D]+256-(E[p+D-M]>>1)&255;for(D=S;D<M;D++)F[R+D]=E[p+D]+256-(E[p+D-M]+E[p+D-S]>>1)&255}if(k==4){for(D=0;D<S;D++)F[R+D]=E[p+D]+256-i(0,E[p+D-M],0)&255;for(D=S;D<M;D++)F[R+D]=E[p+D]+256-i(E[p+D-S],E[p+D-M],E[p+D-S-M])&255}}}function h(F,E){const T=new Uint8Array(F),M=T.slice(0),S=new Uint32Array(M.buffer),k=y(M,E),p=k[0],R=k[1],D=T.length,x=new Uint8Array(D>>2);let G;if(T.length<2e7)for(var L=0;L<D;L+=4)G=g(p,K=T[L]*(1/255),z=T[L+1]*(1/255),$=T[L+2]*(1/255),Y=T[L+3]*(1/255)),x[L>>2]=G.ind,S[L>>2]=G.est.rgba;else for(L=0;L<D;L+=4){var K=T[L]*(1/255),z=T[L+1]*(1/255),$=T[L+2]*(1/255),Y=T[L+3]*(1/255);for(G=p;G.left;)G=_(G.est,K,z,$,Y)<=0?G.left:G.right;x[L>>2]=G.ind,S[L>>2]=G.est.rgba}return{abuf:M.buffer,inds:x,plte:R}}function y(F,E,T){T==null&&(T=1e-4);const M=new Uint32Array(F.buffer),S={i0:0,i1:F.length,bst:null,est:null,tdst:0,left:null,right:null};S.bst=B(F,S.i0,S.i1),S.est=C(S.bst);const k=[S];for(;k.length<E;){let R=0,D=0;for(var p=0;p<k.length;p++)k[p].est.L>R&&(R=k[p].est.L,D=p);if(R<T)break;const x=k[D],G=w(F,M,x.i0,x.i1,x.est.e,x.est.eMq255);if(x.i0>=G||x.i1<=G){x.est.L=0;continue}const L={i0:x.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};L.bst=B(F,L.i0,L.i1),L.est=C(L.bst);const K={i0:G,i1:x.i1,bst:null,est:null,tdst:0,left:null,right:null};for(K.bst={R:[],m:[],N:x.bst.N-L.bst.N},p=0;p<16;p++)K.bst.R[p]=x.bst.R[p]-L.bst.R[p];for(p=0;p<4;p++)K.bst.m[p]=x.bst.m[p]-L.bst.m[p];K.est=C(K.bst),x.left=L,x.right=K,k[D]=L,k.push(K)}for(k.sort((R,D)=>D.bst.N-R.bst.N),p=0;p<k.length;p++)k[p].ind=p;return[S,k]}function g(F,E,T,M,S){if(F.left==null)return F.tdst=function(L,K,z,$,Y){const V=K-L[0],U=z-L[1],ne=$-L[2],pe=Y-L[3];return V*V+U*U+ne*ne+pe*pe}(F.est.q,E,T,M,S),F;const k=_(F.est,E,T,M,S);let p=F.left,R=F.right;k>0&&(p=F.right,R=F.left);const D=g(p,E,T,M,S);if(D.tdst<=k*k)return D;const x=g(R,E,T,M,S);return x.tdst<D.tdst?x:D}function _(F,E,T,M,S){const{e:k}=F;return k[0]*E+k[1]*T+k[2]*M+k[3]*S-F.eMq}function w(F,E,T,M,S,k){for(M-=4;T<M;){for(;A(F,T,S)<=k;)T+=4;for(;A(F,M,S)>k;)M-=4;if(T>=M)break;const p=E[T>>2];E[T>>2]=E[M>>2],E[M>>2]=p,T+=4,M-=4}for(;A(F,T,S)>k;)T-=4;return T+4}function A(F,E,T){return F[E]*T[0]+F[E+1]*T[1]+F[E+2]*T[2]+F[E+3]*T[3]}function B(F,E,T){const M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=[0,0,0,0],k=T-E>>2;for(let p=E;p<T;p+=4){const R=F[p]*(1/255),D=F[p+1]*(1/255),x=F[p+2]*(1/255),G=F[p+3]*(1/255);S[0]+=R,S[1]+=D,S[2]+=x,S[3]+=G,M[0]+=R*R,M[1]+=R*D,M[2]+=R*x,M[3]+=R*G,M[5]+=D*D,M[6]+=D*x,M[7]+=D*G,M[10]+=x*x,M[11]+=x*G,M[15]+=G*G}return M[4]=M[1],M[8]=M[2],M[9]=M[6],M[12]=M[3],M[13]=M[7],M[14]=M[11],{R:M,m:S,N:k}}function C(F){const{R:E}=F,{m:T}=F,{N:M}=F,S=T[0],k=T[1],p=T[2],R=T[3],D=M==0?0:1/M,x=[E[0]-S*S*D,E[1]-S*k*D,E[2]-S*p*D,E[3]-S*R*D,E[4]-k*S*D,E[5]-k*k*D,E[6]-k*p*D,E[7]-k*R*D,E[8]-p*S*D,E[9]-p*k*D,E[10]-p*p*D,E[11]-p*R*D,E[12]-R*S*D,E[13]-R*k*D,E[14]-R*p*D,E[15]-R*R*D],G=x,L=N;let K=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,$=0;if(M!=0)for(let V=0;V<16&&(K=L.multVec(G,K),$=Math.sqrt(L.dot(K,K)),K=L.sml(1/$,K),!(V!=0&&Math.abs($-z)<1e-9));V++)z=$;const Y=[S*D,k*D,p*D,R*D];return{Cov:x,q:Y,e:K,L:z,eMq255:L.dot(L.sml(255,Y),K),eMq:L.dot(K,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var N={multVec:(F,E)=>[F[0]*E[0]+F[1]*E[1]+F[2]*E[2]+F[3]*E[3],F[4]*E[0]+F[5]*E[1]+F[6]*E[2]+F[7]*E[3],F[8]*E[0]+F[9]*E[1]+F[10]*E[2]+F[11]*E[3],F[12]*E[0]+F[13]*E[1]+F[14]*E[2]+F[15]*E[3]],dot:(F,E)=>F[0]*E[0]+F[1]*E[1]+F[2]*E[2]+F[3]*E[3],sml:(F,E)=>[F*E[0],F*E[1],F*E[2],F*E[3]]};it.encode=function(E,T,M,S,k,p,R){S==null&&(S=0),R==null&&(R=!1);const D=l(E,T,M,S,[!1,!1,!1,0,R,!1]);return m(D,-1),f(D,T,M,k,p)},it.encodeLL=function(E,T,M,S,k,p,R,D){const x={ctype:0+(S==1?0:2)+(k==0?0:4),depth:p,frames:[]},G=(S+k)*p,L=G*T;for(let K=0;K<E.length;K++)x.frames.push({rect:{x:0,y:0,width:T,height:M},img:new Uint8Array(E[K]),blend:0,dispose:1,bpp:Math.ceil(G/8),bpl:Math.ceil(L/8)});return m(x,0,!0),f(x,T,M,R,D)},it.encode.compress=l,it.encode.dither=o,it.quantize=h,it.quantize.getKDtree=y,it.quantize.getNearest=g})();const Mi={toArrayBuffer(t,e){const i=t.width,n=t.height,r=i<<2,a=t.getContext("2d").getImageData(0,0,i,n),u=new Uint32Array(a.data.buffer),o=(32*i+31)/32<<2,f=o*n,m=122+f,l=new ArrayBuffer(m),c=new DataView(l),s=1<<20;let d,v,h,y,g=s,_=0,w=0,A=0;function B(F){c.setUint16(w,F,!0),w+=2}function C(F){c.setUint32(w,F,!0),w+=4}function N(F){w+=F}B(19778),C(m),N(4),C(122),C(108),C(i),C(-n>>>0),B(1),B(32),C(3),C(f),C(2835),C(2835),N(8),C(16711680),C(65280),C(255),C(4278190080),C(1466527264),function F(){for(;_<n&&g>0;){for(y=122+_*o,d=0;d<r;)g--,v=u[A++],h=v>>>24,c.setUint32(y+d,v<<8|h),d+=4;_++}A<u.length?(g=s,setTimeout(F,Mi._dly)):e(l)}()},toBlob(t,e){this.toArrayBuffer(t,i=>{e(new Blob([i],{type:"image/bmp"}))})},_dly:9};var He={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Su={[He.CHROME]:16384,[He.FIREFOX]:11180,[He.DESKTOP_SAFARI]:16384,[He.IE]:8192,[He.IOS]:4096,[He.ETC]:8192};const nn=typeof window!="undefined",$i=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,gr=nn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Fu=(nn||$i)&&(gr&&gr.getOriginalSymbol(window,"File")||typeof File!="undefined"&&File),Ui=(nn||$i)&&(gr&&gr.getOriginalSymbol(window,"FileReader")||typeof FileReader!="undefined"&&FileReader);function an(t,e,i=Date.now()){return new Promise(n=>{const r=t.split(","),a=r[0].match(/:(.*?);/)[1],u=globalThis.atob(r[1]);let o=u.length;const f=new Uint8Array(o);for(;o--;)f[o]=u.charCodeAt(o);const m=new Blob([f],{type:a});m.name=e,m.lastModified=i,n(m)})}function zi(t){return new Promise((e,i)=>{const n=new Ui;n.onload=()=>e(n.result),n.onerror=r=>i(r),n.readAsDataURL(t)})}function ji(t){return new Promise((e,i)=>{const n=new Image;n.onload=()=>e(n),n.onerror=r=>i(r),n.src=t})}function Ot(){if(Ot.cachedResult!==void 0)return Ot.cachedResult;let t=He.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=He.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=He.IOS:/Safari/i.test(e)?t=He.DESKTOP_SAFARI:/Firefox/i.test(e)?t=He.FIREFOX:(/MSIE/i.test(e)||!!document.documentMode)&&(t=He.IE),Ot.cachedResult=t,Ot.cachedResult}function Hi(t,e){const i=Ot(),n=Su[i];let r=t,a=e,u=r*a;const o=r>a?a/r:r/a;for(;u>n*n;){const f=(n+r)/2,m=(n+a)/2;f<m?(a=m,r=m*o):(a=f*o,r=f),u=r*a}return{width:r,height:a}}function vr(t,e){let i,n;try{if(i=new OffscreenCanvas(t,e),n=i.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),n=i.getContext("2d")}return i.width=t,i.height=e,[i,n]}function Wi(t,e){const{width:i,height:n}=Hi(t.width,t.height),[r,a]=vr(i,n);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,r.width,r.height)),a.drawImage(t,0,0,r.width,r.height),r}function yr(){return yr.cachedResult!==void 0||(yr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document!="undefined"&&"ontouchend"in document),yr.cachedResult}function br(t,e={}){return new Promise(function(i,n){let r,a;var u=function(){try{return a=Wi(r,e.fileType||t.type),i([r,a])}catch(f){return n(f)}},o=function(f){try{var m=function(l){try{throw l}catch(c){return n(c)}};try{let l;return zi(t).then(function(c){try{return l=c,ji(l).then(function(s){try{return r=s,function(){try{return u()}catch(d){return n(d)}}()}catch(d){return m(d)}},m)}catch(s){return m(s)}},m)}catch(l){m(l)}}catch(l){return n(l)}};try{if(yr()||[He.DESKTOP_SAFARI,He.MOBILE_SAFARI].includes(Ot()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(f){try{return r=f,u()}catch{return o()}},o)}catch{o()}})}function _r(t,e,i,n,r=1){return new Promise(function(a,u){let o;if(e==="image/png"){let m,l,c;return m=t.getContext("2d"),{data:l}=m.getImageData(0,0,t.width,t.height),c=it.encode([l.buffer],t.width,t.height,4096*r),o=new Blob([c],{type:e}),o.name=i,o.lastModified=n,f.call(this)}{let m=function(){return f.call(this)};if(e==="image/bmp")return new Promise(l=>Mi.toBlob(t,l)).then(function(l){try{return o=l,o.name=i,o.lastModified=n,m.call(this)}catch(c){return u(c)}}.bind(this),u);{let l=function(){return m.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then(function(c){try{return o=c,o.name=i,o.lastModified=n,l.call(this)}catch(s){return u(s)}}.bind(this),u);{let c;return c=t.toDataURL(e,r),an(c,i,n).then(function(s){try{return o=s,l.call(this)}catch(d){return u(d)}}.bind(this),u)}}}function f(){return a(o)}})}function ot(t){t.width=0,t.height=0}function Tt(){return new Promise(function(t,e){let i,n,r,a;return Tt.cachedResult!==void 0?t(Tt.cachedResult):an("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return i=u,br(i).then(function(o){try{return n=o[1],_r(n,i.type,i.name,i.lastModified).then(function(f){try{return r=f,ot(n),br(r).then(function(m){try{return a=m[0],Tt.cachedResult=a.width===1&&a.height===2,t(Tt.cachedResult)}catch(l){return e(l)}},e)}catch(m){return e(m)}},e)}catch(f){return e(f)}},e)}catch(o){return e(o)}},e)})}function Vi(t){return new Promise((e,i)=>{const n=new Ui;n.onload=r=>{const a=new DataView(r.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const u=a.byteLength;let o=2;for(;o<u;){if(a.getUint16(o+2,!1)<=8)return e(-1);const f=a.getUint16(o,!1);if(o+=2,f==65505){if(a.getUint32(o+=2,!1)!=1165519206)return e(-1);const m=a.getUint16(o+=6,!1)==18761;o+=a.getUint32(o+4,m);const l=a.getUint16(o,m);o+=2;for(let c=0;c<l;c++)if(a.getUint16(o+12*c,m)==274)return e(a.getUint16(o+12*c+8,m))}else{if((65280&f)!=65280)break;o+=a.getUint16(o,!1)}}return e(-1)},n.onerror=r=>i(r),n.readAsArrayBuffer(t)})}function Gi(t,e){const{width:i}=t,{height:n}=t,{maxWidthOrHeight:r}=e;let a,u=t;return isFinite(r)&&(i>r||n>r)&&([u,a]=vr(i,n),i>n?(u.width=r,u.height=n/i*r):(u.width=i/n*r,u.height=r),a.drawImage(t,0,0,u.width,u.height),ot(t)),u}function Ki(t,e){const{width:i}=t,{height:n}=t,[r,a]=vr(i,n);switch(e>4&&e<9?(r.width=n,r.height=i):(r.width=i,r.height=n),e){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,n);break;case 4:a.transform(1,0,0,-1,0,n);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,n,0);break;case 7:a.transform(0,-1,-1,0,n,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(t,0,0,i,n),ot(t),r}function qi(t,e,i=0){return new Promise(function(n,r){let a,u,o,f,m,l,c,s,d,v,h,y,g,_,w,A,B,C,N,F;function E(M=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=M,e.onProgress(Math.min(a,100))}function T(M){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(M,a),100),e.onProgress(a)}return a=i,u=e.maxIteration||10,o=1024*e.maxSizeMB*1024,E(),br(t,e).then(function(M){try{return[,f]=M,E(),m=Gi(f,e),E(),new Promise(function(S,k){var p;if(!(p=e.exifOrientation))return Vi(t).then(function(D){try{return p=D,R.call(this)}catch(x){return k(x)}}.bind(this),k);function R(){return S(p)}return R.call(this)}).then(function(S){try{return l=S,E(),Tt().then(function(k){try{return c=k?m:Ki(m,l),E(),s=e.initialQuality||1,d=e.fileType||t.type,_r(c,d,t.name,t.lastModified,s).then(function(p){try{{let D=function(){if(u--&&(w>o||w>g)){let G,L;return G=F?.95*N.width:N.width,L=F?.95*N.height:N.height,[B,C]=vr(G,L),C.drawImage(N,0,0,G,L),s*=d==="image/png"?.85:.95,_r(B,d,t.name,t.lastModified,s).then(function(K){try{return A=K,ot(N),N=B,w=A.size,T(Math.min(99,Math.floor((_-w)/(_-o)*100))),D}catch(z){return r(z)}},r)}return[1]},x=function(){return ot(N),ot(B),ot(m),ot(c),ot(f),T(100),n(A)};if(v=p,E(),h=v.size>o,y=v.size>t.size,!h&&!y)return T(100),n(v);var R;return g=t.size,_=v.size,w=_,N=c,F=!e.alwaysKeepResolution&&h,(R=function(G){for(;G;){if(G.then)return void G.then(R,r);try{if(G.pop){if(G.length)return G.pop()?x.call(this):G;G=D}else G=G.call(this)}catch(L){return r(L)}}}.bind(this))(D)}}catch(D){return r(D)}}.bind(this),r)}catch(p){return r(p)}}.bind(this),r)}catch(k){return r(k)}}.bind(this),r)}catch(S){return r(S)}}.bind(this),r)})}const Au=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let on;function Cu(t,e){return new Promise((i,n)=>{on||(on=function(u){const o=[];return typeof u=="function"?o.push(`(${u})()`):o.push(u),URL.createObjectURL(new Blob(o))}(Au));const r=new Worker(on);r.addEventListener("message",function(u){if(e.signal&&e.signal.aborted)r.terminate();else if(u.data.progress===void 0){if(u.data.error)return n(new Error(u.data.error)),void r.terminate();i(u.data.file),r.terminate()}else e.onProgress(u.data.progress)}),r.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),r.terminate()}),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:ue(q({},e),{onProgress:void 0,signal:void 0})})})}function $e(t,e){return new Promise(function(i,n){let r,a,u,o,f,m;if(r=q({},e),u=0,{onProgress:o}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,f=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=d=>{u=d,typeof o=="function"&&o(u)},!(t instanceof Blob||t instanceof Fu))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return n(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,!f||typeof Worker!="function"||m)return qi(t,r).then(function(d){try{return a=d,s.call(this)}catch(v){return n(v)}}.bind(this),n);var l=function(){try{return s.call(this)}catch(d){return n(d)}}.bind(this),c=function(d){try{return qi(t,r).then(function(v){try{return a=v,l()}catch(h){return n(h)}},n)}catch(v){return n(v)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Cu(t,r).then(function(d){try{return a=d,l()}catch{return c()}},c)}catch{c()}function s(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(a=Li(t,a))}catch{}return i(a)}})}$e.getDataUrlFromFile=zi,$e.getFilefromDataUrl=an,$e.loadImage=ji,$e.drawImageInCanvas=Wi,$e.drawFileInCanvas=br,$e.canvasToFile=_r,$e.getExifOrientation=Vi,$e.handleMaxWidthOrHeight=Gi,$e.followExifOrientation=Ki,$e.cleanupCanvasMemory=ot,$e.isAutoOrientationInBrowser=Tt,$e.approximateBelowMaximumCanvasSizeOfBrowser=Hi,$e.copyExifWithoutOrientation=Li,$e.getBrowserName=Ot,$e.version="2.0.2";var ku=t=>{const l=t,{value:e,onChange:i,autoCard:n=!1,fileSize:r=2}=l,a=ft(l,["value","onChange","autoCard","fileSize"]),u=xo(e).filter(Boolean),[o,f]=se.exports.useState(u.map(c=>({uid:c.split("/").pop(),url:c}))),m=`${mi.baseUrl}/api/file/upload`;return O(to,q({multiple:!1,action:m,fileList:o,imagePreview:!0,accept:"image/*",beforeUpload:async c=>{if(c.size>r*1024*1024){const d=`\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${r}M`;return we.error(d),Promise.reject(new Error(d))}const s={maxSizeMB:1,useWebWorker:!0};try{const d=await $e(c,s);return new File([d],c.name,{type:d.type})}catch(d){return console.error("\u538B\u7F29\u5931\u8D25",d),!1}},onRemove:c=>{f(o.filter(s=>s.url!==c.url))},listType:n?o.length?"picture-card":"text":"picture-card",onChange:c=>{const s=c.map(v=>{var h;return ue(q({},v),{url:v.url||((h=v.response)==null?void 0:h.data)})});f(s);const d=s.map(v=>v.url).filter(Boolean);if(a.limit===1){const v=d[0];i(v)}else i(d)},tip:`\u4EC5\u652F\u6301${r}M\u4EE5\u4E0B`,onProgress:c=>{f(s=>s.map(d=>d.uid===c.uid?c:d))}},a))},Er;(function(t){t.default="default",t.preview="preview"})(Er||(Er={}));const Du={flex:1};function Bu(t){var c,s;const l=Ce.exports.omit(t,["formItemProps","hideTable"]),{schema:e,control:i,controlProps:n,formType:r}=l,a=ft(l,["schema","control","controlProps","formType"]),{label:u=""}=e,{value:o,checked:f}=a,m=r===Er.preview;if(typeof i=="function")return i(q(q({},e),a));if(typeof i=="object")return i;switch(i){case void 0:case"input":return m?O("span",{children:o||"-"}):O(_t,q(q({placeholder:`\u8BF7\u8F93\u5165${u}`,allowClear:!0},n),a));case"radio":return m?O("span",{children:((s=(c=n==null?void 0:n.options)==null?void 0:c.find(d=>d.value===o))==null?void 0:s.label)||"-"}):O(Pt.Group,q(q({type:"button"},n),a));case"textarea":return m?O("span",{children:o}):O(_t.TextArea,q(q({placeholder:"\u8BF7\u8F93\u5165",rows:3},n),a));case"switch":return m?O("span",{children:f?(n==null?void 0:n.checkedText)||"\u662F":(n==null?void 0:n.unCheckedText)||"\u5426"}):O(li,q(q({checkedText:"\u662F",uncheckedText:"\u5426"},n),a));case"select":return O(zr,q(q({allowClear:!0,placeholder:`\u8BF7\u9009\u62E9${u}`},n),a));case"upload":return O(ku,q(q({},n),a));case"number":return m?O("span",{children:o}):O(Vr,q(q({placeholder:`\u8BF7\u8F93\u5165${u}`},n),a));case"datePicker":return m?O("span",{children:o}):O(si,q(q(q({},Do),n),a));case"datePickerRange":return m?O("span",{children:o}):O(si.RangePicker,q(q(q({className:"w-full"},ko),n),a));case"entrepotRadio":return O(uu,q(q({},n),a));case"entrepotSelector":return O(Io,q(q({},n),a));case"role":return O(_u,q(q({},n),a));case"dictSelector":return O(bi,q(q({},n),a));case"regionSelector":return O(Uo,q(q({},n),a));case"shopRadio":return O(Qo,q(q({},n),a));case"shopSelector":return O(Yo,q(q({},n),a));case"productSelector":return O(mu,q(q({},n),a));default:return O("span",{children:i})}}const Pu=t=>{const h=t,{schema:e,control:i,formItemProps:n,controlProps:r,formType:a}=h,u=ft(h,["schema","control","formItemProps","controlProps","formType"]),{field:o,label:f="",tips:m,position:l,rules:c,defaultValue:s,required:d}=e;Er.preview;const v=s!==void 0?{initialValue:s}:{};return O(De.Item,ue(q(q(q({colon:f?":":"",label:O(ou,{label:f,tips:m,position:l}),field:o,rules:(c==null?void 0:c.length)||d?[{required:!0,message:["input","number"].includes(i)?`\u8BF7\u8F93\u5165${f}`:`\u8BF7\u5B8C\u5584${f}`}]:[],labelCol:{style:q({},f?{}:{display:"none"})},wrapperCol:Du},v),n),Ce.exports.omit(u,["render","showItemHandle","hideTable"])),{children:O(Bu,q({},t))}),o)};function Tu(t){return t.reduce((e,i)=>(i.schema.defaultValue!==void 0&&(e[i.schema.field]=i.schema.defaultValue),e),{})}const Iu=ii.forwardRef((c,l)=>{var s=c,{formItemConfigList:t,className:e="",labelCol:i,onValuesChange:n,gutter:r=[0,10],span:a=8,labelLength:u,initialValues:o,formType:f}=s,m=ft(s,["formItemConfigList","className","labelCol","onValuesChange","gutter","span","labelLength","initialValues","formType"]);const d=se.exports.useRef(),[v,h]=se.exports.useState();se.exports.useImperativeHandle(l,()=>d.current),se.exports.useEffect(()=>{const _=q(q(q({},o),d.current.getFieldsValue()),Tu(t));setTimeout(()=>{var w;(w=d.current)==null||w.setFieldsValue(_),h(_)})},[t.map(_=>_.schema.field).toString()]);const y=t.some(_=>{var w,A,B;return _.schema.required||((w=_.formItemProps)==null?void 0:w.required)||((B=(A=_.formItemProps)==null?void 0:A.rules)==null?void 0:B.some(C=>C.required))})?.6:0,g=u||Ce.exports.max(t.map(_=>Ce.exports.isString(_.schema.label)?_.schema.label.length:0))+2+y;return O(De,ue(q({ref:d,layout:"inline",labelCol:ue(q({},i),{style:q({flex:`0 0 ${g}em`},i==null?void 0:i.style)}),onSubmit:_=>{console.log(_)},wrapperCol:q({className:"w-0 flex-1"},m.wrapperCol||{}),onValuesChange:_=>{var A;const w=(A=d.current)==null?void 0:A.getFieldsValue();w&&(n==null||n(_,w),h(w))},initialValues:o},m),{className:`${e} bg-white`,children:O(Et.Row,{gutter:r,className:"w-full",children:[...t].filter(_=>_.schema.field||_.schema.key).map(_=>{var w,A,B,C,N,F,E;return(_.showItemHandle?_.showItemHandle(v):!0)?O(Et.Col,{className:Me(((w=_.formItemProps)==null?void 0:w.hidden)?zo:""),span:_.schema.span||a,children:Pu(ue(q({},_),{formItemProps:ue(q({},_.formItemProps),{labelCol:ue(q(q({},i),(A=_.formItemProps)==null?void 0:A.labelCol),{style:_.schema.label?q(q({flex:`0 0 ${g}em`},i==null?void 0:i.style),(C=(B=_.formItemProps)==null?void 0:B.labelCol)==null?void 0:C.style):{display:"none"}}),rules:((N=_.formItemProps)==null?void 0:N.rules)||((F=_.schema)==null?void 0:F.rules)||[]}),schema:ue(q({},_.schema),{defaultValue:(E=o==null?void 0:o[_.schema.field])!=null?E:_.schema.defaultValue}),formType:f}))},_.schema.field||_.schema.key):null})})}))});var ut=Iu;const Ru=t=>{const{visible:e,sendWarehouse:i,trackingNo:n,setVisible:r,onSuccess:a}=t,[u]=De.useForm(),o=_e(async()=>{const f=await u.validate();await Ee(()=>qt.returnOperation(f)),a==null||a(),r(!1)},{manual:!0});return O(Te,{title:"\u65B0\u589E\u9000\u4EF6\u5FEB\u9012",visible:e,confirmLoading:o.loading,onCancel:()=>{r(!1)},onOk:()=>{o.run()},children:O(ut,{initialValues:{sendWarehouse:i,trackingNo:n},span:24,form:u,formItemConfigList:[{schema:{field:"sendWarehouse",label:"\u6253\u5305\u4ED3\u5E93"},control:"entrepotSelector"},{schema:{field:"trackingNo",label:"\u7269\u6D41\u5355\u53F7",required:!0}},{schema:{field:"recipientsInfo",label:"\u6536\u4EF6\u4FE1\u606F",required:!0},formItemProps:{extra:"\u4F8B\uFF1A\u5F20\u4E09\uFF0C15270848182\uFF0C\u4E1C\u839E\u5E02xx\u9547\u5357\u57CE\u8857\u9053A\u533A3\u680Bxx\u53F7"},control:"textarea"},{schema:{field:"storeRemark",label:"\u5907\u6CE8"},formItemProps:{extra:O("span",{className:"text-red-600",children:"\u5982\u662F\u4E0A\u95E8\u53D6\u4EF6\uFF0C\u8BF7\u52A1\u5FC5\u586B\u5199\u53D6\u4EF6\u7801\uFF01"})},control:"textarea"}]})})};var Nu=Ru,Lu=({value:t})=>O(dr,{className:"!px-0",href:`https://www.baidu.com/s?wd=${t}`,target:"_blank",children:t}),st;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.PICKED=1]="PICKED",t[t.UNPICKED=2]="UNPICKED"})(st||(st={}));const Mu=({item:t})=>{var e,i;return re("div",{className:"h-full p-2",children:[O(fe,{label:"\u5FEB\u9012",value:re(Le,{color:"magenta",children:["\u5E93\u5B58\u53D1\u8D27 x",t.stockUse]})}),O(fe,{label:"\u5E93\u5B58SKU",value:O(wt.Text,{copyable:{text:(e=t.logisticsProduct)==null?void 0:e.sku},children:O(Le,{color:"blue",children:(i=t.logisticsProduct)==null?void 0:i.sku})})})]})},$u=["","green","orangered","gold","red","blue","arcoblue","purple","pinkpurple","magenta","gray","lime","orange"];function Uu(t){var r;const{data:e}=Kr({dictCode:"tracking_status"}),i=(r=e==null?void 0:e.find(a=>a.value===t.trackingStatus))==null?void 0:r.label,n=$u[Number(t.trackingStatus)];return O(ve,{children:O(Lo,{status:"default",style:{transform:" translateY(-2px)"},color:n,text:i})})}function zu(t){const{item:e,sendWarehouse:i,orderId:n}=t,[r,a]=se.exports.useState(!1),u=_e(async()=>{await Ee(()=>qt.addReject({orderId:n,trackingNo:e.trackingNo}),"\u5FEB\u9012\u62D2\u6536\u7533\u8BF7"),Fe.emit(Oe.refreshOrderPage)},{manual:!0}),o=_e(async()=>{await Ee(()=>qt.orderCancelReject({orderId:n,trackingNo:e.trackingNo}),"\u53D6\u6D88\u62D2\u6536"),Fe.emit(Oe.refreshOrderPage)},{manual:!0});if(e.trackingNo)switch(e.trackingStatus){case"0":return O("div",{children:O(Le,{className:"cursor-pointer",bordered:!0,size:"small",color:"orange",checked:!0,onClick:async()=>{await nt({confirmLoading:u.loading,content:`\u6240\u6709\u8DDF\u5FEB\u9012\u5355\u53F7"${e.trackingNo}"\u6709\u5173\u8054\u7684\u8BA2\u5355\u90FD\u4F1A\u62D2\u6536\uFF0C\u786E\u5B9A\u8981\u7EE7\u7EED\u5417\uFF1F`}),u.run()},children:"\u62D2\u6536"})});case"1":return re("div",{children:[O(Le,{className:"cursor-pointer",bordered:!0,size:"small",color:"orange",checked:!0,onClick:async()=>{a(!0)},children:"\u9000\u4EF6"}),O(Nu,{visible:r,setVisible:a,sendWarehouse:i,trackingNo:e.trackingNo,onSuccess:()=>{Fe.emit(Oe.refreshOrderPage)}})]});case"2":return O("div",{children:O(Yr,{title:"\u786E\u5B9A\u53D6\u6D88\u62D2\u6536\u5417\uFF1F",onOk:async()=>{o.run()},children:O(Le,{className:"cursor-pointer",bordered:!0,size:"small",color:"orange",checked:!0,children:"\u53D6\u6D88\u62D2\u6536"})})});case"4":return O("div",{children:O(Yr,{title:"\u786E\u5B9A\u53D6\u6D88\u9000\u4EF6\u5417\uFF1F",onOk:async()=>{await Ee(()=>qt.orderCancelReturn({orderId:n,trackingNo:e.trackingNo}),"\u9000\u4EF6\u53D6\u6D88"),Fe.emit(Oe.refreshOrderPage)},children:O(Le,{className:"cursor-pointer",bordered:!0,size:"small",color:"orange",checked:!0,children:"\u53D6\u6D88\u9000\u4EF6"})})})}return O("div",{children:"-"})}const ju=({item:t,orderStatus:e,sendWarehouse:i,orderId:n})=>{let r=null;const a=_e(async o=>Ee(()=>Be.updatePickingStatus(o)).then(()=>{Fe.emit(Oe.refreshOrderPage)}),{manual:!0});t.stockOutStatus?r=O(Le,{color:"orangered",icon:O(oo,{}),children:"\u7F3A\u8D27\u6253\u5305"}):t.trackingNo?r=O(wt.Text,{copyable:{text:t.trackingNo},children:O(Lu,{value:t.trackingNo})}):r=O(Le,{children:"\u672A\u586B"});const u={fontSize:22,cursor:"pointer",color:"#86909c"};return re("div",{className:"h-full p-2 flex justify-between",children:[re("div",{children:[O(fe,{label:"\u5FEB\u9012",value:r}),t.trackingNo?re(ve,{children:[O(fe,{label:"\u72B6\u6001",value:O(Uu,q({},t))}),["0","1","2"].includes(e)&&pt()?O(fe,{valueClassName:"inline-flex",label:"\u64CD\u4F5C",value:O(zu,{orderId:n,item:t,sendWarehouse:i})}):null]}):null,t.freightSpaceName?O(fe,{label:"\u4ED3\u4F4D",value:t.freightSpaceName}):null]}),re("div",{className:"flex flex-col pr-10",children:[O("div",{className:"mb-1",onClick:()=>{a.run({productId:t.id,pickingStatus:t.pickingStatus===st.PICKED?st.DEFAULT:st.PICKED})},children:t.pickingStatus===st.PICKED?O(ro,{style:ue(q({},u),{color:"green"})}):O(no,{style:u})}),O("div",{onClick:()=>{a.run({productId:t.id,pickingStatus:t.pickingStatus===st.UNPICKED?st.DEFAULT:st.UNPICKED})},children:t.pickingStatus===st.UNPICKED?O(io,{style:ue(q({},u),{color:"red"})}):O(ao,{style:u})})]})]})},Zi=t=>{const{item:e,orderStatus:i,sendWarehouse:n,orderId:r}=t;return e.deliveryMethod==="1"?O(Mu,{item:e,orderStatus:i,sendWarehouse:n,orderId:r}):O(ju,{item:e,orderStatus:i,sendWarehouse:n,orderId:r})},Hu=t=>{var i;const{data:e}=t;return O("div",{className:Me(nu["goods-info"],"pr-2 h-full"),children:(i=e.orderProductVOList)==null?void 0:i.map((n,r)=>O("div",{className:Me("h-[105px] border-r",r>0?"border-t":""),children:O(Zi,{item:n,orderStatus:e.orderStatus,sendWarehouse:e.sendWarehouse,orderId:e.id})},n.id))})};var Wu={"goods-info":"_goods-info_7um5o_1"},Vu=t=>{const{value:e,className:i,onChange:n,stockNum:r,disabled:a}=t,[u,o]=se.exports.useState(!1),[f,m]=se.exports.useState([...e||[]]),[l,c]=se.exports.useState(),s=se.exports.useRef();return re("div",{className:i,children:[(e==null?void 0:e.length)?O("div",{children:e.map(d=>re("div",{className:"flex items-center relative",children:[O(en,{className:"!px-2",data:d.logisticsProduct}),O(Vr,{disabled:a||!d.useAbleQuantity,value:d.useAbleQuantityChange,className:"w-24",placeholder:"\u6570\u91CF",min:1,max:d.useAbleQuantity||1,onChange:v=>{d.useAbleQuantityChange=v;const h=f.map(y=>y.id===d.id?ue(q({},y),{useAbleQuantityChange:v}):y);m(h),n(h)}}),O(me,{className:"absolute -right-3 -top-3",status:"danger",icon:O(uo,{}),shape:"circle",onClick:()=>{const v=f.filter(h=>h.id!==d.id);n(v),m(v)}})]},d.id))}):O(me,{className:"mx-auto w-1/2",disabled:a,type:"primary",icon:O(Hr,{}),long:!0,onClick:()=>{o(!0)},children:"\u9009\u62E9\u5E93\u5B58"}),O(Te,{style:{width:"850px"},visible:u,title:"\u5E93\u5B58\u9009\u62E9",onConfirm:()=>{n(f.map(d=>ue(q({},d),{useAbleQuantityChange:r>=d.useAbleQuantity?d.useAbleQuantity:r}))),s.current.searchFormRef.resetFields(),o(!1)},onCancel:()=>{s.current.searchFormRef.resetFields(),o(!1)},children:O(Jr,{getListRequest:(...d)=>lu.getList(...d).then(v=>(c(v.data.data.list),m([]),v)),name:"\u5546\u54C1\u9009\u62E9",ref:s,showActions:!1,tableProps:{rowKey:"id",rowSelection:{type:"radio",selectedRowKeys:f.map(d=>d.id),onChange:(d,v)=>{console.log(v,d),m(v.map(h=>q({},h)))},onSelectAll:d=>{m(d?l.map(v=>ue(q({},v),{num:20})):[])},checkboxProps:d=>({disabled:!d.useAbleQuantity})}},formItemConfigList:[{schema:{label:"\u5546\u54C1\u540D\u79F0",field:"productName"},render:(d,v)=>O(en,{data:v.logisticsProduct}),width:340,isSearch:!0},{schema:{label:"\u76F8\u5173\u4FE1\u606F",field:"lastCheckInTime"},render:(d,v)=>re("div",{children:[O(fe,{label:"\u53EF\u7528\u5E93\u5B58",value:O(Le,{color:"blue",children:v.useAbleQuantity||0})}),O(fe,{label:"\u5165\u5E93\u65F6\u95F4",value:v.lastCheckInTime})]})}]})})]})},un=t=>{const{data:e,isEdit:i,onChange:n}=t,r=se.exports.useRef(e),[a,u]=se.exports.useState(""),o=se.exports.useRef([]);return re("div",{className:Me("arco-list-style","h-max overflow-hidden"),children:[i&&e.length>1?O("header",{className:"flex",children:O(_t.Search,{className:"w-1/2 ml-auto mb-2",value:a,onChange:u,placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7",searchButton:"\u6279\u91CF\u66F4\u65B0",allowClear:!0,onSearch:f=>{f&&(o.current.forEach((m,l)=>{m.setFieldValue("trackingNo",f),r.current[l].trackingNo=f}),n==null||n(r.current),u(""))}})}):null,O(ci,{className:Me(Wu["goods-info"]),dataSource:e||[],bordered:i,render:(f,m)=>{var l;return re("div",{className:Me(["grid h-[105px] overflow-hidden",{"grid-cols-2":i},m>0?"border-t":""]),children:[re("div",{className:"p-2 w-full flex items-start",children:[O(fr,{className:"goods-image-main size-24",src:(l=f.productImg)==null?void 0:l[0],alt:"\u901F\u8FD0\u5B9D",preview:!0}),re("div",{className:"ml-2 flex-1 w-0",children:[O("div",{className:"truncate",children:f.productName}),re("div",{className:"text-sm text-gray-500",children:[re(rt,{size:30,children:[O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u5355\u2003\u2003\u4EF7",value:f.unitPrice}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u6570\u2003\u2003\u91CF",value:f.quantity>1?O("span",{className:"text-red-500 font-bold",children:f.quantity}):f.quantity})]}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u89C4\u683C\u540D\u79F0",value:f.specificationName}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u89C4\u683CSKU",value:O(Vo,{value:f.sku,children:f.sku})})]})]})]}),i?O(ve,{children:O("div",{className:"border-l pl-2 pt-2",children:O(ut,{ref:c=>{c?o.current[m]=c:o.current.splice(m,1)},gutter:[0,0],initialValues:ue(q({},f),{deliveryMethod:f.deliveryMethod||"0",productInventoryVO:f.logisticsProduct?[ue(q({},f),{useAbleQuantityChange:f.stockUse})]:[]}),onChange:(c,s)=>{r.current[m]=s,n==null||n(r.current)},formItemConfigList:[{schema:{label:"\u53D1\u8D27\u65B9\u5F0F",field:"ccc",span:16,required:!0},formItemProps:{noStyle:!0},control:O(De.Item,{noStyle:!0,shouldUpdate:(c,s)=>c.menuType!==s.menuType,children:c=>O(De.Item,{disabled:c.stockOutStatus,className:"!mb-0",field:"deliveryMethod",label:"\u53D1\u8D27\u65B9\u5F0F",colon:!0,children:O(bi,{type:"radio",dictCode:"delivery_method"})})})},{schema:{label:"",field:"stockOutStatus",span:8},formItemProps:{triggerPropName:"checked",className:"!mb-0"},control:"switch",controlProps:{checkedText:"\u7F3A\u8D27\u6253\u5305",uncheckedText:"\u7F3A\u8D27\u6253\u5305"}},{schema:{label:" ",field:"dddddd",span:24},formItemProps:{noStyle:!0},control:O(De.Item,{noStyle:!0,shouldUpdate:(c,s)=>c.menuType!==s.menuType,children:c=>{var s;return c.deliveryMethod==="0"?O(De.Item,{disabled:c.stockOutStatus,className:"mt-4",field:"trackingNo",label:"\u5FEB\u9012\u5355\u53F7",colon:!0,children:O(_t,{placeholder:"\u8BF7\u8F93\u5165\u5FEB\u9012\u5355\u53F7",allowClear:!0})}):O(De.Item,{disabled:c.stockOutStatus,field:"productInventoryVO",label:"",children:O(Vu,{stockNum:f.quantity,className:Me(((s=c.productInventoryVO)==null?void 0:s.length)?"-mt-[6px]":"mt-4")})})}})}]})})}):null]},f.id)}})]})},Gu=t=>{const{orderItem:e}=t,[i,n]=se.exports.useState(!1),[r]=De.useForm(),a=_e(async()=>{const{shrimpOrderNo:o}=await r.validate();return await nt({content:`[${o}]\u786E\u8BA4\u6362\u5355\u91CD\u51FA\uFF1F`}),Ee(()=>Be.overseasWarehouseReturnReOutOverseasWarehouseReturnOrder({id:e.id,orderNo:o}),"\u6362\u5355").then(()=>{n(!1),Fe.emit(Oe.refreshOrderPage)})},{manual:!0}),u=_e(async()=>{const{shrimpOrderNo:o}=await r.validate();return Be.getList({selectLogisticsOrderVO:{shrimpOrderNo:o},selectOrderProductVO:{},selectLogisticsVO:{},pageNum:1,pageSize:1}).then(f=>f.data.data.list)},{manual:!0});return re(ve,{children:[O(me,{status:"success",size:"small",onClick:()=>{n(!0)},children:"\u6362\u5355"}),re(so,{title:`${e.shrimpOrderNo} - \u6362\u5355\u91CD\u51FA`,width:"65%",visible:i,onCancel:()=>{n(!1)},footer:null,children:[O(De,{form:r,children:O(Et.Row,{children:O(Et.Col,{span:12,children:O(De.Item,{field:"shrimpOrderNo",children:O(_t.Search,{placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u7F16\u53F7",searchButton:"\u67E5\u8BE2",onSearch:()=>{u.run()}})})})})}),O(Wr,{data:u.data,loading:u.loading,columns:[{title:"\u8BA2\u5355\u4FE1\u606F",dataIndex:"orderInfo",width:300,render(o,f){return re(rt,{direction:"vertical",size:5,children:[O(fe,{label:"\u8BA2\u5355\u7F16\u53F7",value:f.shrimpOrderNo}),O(fe,{label:"Shopee\u72B6\u6001",value:O(qr,{dictCode:"shopee_status",value:f.shopeeStatus})}),O(fe,{label:"\u5E97\u94FA",value:O(Ci,{value:f.platformShopId})}),O(fe,{label:"\u521B\u5EFA\u65F6\u95F4",value:f.createTime})]})}},{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:"goodsInfo",render(o,f){return O(un,{data:f.orderProductVOList})}},{title:"\u64CD\u4F5C",width:120,dataIndex:"actions",render(){return O(me,{type:"text",status:"success",loading:a.loading,onClick:()=>{a.run()},children:"\u6362\u5355\u91CD\u51FA"})}}]})]})]})},Ku=t=>{const{buttonProps:e,id:i,abeyanceStatus:n}=t,r=_e(async()=>Ee(()=>Be.exceptionOnHold({id:i,abeyanceStatus:n?0:1}),n?"\u53D6\u6D88":"\u5F02\u5E38\u6401\u7F6E").then(()=>{Fe.emit(Oe.refreshOrderPage)}),{manual:!0});return O(ve,{children:O(me,ue(q({onClick:()=>{r.run()},type:"text",status:"danger",loading:r.loading},e),{children:n?"\u53D6\u6D88\u5F02\u5E38\u6401\u7F6E":"\u5F02\u5E38\u6401\u7F6E"}))})};const qu=se.exports.forwardRef((t,e)=>O(me,ue(q({ref:e,type:"text",status:"warning",disabled:t.disabled},t),{children:"\u5305\u88F9\u51FA\u5E93"})));var sn={},wr={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});function Zu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Xu=function t(e,i){Zu(this,t),this.data=e,this.text=i.text||e,this.options=i};ze.default=Xu;Object.defineProperty(wr,"__esModule",{value:!0});wr.CODE39=void 0;var Qu=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Yu=ze,Ju=es(Yu);function es(t){return t&&t.__esModule?t:{default:t}}function ts(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ns(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var is=function(t){ns(e,t);function e(i,n){return ts(this,e),i=i.toUpperCase(),n.mod43&&(i+=us(ss(i))),rs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Qu(e,[{key:"encode",value:function(){for(var n=ln("*"),r=0;r<this.data.length;r++)n+=ln(this.data[r])+"0";return n+=ln("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(Ju.default),Xi=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],as=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function ln(t){return os(Qi(t))}function os(t){return as[t].toString(2)}function us(t){return Xi[t]}function Qi(t){return Xi.indexOf(t)}function ss(t){for(var e=0,i=0;i<t.length;i++)e+=Qi(t[i]);return e=e%43,e}wr.CODE39=is;var lt={},cn={},It={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});var Zt;function dn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Yi=xe.SET_A=0,Ji=xe.SET_B=1,ea=xe.SET_C=2;xe.SHIFT=98;var ls=xe.START_A=103,cs=xe.START_B=104,ds=xe.START_C=105;xe.MODULO=103;xe.STOP=106;xe.FNC1=207;xe.SET_BY_CODE=(Zt={},dn(Zt,ls,Yi),dn(Zt,cs,Ji),dn(Zt,ds,ea),Zt);xe.SWAP={101:Yi,100:Ji,99:ea};xe.A_START_CHAR=String.fromCharCode(208);xe.B_START_CHAR=String.fromCharCode(209);xe.C_START_CHAR=String.fromCharCode(210);xe.A_CHARS="[\0-_\xC8-\xCF]";xe.B_CHARS="[ -\x7F\xC8-\xCF]";xe.C_CHARS="(\xCF*[0-9]{2}\xCF*)";xe.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(It,"__esModule",{value:!0});var fs=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),hs=ze,ps=ms(hs),Xe=xe;function ms(t){return t&&t.__esModule?t:{default:t}}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ys(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bs=function(t){ys(e,t);function e(i,n){gs(this,e);var r=vs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i.substring(1),n));return r.bytes=i.split("").map(function(a){return a.charCodeAt(0)}),r}return fs(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,r=n.shift()-105,a=Xe.SET_BY_CODE[r];if(a===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(Xe.FNC1);var u=e.next(n,1,a);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(r)+u.result+e.getBar((u.checksum+r)%Xe.MODULO)+e.getBar(Xe.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return Xe.BARS[n]?Xe.BARS[n].toString():""}},{key:"correctIndex",value:function(n,r){if(r===Xe.SET_A){var a=n.shift();return a<32?a+64:a-32}else return r===Xe.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,r,a){if(!n.length)return{result:"",checksum:0};var u=void 0,o=void 0;if(n[0]>=200){o=n.shift()-105;var f=Xe.SWAP[o];f!==void 0?u=e.next(n,r+1,f):((a===Xe.SET_A||a===Xe.SET_B)&&o===Xe.SHIFT&&(n[0]=a===Xe.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),u=e.next(n,r+1,a))}else o=e.correctIndex(n,a),u=e.next(n,r+1,a);var m=e.getBar(o),l=o*r;return{result:m+u.result,checksum:l+u.checksum}}}]),e}(ps.default);It.default=bs;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});var mt=xe,ta=function(e){return e.match(new RegExp("^"+mt.A_CHARS+"*"))[0].length},ra=function(e){return e.match(new RegExp("^"+mt.B_CHARS+"*"))[0].length},na=function(e){return e.match(new RegExp("^"+mt.C_CHARS+"*"))[0]};function hn(t,e){var i=e?mt.A_CHARS:mt.B_CHARS,n=t.match(new RegExp("^("+i+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+ia(t.substring(n[1].length));var r=t.match(new RegExp("^"+i+"+"))[0];return r.length===t.length?t:r+String.fromCharCode(e?205:206)+hn(t.substring(r.length),!e)}function ia(t){var e=na(t),i=e.length;if(i===t.length)return t;t=t.substring(i);var n=ta(t)>=ra(t);return e+String.fromCharCode(n?206:205)+hn(t,n)}fn.default=function(t){var e=void 0,i=na(t).length;if(i>=2)e=mt.C_START_CHAR+ia(t);else{var n=ta(t)>ra(t);e=(n?mt.A_START_CHAR:mt.B_START_CHAR)+hn(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(r,a){return String.fromCharCode(203)+a})};Object.defineProperty(cn,"__esModule",{value:!0});var _s=It,Es=aa(_s),ws=fn,Os=aa(ws);function aa(t){return t&&t.__esModule?t:{default:t}}function xs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ss(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Fs=function(t){Ss(e,t);function e(i,n){if(xs(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(i))var r=pn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,Os.default)(i),n));else var r=pn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return pn(r)}return e}(Es.default);cn.default=Fs;var mn={};Object.defineProperty(mn,"__esModule",{value:!0});var As=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Cs=It,ks=Ds(Cs),oa=xe;function Ds(t){return t&&t.__esModule?t:{default:t}}function Bs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ts(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Is=function(t){Ts(e,t);function e(i,n){return Bs(this,e),Ps(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,oa.A_START_CHAR+i,n))}return As(e,[{key:"valid",value:function(){return new RegExp("^"+oa.A_CHARS+"+$").test(this.data)}}]),e}(ks.default);mn.default=Is;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});var Rs=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ns=It,Ls=Ms(Ns),ua=xe;function Ms(t){return t&&t.__esModule?t:{default:t}}function $s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var js=function(t){zs(e,t);function e(i,n){return $s(this,e),Us(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ua.B_START_CHAR+i,n))}return Rs(e,[{key:"valid",value:function(){return new RegExp("^"+ua.B_CHARS+"+$").test(this.data)}}]),e}(Ls.default);gn.default=js;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});var Hs=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ws=It,Vs=Gs(Ws),sa=xe;function Gs(t){return t&&t.__esModule?t:{default:t}}function Ks(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qs(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Zs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Xs=function(t){Zs(e,t);function e(i,n){return Ks(this,e),qs(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,sa.C_START_CHAR+i,n))}return Hs(e,[{key:"valid",value:function(){return new RegExp("^"+sa.C_CHARS+"+$").test(this.data)}}]),e}(Vs.default);vn.default=Xs;Object.defineProperty(lt,"__esModule",{value:!0});lt.CODE128C=lt.CODE128B=lt.CODE128A=lt.CODE128=void 0;var Qs=cn,Ys=Or(Qs),Js=mn,el=Or(Js),tl=gn,rl=Or(tl),nl=vn,il=Or(nl);function Or(t){return t&&t.__esModule?t:{default:t}}lt.CODE128=Ys.default;lt.CODE128A=el.default;lt.CODE128B=rl.default;lt.CODE128C=il.default;var We={},yn={},Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.SIDE_BIN="101";Je.MIDDLE_BIN="01010";Je.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Je.EAN2_STRUCTURE=["LL","LG","GL","GG"];Je.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Je.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var xr={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});var al=Je,ol=function(e,i,n){var r=e.split("").map(function(u,o){return al.BINARIES[i[o]]}).map(function(u,o){return u?u[e[o]]:""});if(n){var a=e.length-1;r=r.map(function(u,o){return o<a?u+n:u})}return r.join("")};xt.default=ol;Object.defineProperty(xr,"__esModule",{value:!0});var ul=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Rt=Je,sl=xt,la=ca(sl),ll=ze,cl=ca(ll);function ca(t){return t&&t.__esModule?t:{default:t}}function dl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var pl=function(t){hl(e,t);function e(i,n){dl(this,e);var r=fl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return r.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return ul(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,r){return this.text.substr(n,r)}},{key:"leftEncode",value:function(n,r){return(0,la.default)(n,r)}},{key:"rightText",value:function(n,r){return this.text.substr(n,r)}},{key:"rightEncode",value:function(n,r){return(0,la.default)(n,r)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},r={height:this.guardHeight};return[{data:Rt.SIDE_BIN,options:r},{data:this.leftEncode(),text:this.leftText(),options:n},{data:Rt.MIDDLE_BIN,options:r},{data:this.rightEncode(),text:this.rightText(),options:n},{data:Rt.SIDE_BIN,options:r}]}},{key:"encodeFlat",value:function(){var n=[Rt.SIDE_BIN,this.leftEncode(),Rt.MIDDLE_BIN,this.rightEncode(),Rt.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(cl.default);xr.default=pl;Object.defineProperty(yn,"__esModule",{value:!0});var ml=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Xt=function t(e,i,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(r===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,i,n)}else{if("value"in r)return r.value;var u=r.get;return u===void 0?void 0:u.call(n)}},gl=Je,vl=xr,yl=bl(vl);function bl(t){return t&&t.__esModule?t:{default:t}}function _l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function El(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function wl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var da=function(e){var i=e.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,r,a){return a%2?n+r*3:n+r},0);return(10-i%10)%10},Ol=function(t){wl(e,t);function e(i,n){_l(this,e),i.search(/^[0-9]{12}$/)!==-1&&(i+=da(i));var r=El(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return r.lastChar=n.lastChar,r}return ml(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===da(this.data)}},{key:"leftText",value:function(){return Xt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),r=gl.EAN13_STRUCTURE[this.data[0]];return Xt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,r)}},{key:"rightText",value:function(){return Xt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return Xt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=Xt(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(yl.default);yn.default=Ol;var bn={};Object.defineProperty(bn,"__esModule",{value:!0});var xl=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Sr=function t(e,i,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(r===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,i,n)}else{if("value"in r)return r.value;var u=r.get;return u===void 0?void 0:u.call(n)}},Sl=xr,Fl=Al(Sl);function Al(t){return t&&t.__esModule?t:{default:t}}function Cl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Dl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fa=function(e){var i=e.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,r,a){return a%2?n+r:n+r*3},0);return(10-i%10)%10},Bl=function(t){Dl(e,t);function e(i,n){return Cl(this,e),i.search(/^[0-9]{7}$/)!==-1&&(i+=fa(i)),kl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return xl(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===fa(this.data)}},{key:"leftText",value:function(){return Sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return Sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return Sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return Sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(Fl.default);bn.default=Bl;var _n={};Object.defineProperty(_n,"__esModule",{value:!0});var Pl=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Tl=Je,Il=xt,Rl=ha(Il),Nl=ze,Ll=ha(Nl);function ha(t){return t&&t.__esModule?t:{default:t}}function Ml(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ul(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zl=function(e){var i=e.split("").map(function(n){return+n}).reduce(function(n,r,a){return a%2?n+r*9:n+r*3},0);return i%10},jl=function(t){Ul(e,t);function e(i,n){return Ml(this,e),$l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Pl(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=Tl.EAN5_STRUCTURE[zl(this.data)];return{data:"1011"+(0,Rl.default)(this.data,n,"01"),text:this.text}}}]),e}(Ll.default);_n.default=jl;var En={};Object.defineProperty(En,"__esModule",{value:!0});var Hl=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Wl=Je,Vl=xt,Gl=pa(Vl),Kl=ze,ql=pa(Kl);function pa(t){return t&&t.__esModule?t:{default:t}}function Zl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xl(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ql(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Yl=function(t){Ql(e,t);function e(i,n){return Zl(this,e),Xl(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Hl(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=Wl.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Gl.default)(this.data,n,"01"),text:this.text}}}]),e}(ql.default);En.default=Yl;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});var Jl=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();Qt.checksum=wn;var ec=xt,Nt=ma(ec),tc=ze,rc=ma(tc);function ma(t){return t&&t.__esModule?t:{default:t}}function nc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ic(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ac(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var oc=function(t){ac(e,t);function e(i,n){nc(this,e),i.search(/^[0-9]{11}$/)!==-1&&(i+=wn(i));var r=ic(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return r.displayValue=n.displayValue,n.fontSize>n.width*10?r.fontSize=n.width*10:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return Jl(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==wn(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,Nt.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,Nt.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,Nt.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,Nt.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,Nt.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,Nt.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(rc.default);function wn(t){var e=0,i;for(i=1;i<11;i+=2)e+=parseInt(t[i]);for(i=0;i<11;i+=2)e+=parseInt(t[i])*3;return(10-e%10)%10}Qt.default=oc;var On={};Object.defineProperty(On,"__esModule",{value:!0});var uc=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),sc=xt,lc=ga(sc),cc=ze,dc=ga(cc),fc=Qt;function ga(t){return t&&t.__esModule?t:{default:t}}function hc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mc=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],gc=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],vc=function(t){pc(e,t);function e(i,n){hc(this,e);var r=xn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));if(r.isValid=!1,i.search(/^[0-9]{6}$/)!==-1)r.middleDigits=i,r.upcA=va(i,"0"),r.text=n.text||""+r.upcA[0]+i+r.upcA[r.upcA.length-1],r.isValid=!0;else if(i.search(/^[01][0-9]{7}$/)!==-1)if(r.middleDigits=i.substring(1,i.length-1),r.upcA=va(r.middleDigits,i[0]),r.upcA[r.upcA.length-1]===i[i.length-1])r.isValid=!0;else return xn(r);else return xn(r);return r.displayValue=n.displayValue,n.fontSize>n.width*10?r.fontSize=n.width*10:r.fontSize=n.fontSize,r.guardHeight=n.height+r.fontSize/2+n.textMargin,r}return uc(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],r=this.upcA[this.upcA.length-1],a=gc[parseInt(r)][parseInt(n)];return(0,lc.default)(this.middleDigits,a)}}]),e}(dc.default);function va(t,e){for(var i=parseInt(t[t.length-1]),n=mc[i],r="",a=0,u=0;u<n.length;u++){var o=n[u];o==="X"?r+=t[a++]:r+=o}return r=""+e+r,""+r+(0,fc.checksum)(r)}On.default=vc;Object.defineProperty(We,"__esModule",{value:!0});We.UPCE=We.UPC=We.EAN2=We.EAN5=We.EAN8=We.EAN13=void 0;var yc=yn,bc=Lt(yc),_c=bn,Ec=Lt(_c),wc=_n,Oc=Lt(wc),xc=En,Sc=Lt(xc),Fc=Qt,Ac=Lt(Fc),Cc=On,kc=Lt(Cc);function Lt(t){return t&&t.__esModule?t:{default:t}}We.EAN13=bc.default;We.EAN8=Ec.default;We.EAN5=Oc.default;We.EAN2=Sc.default;We.UPC=Ac.default;We.UPCE=kc.default;var Mt={},Fr={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.START_BIN="1010";Yt.END_BIN="11101";Yt.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Fr,"__esModule",{value:!0});var Dc=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Ar=Yt,Bc=ze,Pc=Tc(Bc);function Tc(t){return t&&t.__esModule?t:{default:t}}function Ic(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rc(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Nc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Lc=function(t){Nc(e,t);function e(){return Ic(this,e),Rc(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Dc(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,r=this.data.match(/.{2}/g).map(function(a){return n.encodePair(a)}).join("");return{data:Ar.START_BIN+r+Ar.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var r=Ar.BINARIES[n[1]];return Ar.BINARIES[n[0]].split("").map(function(a,u){return(a==="1"?"111":"1")+(r[u]==="1"?"000":"0")}).join("")}}]),e}(Pc.default);Fr.default=Lc;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var Mc=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),$c=Fr,Uc=zc($c);function zc(t){return t&&t.__esModule?t:{default:t}}function jc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hc(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ya=function(e){var i=e.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,r,a){return n+r*(3-a%2*2)},0);return Math.ceil(i/10)*10-i},Vc=function(t){Wc(e,t);function e(i,n){return jc(this,e),i.search(/^[0-9]{13}$/)!==-1&&(i+=ya(i)),Hc(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Mc(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===ya(this.data)}}]),e}(Uc.default);Sn.default=Vc;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.ITF14=Mt.ITF=void 0;var Gc=Fr,Kc=ba(Gc),qc=Sn,Zc=ba(qc);function ba(t){return t&&t.__esModule?t:{default:t}}Mt.ITF=Kc.default;Mt.ITF14=Zc.default;var et={},St={};Object.defineProperty(St,"__esModule",{value:!0});var Xc=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Qc=ze,Yc=Jc(Qc);function Jc(t){return t&&t.__esModule?t:{default:t}}function ed(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function td(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nd=function(t){rd(e,t);function e(i,n){return ed(this,e),td(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Xc(e,[{key:"encode",value:function(){for(var n="110",r=0;r<this.data.length;r++){var a=parseInt(this.data[r]),u=a.toString(2);u=id(u,4-u.length);for(var o=0;o<u.length;o++)n+=u[o]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(Yc.default);function id(t,e){for(var i=0;i<e;i++)t="0"+t;return t}St.default=nd;var Fn={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.mod10=ad;Ft.mod11=od;function ad(t){for(var e=0,i=0;i<t.length;i++){var n=parseInt(t[i]);(i+t.length)%2==0?e+=n:e+=n*2%10+Math.floor(n*2/10)}return(10-e%10)%10}function od(t){for(var e=0,i=[2,3,4,5,6,7],n=0;n<t.length;n++){var r=parseInt(t[t.length-1-n]);e+=i[n%i.length]*r}return(11-e%11)%11}Object.defineProperty(Fn,"__esModule",{value:!0});var ud=St,sd=cd(ud),ld=Ft;function cd(t){return t&&t.__esModule?t:{default:t}}function dd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var pd=function(t){hd(e,t);function e(i,n){return dd(this,e),fd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i+(0,ld.mod10)(i),n))}return e}(sd.default);Fn.default=pd;var An={};Object.defineProperty(An,"__esModule",{value:!0});var md=St,gd=yd(md),vd=Ft;function yd(t){return t&&t.__esModule?t:{default:t}}function bd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ed(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wd=function(t){Ed(e,t);function e(i,n){return bd(this,e),_d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i+(0,vd.mod11)(i),n))}return e}(gd.default);An.default=wd;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});var Od=St,xd=Sd(Od),_a=Ft;function Sd(t){return t&&t.__esModule?t:{default:t}}function Fd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ad(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kd=function(t){Cd(e,t);function e(i,n){return Fd(this,e),i+=(0,_a.mod10)(i),i+=(0,_a.mod10)(i),Ad(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return e}(xd.default);Cn.default=kd;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});var Dd=St,Bd=Pd(Dd),Ea=Ft;function Pd(t){return t&&t.__esModule?t:{default:t}}function Td(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Id(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Rd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Nd=function(t){Rd(e,t);function e(i,n){return Td(this,e),i+=(0,Ea.mod11)(i),i+=(0,Ea.mod10)(i),Id(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return e}(Bd.default);kn.default=Nd;Object.defineProperty(et,"__esModule",{value:!0});et.MSI1110=et.MSI1010=et.MSI11=et.MSI10=et.MSI=void 0;var Ld=St,Md=Jt(Ld),$d=Fn,Ud=Jt($d),zd=An,jd=Jt(zd),Hd=Cn,Wd=Jt(Hd),Vd=kn,Gd=Jt(Vd);function Jt(t){return t&&t.__esModule?t:{default:t}}et.MSI=Md.default;et.MSI10=Ud.default;et.MSI11=jd.default;et.MSI1010=Wd.default;et.MSI1110=Gd.default;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.pharmacode=void 0;var Kd=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),qd=ze,Zd=Xd(qd);function Xd(t){return t&&t.__esModule?t:{default:t}}function Qd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Jd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ef=function(t){Jd(e,t);function e(i,n){Qd(this,e);var r=Yd(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n));return r.number=parseInt(i,10),r}return Kd(e,[{key:"encode",value:function(){for(var n=this.number,r="";!isNaN(n)&&n!=0;)n%2==0?(r="11100"+r,n=(n-2)/2):(r="100"+r,n=(n-1)/2);return r=r.slice(0,-2),{data:r,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(Zd.default);Cr.pharmacode=ef;var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.codabar=void 0;var tf=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),rf=ze,nf=af(rf);function af(t){return t&&t.__esModule?t:{default:t}}function of(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uf(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lf=function(t){sf(e,t);function e(i,n){of(this,e),i.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(i="A"+i+"A");var r=uf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i.toUpperCase(),n));return r.text=r.options.text||r.text.replace(/[A-D]/g,""),r}return tf(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],r=this.getEncodings(),a=0;a<this.data.length;a++)n.push(r[this.data.charAt(a)]),a!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{"0":"101010011","1":"101011001","2":"101001011","3":"110010101","4":"101101001","5":"110101001","6":"100101011","7":"100101101","8":"100110101","9":"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(nf.default);kr.codabar=lf;var $t={},Dr={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","\xFF"];er.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];er.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"\x7F":["(%)","T"]};Object.defineProperty(Dr,"__esModule",{value:!0});var cf=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Br=er,df=ze,ff=hf(df);function hf(t){return t&&t.__esModule?t:{default:t}}function pf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mf(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vf=function(t){gf(e,t);function e(i,n){return pf(this,e),mf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return cf(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(o){return Br.MULTI_SYMBOLS[o]||o}),r=n.map(function(o){return e.getEncoding(o)}).join(""),a=e.checksum(n,20),u=e.checksum(n.concat(a),15);return{text:this.text,data:e.getEncoding("\xFF")+r+e.getEncoding(a)+e.getEncoding(u)+e.getEncoding("\xFF")+"1"}}}],[{key:"getEncoding",value:function(n){return Br.BINARIES[e.symbolValue(n)]}},{key:"getSymbol",value:function(n){return Br.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return Br.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,r){var a=n.slice().reverse().reduce(function(u,o,f){var m=f%r+1;return u+e.symbolValue(o)*m},0);return e.getSymbol(a%47)}}]),e}(ff.default);Dr.default=vf;var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var yf=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),bf=Dr,_f=Ef(bf);function Ef(t){return t&&t.__esModule?t:{default:t}}function wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Of(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Sf=function(t){xf(e,t);function e(i,n){return wf(this,e),Of(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return yf(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(_f.default);Dn.default=Sf;Object.defineProperty($t,"__esModule",{value:!0});$t.CODE93FullASCII=$t.CODE93=void 0;var Ff=Dr,Af=wa(Ff),Cf=Dn,kf=wa(Cf);function wa(t){return t&&t.__esModule?t:{default:t}}$t.CODE93=Af.default;$t.CODE93FullASCII=kf.default;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.GenericBarcode=void 0;var Df=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Bf=ze,Pf=Tf(Bf);function Tf(t){return t&&t.__esModule?t:{default:t}}function If(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rf(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Nf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Lf=function(t){Nf(e,t);function e(i,n){return If(this,e),Rf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,n))}return Df(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Pf.default);Pr.GenericBarcode=Lf;Object.defineProperty(sn,"__esModule",{value:!0});var Mf=wr,Tr=lt,Ut=We,Oa=Mt,tr=et,$f=Cr,Uf=kr,xa=$t,zf=Pr;sn.default={CODE39:Mf.CODE39,CODE128:Tr.CODE128,CODE128A:Tr.CODE128A,CODE128B:Tr.CODE128B,CODE128C:Tr.CODE128C,EAN13:Ut.EAN13,EAN8:Ut.EAN8,EAN5:Ut.EAN5,EAN2:Ut.EAN2,UPC:Ut.UPC,UPCE:Ut.UPCE,ITF14:Oa.ITF14,ITF:Oa.ITF,MSI:tr.MSI,MSI10:tr.MSI10,MSI11:tr.MSI11,MSI1010:tr.MSI1010,MSI1110:tr.MSI1110,pharmacode:$f.pharmacode,codabar:Uf.codabar,CODE93:xa.CODE93,CODE93FullASCII:xa.CODE93FullASCII,GenericBarcode:zf.GenericBarcode};var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var jf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};zt.default=function(t,e){return jf({},t,e)};var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.default=Hf;function Hf(t){var e=[];function i(n){if(Array.isArray(n))for(var r=0;r<n.length;r++)i(n[r]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}return i(t),e}var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=Wf;function Wf(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Tn={},In={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.default=Vf;function Vf(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var i in e)e.hasOwnProperty(i)&&(i=e[i],typeof t[i]=="string"&&(t[i]=parseInt(t[i],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});var Gf={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Rr.default=Gf;Object.defineProperty(In,"__esModule",{value:!0});var Kf=Ir,qf=Fa(Kf),Zf=Rr,Sa=Fa(Zf);function Fa(t){return t&&t.__esModule?t:{default:t}}function Xf(t){var e={};for(var i in Sa.default)Sa.default.hasOwnProperty(i)&&(t.hasAttribute("jsbarcode-"+i.toLowerCase())&&(e[i]=t.getAttribute("jsbarcode-"+i.toLowerCase())),t.hasAttribute("data-"+i.toLowerCase())&&(e[i]=t.getAttribute("data-"+i.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,qf.default)(e),e}In.default=Xf;var Rn={},Nn={},Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getTotalWidthOfEncodings=Qe.calculateEncodingAttributes=Qe.getBarcodePadding=Qe.getEncodingHeight=Qe.getMaximumHeightOfEncodings=void 0;var Qf=zt,Yf=Jf(Qf);function Jf(t){return t&&t.__esModule?t:{default:t}}function Aa(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Ca(t,e,i){if(i.displayValue&&e<t){if(i.textAlign=="center")return Math.floor((t-e)/2);if(i.textAlign=="left")return 0;if(i.textAlign=="right")return Math.floor(t-e)}return 0}function eh(t,e,i){for(var n=0;n<t.length;n++){var r=t[n],a=(0,Yf.default)(e,r.options),u;a.displayValue?u=nh(r.text,a,i):u=0;var o=r.data.length*a.width;r.width=Math.ceil(Math.max(u,o)),r.height=Aa(r,a),r.barcodePadding=Ca(u,o,a)}}function th(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].width;return e}function rh(t){for(var e=0,i=0;i<t.length;i++)t[i].height>e&&(e=t[i].height);return e}function nh(t,e,i){var n;if(i)n=i;else if(typeof document!="undefined")n=document.createElement("canvas").getContext("2d");else return 0;n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var r=n.measureText(t);if(!r)return 0;var a=r.width;return a}Qe.getMaximumHeightOfEncodings=rh;Qe.getEncodingHeight=Aa;Qe.getBarcodePadding=Ca;Qe.calculateEncodingAttributes=eh;Qe.getTotalWidthOfEncodings=th;Object.defineProperty(Nn,"__esModule",{value:!0});var ih=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ah=zt,oh=uh(ah),Ln=Qe;function uh(t){return t&&t.__esModule?t:{default:t}}function sh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var lh=function(){function t(e,i,n){sh(this,t),this.canvas=e,this.encodings=i,this.options=n}return ih(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var i=0;i<this.encodings.length;i++){var n=(0,oh.default)(this.options,this.encodings[i].options);this.drawCanvasBarcode(n,this.encodings[i]),this.drawCanvasText(n,this.encodings[i]),this.moveCanvasDrawing(this.encodings[i])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var i=this.canvas.getContext("2d");i.save(),(0,Ln.calculateEncodingAttributes)(this.encodings,this.options,i);var n=(0,Ln.getTotalWidthOfEncodings)(this.encodings),r=(0,Ln.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,i.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(i.fillStyle=this.options.background,i.fillRect(0,0,this.canvas.width,this.canvas.height)),i.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(i,n){var r=this.canvas.getContext("2d"),a=n.data,u;i.textPosition=="top"?u=i.marginTop+i.fontSize+i.textMargin:u=i.marginTop,r.fillStyle=i.lineColor;for(var o=0;o<a.length;o++){var f=o*i.width+n.barcodePadding;a[o]==="1"?r.fillRect(f,u,i.width,i.height):a[o]&&r.fillRect(f,u,i.width,i.height*a[o])}}},{key:"drawCanvasText",value:function(i,n){var r=this.canvas.getContext("2d"),a=i.fontOptions+" "+i.fontSize+"px "+i.font;if(i.displayValue){var u,o;i.textPosition=="top"?o=i.marginTop+i.fontSize-i.textMargin:o=i.height+i.textMargin+i.marginTop+i.fontSize,r.font=a,i.textAlign=="left"||n.barcodePadding>0?(u=0,r.textAlign="left"):i.textAlign=="right"?(u=n.width-1,r.textAlign="right"):(u=n.width/2,r.textAlign="center"),r.fillText(n.text,u,o)}}},{key:"moveCanvasDrawing",value:function(i){var n=this.canvas.getContext("2d");n.translate(i.width,0)}},{key:"restoreCanvas",value:function(){var i=this.canvas.getContext("2d");i.restore()}}]),t}();Nn.default=lh;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});var ch=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),dh=zt,fh=hh(dh),$n=Qe;function hh(t){return t&&t.__esModule?t:{default:t}}function ph(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nr="http://www.w3.org/2000/svg",mh=function(){function t(e,i,n){ph(this,t),this.svg=e,this.encodings=i,this.options=n,this.document=n.xmlDocument||document}return ch(t,[{key:"render",value:function(){var i=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var r=this.encodings[n],a=(0,fh.default)(this.options,r.options),u=this.createGroup(i,a.marginTop,this.svg);this.setGroupOptions(u,a),this.drawSvgBarcode(u,a,r),this.drawSVGText(u,a,r),i+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,$n.calculateEncodingAttributes)(this.encodings,this.options);var i=(0,$n.getTotalWidthOfEncodings)(this.encodings),n=(0,$n.getMaximumHeightOfEncodings)(this.encodings),r=i+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,n),this.options.background&&this.drawRect(0,0,r,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(i,n,r){var a=r.data,u;n.textPosition=="top"?u=n.fontSize+n.textMargin:u=0;for(var o=0,f=0,m=0;m<a.length;m++)f=m*n.width+r.barcodePadding,a[m]==="1"?o++:o>0&&(this.drawRect(f-n.width*o,u,n.width*o,n.height,i),o=0);o>0&&this.drawRect(f-n.width*(o-1),u,n.width*o,n.height,i)}},{key:"drawSVGText",value:function(i,n,r){var a=this.document.createElementNS(Nr,"text");if(n.displayValue){var u,o;a.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?o=n.fontSize-n.textMargin:o=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||r.barcodePadding>0?(u=0,a.setAttribute("text-anchor","start")):n.textAlign=="right"?(u=r.width-1,a.setAttribute("text-anchor","end")):(u=r.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",u),a.setAttribute("y",o),a.appendChild(this.document.createTextNode(r.text)),i.appendChild(a)}}},{key:"setSvgAttributes",value:function(i,n){var r=this.svg;r.setAttribute("width",i+"px"),r.setAttribute("height",n+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+i+" "+n),r.setAttribute("xmlns",Nr),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(i,n,r){var a=this.document.createElementNS(Nr,"g");return a.setAttribute("transform","translate("+i+", "+n+")"),r.appendChild(a),a}},{key:"setGroupOptions",value:function(i,n){i.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(i,n,r,a,u){var o=this.document.createElementNS(Nr,"rect");return o.setAttribute("x",i),o.setAttribute("y",n),o.setAttribute("width",r),o.setAttribute("height",a),u.appendChild(o),o}}]),t}();Mn.default=mh;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});var gh=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function vh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var yh=function(){function t(e,i,n){vh(this,t),this.object=e,this.encodings=i,this.options=n}return gh(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Un.default=yh;Object.defineProperty(Rn,"__esModule",{value:!0});var bh=Nn,_h=zn(bh),Eh=Mn,wh=zn(Eh),Oh=Un,xh=zn(Oh);function zn(t){return t&&t.__esModule?t:{default:t}}Rn.default={CanvasRenderer:_h.default,SVGRenderer:wh.default,ObjectRenderer:xh.default};var jt={};Object.defineProperty(jt,"__esModule",{value:!0});function jn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Wn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Sh=function(t){Wn(e,t);function e(i,n){jn(this,e);var r=Hn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidInputException",r.symbology=i,r.input=n,r.message='"'+r.input+'" is not a valid input for '+r.symbology,r}return e}(Error),Fh=function(t){Wn(e,t);function e(){jn(this,e);var i=Hn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidElementException",i.message="Not supported type to render on",i}return e}(Error),Ah=function(t){Wn(e,t);function e(){jn(this,e);var i=Hn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="NoElementException",i.message="No element to render on.",i}return e}(Error);jt.InvalidInputException=Sh;jt.InvalidElementException=Fh;jt.NoElementException=Ah;Object.defineProperty(Tn,"__esModule",{value:!0});var Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh=In,Vn=ka(kh),Dh=Rn,rr=ka(Dh),Bh=jt;function ka(t){return t&&t.__esModule?t:{default:t}}function Gn(t){if(typeof t=="string")return Ph(t);if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)e.push(Gn(t[i]));return e}else{if(typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLImageElement)return Th(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement!="undefined"&&t instanceof SVGElement)return{element:t,options:(0,Vn.default)(t),renderer:rr.default.SVGRenderer};if(typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,Vn.default)(t),renderer:rr.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:rr.default.CanvasRenderer};if(t&&(typeof t=="undefined"?"undefined":Ch(t))==="object"&&!t.nodeName)return{element:t,renderer:rr.default.ObjectRenderer};throw new Bh.InvalidElementException}}function Ph(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var i=[],n=0;n<e.length;n++)i.push(Gn(e[n]));return i}}function Th(t){var e=document.createElement("canvas");return{element:e,options:(0,Vn.default)(t),renderer:rr.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Tn.default=Gn;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});var Ih=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function Rh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Nh=function(){function t(e){Rh(this,t),this.api=e}return Ih(t,[{key:"handleCatch",value:function(i){if(i.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw i.message;else throw i;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(i){try{var n=i.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(r){return this.handleCatch(r),this.api}}}]),t}();Kn.default=Nh;var Lh=sn,At=gt(Lh),Mh=zt,nr=gt(Mh),$h=Bn,Da=gt($h),Uh=Pn,Ba=gt(Uh),zh=Tn,jh=gt(zh),Hh=Ir,Wh=gt(Hh),Vh=Kn,Gh=gt(Vh),Pa=jt,Kh=Rr,Ta=gt(Kh);function gt(t){return t&&t.__esModule?t:{default:t}}var dt=function(){},Lr=function(e,i,n){var r=new dt;if(typeof e=="undefined")throw Error("No element to render on was provided.");return r._renderProperties=(0,jh.default)(e),r._encodings=[],r._options=Ta.default,r._errorHandler=new Gh.default(r),typeof i!="undefined"&&(n=n||{},n.format||(n.format=Na()),r.options(n)[n.format](i,n).render()),r};Lr.getModule=function(t){return At.default[t]};for(var Ia in At.default)At.default.hasOwnProperty(Ia)&&qh(At.default,Ia);function qh(t,e){dt.prototype[e]=dt.prototype[e.toUpperCase()]=dt.prototype[e.toLowerCase()]=function(i,n){var r=this;return r._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text=="undefined"?void 0:""+n.text;var a=(0,nr.default)(r._options,n);a=(0,Wh.default)(a);var u=t[e],o=Ra(i,u,a);return r._encodings.push(o),r})}}function Ra(t,e,i){t=""+t;var n=new e(t,i);if(!n.valid())throw new Pa.InvalidInputException(n.constructor.name,t);var r=n.encode();r=(0,Da.default)(r);for(var a=0;a<r.length;a++)r[a].options=(0,nr.default)(i,r[a].options);return r}function Na(){return At.default.CODE128?"CODE128":Object.keys(At.default)[0]}dt.prototype.options=function(t){return this._options=(0,nr.default)(this._options,t),this};dt.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};dt.prototype.init=function(){if(!!this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var i=(0,nr.default)(this._options,t.options);i.format=="auto"&&(i.format=Na()),this._errorHandler.wrapBarcodeCall(function(){var n=i.value,r=At.default[i.format.toUpperCase()],a=Ra(n,r,i);qn(t,a,i)})}}};dt.prototype.render=function(){if(!this._renderProperties)throw new Pa.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)qn(this._renderProperties[t],this._encodings,this._options);else qn(this._renderProperties,this._encodings,this._options);return this};dt.prototype._defaults=Ta.default;function qn(t,e,i){e=(0,Da.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,nr.default)(i,e[n].options),(0,Ba.default)(e[n].options);(0,Ba.default)(i);var r=t.renderer,a=new r(t.element,e,i);a.render(),t.afterRender&&t.afterRender()}typeof window!="undefined"&&(window.JsBarcode=Lr);typeof jQuery!="undefined"&&(jQuery.fn.JsBarcode=function(t,e){var i=[];return jQuery(this).each(function(){i.push(this)}),Lr(i,t,e)});var Zh=Lr;class Xh{constructor(){this.callback=()=>{},this.socket=null}connect(){return new Promise((e,i)=>{if(this.socket)e(null);else{let n=new WebSocket("ws://localhost:13528"),r=this.getRequestObject("setPrinterConfig");r.printer.forceNoPageMargins=!1,r.printer.paperSize={width:90,height:90},n.onerror=function(a){i()},n.onmessage=a=>{const u=JSON.parse(a.data);u.cmd=="notifyPrintResult"&&(u.taskStatus=="printed"?(console.log(u),this.callback(u.taskStatus)):u.taskStatus=="failed"&&(console.log(u),we.error("\u6253\u5370\u5931\u8D25"),this.callback(u.taskStatus)))},n.onopen=a=>{this.socket=n,e(null)},n.onclose=a=>{this.socket=null}}})}disconnect(){this.socket&&this.socket.onclose}async doPrint(e,i){console.log("\u5F00\u59CB\u6253\u5370123"),this.callback=i;let n=this.getRequestObject("print");console.log("11111111111"),n.task.taskID=this.getUuid(8,10),n.task.preview=!1,n.task.previewType="",n.task.firstDocumentNumber=1,n.task.totalDocumentCount=1,n.task.printer="",n.task.documents=e,console.log(n.task),this.connect().then(()=>{console.info(222222222),this.callback("open"),this.socket.send(JSON.stringify(n))}).catch(r=>{console.info(33333333),this.callback("no open")})}getRequestObject(e){return{requestID:this.getUuid(8,16),version:"1.0",cmd:e,printer:{},task:{}}}getUuid(e,i){let n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],a;if(i=i||n.length,e)for(a=0;a<e;a++)r[a]=n[0|Math.random()*i];else{let u;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",a=0;a<36;a++)r[a]||(u=0|Math.random()*16,r[a]=n[a==19?u&3|8:u])}return r.join("")}getCustomAreaData(e){return{templateURL:e.contents[0].templateURL,data:e.contents[0].data}}getWaybillJson(e){return e[0]}}const La=new Xh,Ct={links:{CN:{url:"https://item.taobao.com/item.htm?id=",componentDownloadUrl:"https://page.cainiao.com/waybill/cloud_printing/home.html"},TEMPLATEURL:{documentUrl:"http://file.yimaivip.com/file/document-img-1.xml",documentUrlZpt:"http://file.yimaivip.com/file/document-img-3.xml",shippingNumberUrl:"https://suyunbao-1307397511.cos.ap-guangzhou.myqcloud.com/template/shipping_number.xml",shippingNumberQrcodeUrl:"http://file.yimaivip.com/file/shipping_number_qrcode.xml",shippingNumberBarCodeUrl:"https://suyunbao-1307397511.cos.ap-guangzhou.myqcloud.com/template/shipping_number_barcode.xml",shippingNumberBarCodeUrl02:"https://suyunbao-1307397511.cos.ap-guangzhou.myqcloud.com/template/shipping_number_barcode_100x100.xml",shippingNumberBarCodeUrl03:"https://suyunbao-1307397511.cos.ap-guangzhou.myqcloud.com/template/shipping_number_barcode_80x60.xml",customsClearanceUrl:"https://suyunbao-1307397511.cos.ap-guangzhou.myqcloud.com/template/customs_clearance.xml"}}},Qh={"\u7EBF\u4E0B7-ELEVEN":"\u7EBF\u4E0B711",\u7EBF\u4E0B\u65B0\u7AF9\u7269\u6D41:"\u7EBF\u4E0B\u65B0\u7AF9",\u7EBF\u4E0B\u5168\u5BB6:"\u7EBF\u4E0B\u5168\u5BB6","OK Mart":"ok",\u840A\u723E\u5BCC:"\u83B1\u5C14\u5BCC",\u8766\u76AE\u5E97\u5230\u5E97:"\u5E97\u5230\u5E97",\u8CE3\u5BB6\u5B85\u914D:"\u5356\u5BB6\u5B85\u914D",\u5168\u5BB6:"\u5168\u5BB6","7-ELEVEN":"711",\u5B85\u914D\u901A:"\u5B85\u914D\u901A",\u9ED1\u8C93\u5B85\u6025\u4FBF:"\u9ED1\u732B",\u65B0\u7AF9\u7269\u6D41:"\u65B0\u7AF9\u7269\u6D41",\u5609\u91CC\u5FEB\u905E:"\u5609\u91CC\u5FEB\u9012",\u5E97\u5230\u5BB6\u5B85\u914D:"\u5E97\u5230\u5BB6\u5B85\u914D","\u8CE3\u5BB6\u5B85\u914D\uFF1A\u5927\u578B/\u8D85\u91CD\u7269\u54C1\u904B\u9001":"\u8CE3\u5BB6\u5B85\u914D\uFF1A\u5927\u578B/\u8D85\u91CD\u7269\u54C1\u904B\u9001"};class Yh{printShippingNumber(e,i){let n=e.map(u=>{var d;const{transportType:o,tenantryNo:f,shrimpOrderNo:m}=u,l=u.orderPackageList[0].shippingCarrier;return{sy:(d=Object.entries(Qh).find(([v,h])=>l.indexOf(v)!=-1))==null?void 0:d[1],headLogisticsSy:o,hhh:i.watermark?i.watermark:"",orderSn:m,checkOutTime:"",identifying:f+"  P13",ji:i.printJi,mo:i.printMo,virtualNumber:i.virtualNumber,recipients:i.recipients,recipientsMobile:i.recipientsMobile,recipientsAddress:i.recipientsAddress,senderName:i.senderName,senderMobile:i.senderMobile,senderAddress:i.senderAddress}}),r=[],a={documentID:"shippingNumber",contents:[{data:n[0],templateURL:Ct.links.TEMPLATEURL.shippingNumberUrl}]};r.push(a),this.printOperation(r)}printQrCodeShippingNumber(e,i){let n=e.map(u=>({orderSn:u.shrimpOrderNo,hhh:i.watermark||""})),r=[],a={documentID:"printShippingNumberQrcoder",contents:[{data:n[0],templateURL:Ct.links.TEMPLATEURL.shippingNumberQrcodeUrl}]};r.push(a),this.printOperation(r)}printBarCodeShippingNumber(e,i,n){let r=e.map(o=>{let f="xx";return{orderSn:o.shrimpOrderNo,hhh:i.watermark?i.watermark:"",shippingCarrier:f,invitationCode:n||"",headLogistics:o.transportType||""}}),a=Ct.links.TEMPLATEURL.shippingNumberBarCodeUrl;i.printTemplate==="2"?a=Ct.links.TEMPLATEURL.shippingNumberBarCodeUrl:i.printTemplate==="3"?a=Ct.links.TEMPLATEURL.shippingNumberBarCodeUrl02:i.printTemplate==="4"&&(a=Ct.links.TEMPLATEURL.shippingNumberBarCodeUrl03);const u=[{documentID:"printShippingNumberQrcoder",contents:[{data:r[0],templateURL:a}]}];this.printOperation(u)}async quickPrint2(e,i,n){return new Promise((r,a)=>{if(i){const u=[{documentID:e.id+Math.random(),contents:[{data:{url:i.replaceAll("&","&amp;")},templateURL:n}]}];La.doPrint(u,o=>{o=="no open"?we.warning({content:"\u60A8\u8FD8\u672A\u5B89\u88C5\u6216\u8005\u672A\u5F00\u542F\u83DC\u9E1F\u5B98\u65B9\u6253\u5370\u7EC4\u4EF6\uFF0C\u8BF7\u5148\u5B89\u88C5\u6216\u8005\u5F00\u542F\uFF01"}):o=="failed"?a("\u6253\u5370\u5931\u8D25"):o=="open"||o=="printed"&&r(!0)});return}a("\u6253\u5370\u5931\u8D25\uFF0C\u9762\u5355\u4FE1\u606F\u4E3A\u7A7A")})}printOperation(e){La.doPrint(e,i=>{if(i=="no open"){let n="\u60A8\u8FD8\u672A\u5B89\u88C5\u6216\u8005\u672A\u5F00\u542F\u83DC\u9E1F\u5B98\u65B9\u6253\u5370\u7EC4\u4EF6\uFF0C\u8BF7\u5148\u5B89\u88C5\u6216\u8005\u5F00\u542F\uFF01";this.printProcessing(n)}})}printProcessing(e){Te.confirm({title:"\u63D0\u793A",content:e,okText:"\u53BB\u4E0B\u8F7D",cancelText:"\u53BB\u5F00\u542F",onOk:()=>{window.open(Ct.links.CN.componentDownloadUrl,"_blank")}})}}const Zn=new Yh;var Ve;(function(t){t.YUANTONG="0",t.QR_CODE="1",t.BAR_CODE="2"})(Ve||(Ve={}));const Xn={[Ve.YUANTONG]:"\u5706\u901A\u901F\u8FD0",[Ve.QR_CODE]:"\u4E8C\u7EF4\u7801",[Ve.BAR_CODE]:"\u6761\u5F62\u7801"},z0=[{label:Xn[Ve.YUANTONG],value:Ve.YUANTONG},{label:Xn[Ve.QR_CODE],value:Ve.QR_CODE},{label:Xn[Ve.BAR_CODE],value:Ve.BAR_CODE}];function Jh(t){var e=document.createElement("canvas");return Zh(e,t,{height:60,displayValue:!1}),e.toDataURL("image/png")}function e0(t){var i,n;return`<!DOCTYPE html>
<html>
    <header>
        <style>
        @page{
            margin: 0.2cm;
        }
            table {width: 330px; margin-bottom: 10px; border-collapse: collapse;}
            table td {font-size: 12px;}
            table.goodsList {
                border-top: 1px solid #000;border-left: 1px solid #000;
            }
            table.goodsList td {
                border-bottom: 1px solid #000;border-right: 1px solid #000;
            }
        </style>
    </header>
    <body style="margin: 0px;">
        
    <div style="width: 350px; padding: 10px; ">
             <div style="min-height: 480px;border: 2px solid #000; padding: 0px 10px;">
                <h3 style="text-align: center;margin: 10px;">\u62E3\u8D27\u5355</h3>
                <div style="border-bottom: dashed 1px #000;"></div>
                <table >
                    <tr>
                      <td style="text-align: center;padding: 5px 0px 0px;">
                        <img width="200" src="${Jh(t.shrimpOrderNo)}"/> 
                       </td>
                    </tr>
                    <tr>
                        <td style="width: 200px; font-size: 14px;">
                            <div style="border-bottom: dashed 1px #000;"></div>
                            <div>\u8BA2\u5355\u7F16\u53F7\uFF1A<span style="font-size: 16px;">${t.shrimpOrderNo}</span></div>
                             <div>\u7528\u6237\u6807\u8BC6\uFF1A${t.tenantryNo}</div>
                            <div>\u6253\u5355\u4EBA\u5458\uFF1A${t.userName}</div>
                            <div>\u5C3E\u7A0B\u7269\u6D41\uFF1A${((n=(i=t.orderPackageList)==null?void 0:i[0])==null?void 0:n.shippingCarrier)||""}</div>
                            <div>\u5907&emsp;&emsp;\u6CE8\uFF1A</div>
                            <div>\u5E97\u94FA\u540D\u79F0\uFF1A</div>
                            <div>\u6253\u5370\u65F6\u95F4\uFF1A${Ne().format("YYYY/MM/DD HH:mm:ss")}</div>
                            <div style="border-bottom: dashed 1px #000;"></div>
                        </td>
                    </tr>
                </table>
                <div style="text-align: center;margin-bottom: 10px">
                    <span style="text-align: center; margin-bottom: 10px;font-size: 16px;font-weight: bold">\u96C6\u8FD0\u4FE1\u606F</span>
                    <span style="float: right;">\u5171${Ce.exports.sum(t.orderProductVOList.map(r=>r.quantity))}\u4EF6</span>
                </div>
                <table border="1" class="goodsList">
                    <tr>
                        <td style="width: 70px;font-weight: bold;">\u4ED3\u4F4D</td>
                        <td style="width: 80px;font-weight: bold;">\u5355\u53F7</td>
                        <td style="font-weight: bold;">\u89C4\u683C/SKU</td>
                        <td style="font-weight: bold;">\u6570\u91CF</td>
                    </tr>
                    
                     ${t.orderProductVOList.map(r=>{var a,u;return`
                        <tr>
                            <td>${r.freightSpaceName}</td>
                            <td>${t.shrimpOrderNo}</td>
                            <td>
                              <div>${r.specificationName||((a=r.logisticsProduct)==null?void 0:a.productName)}</div>
                              <div>${((u=r.logisticsProduct)==null?void 0:u.sku)||r.sku}</div>
                            </td>
                            <td>${r.quantity}</td>
                        </tr>  
                      `})}
                </table>
             </div>   
             <p style="page-break-after: always"></p>
        </div>

    </body>
</html>
  `}function t0(t){const{userInfo:e}=lo(n=>n);function i(){const n=e0(ue(q({},t),{userName:e.userName}));Oi({printable:n,type:"raw-html",base64:!1,targetStyles:["*"]})}return{printHandle:i}}async function Ma(t){const{orderItem:e,sendWarehouse:i}=t,n=await Zr.getEntrepotParams(i).then(a=>a.data.data),r={printTemplate:"0",watermark:n.shippingNoteWatermarking||"",printJi:n.shippingOrderSet||"",printMo:n.endOfShipment||"",virtualNumber:n.shippingOrderVirtualNumber||"",recipients:n.recipientName||"",recipientsMobile:n.recipientPhone||"",recipientsAddress:n.recipientAddress||"",senderName:n.senderName||"",senderMobile:n.senderPhone||"",senderAddress:n.senderAddress||"",warehouseId:i};if(n.shippingOrderPrintingTemplate===Ve.YUANTONG)Zn.printShippingNumber([e],r);else if(n.shippingOrderPrintingTemplate===Ve.QR_CODE)r.printTemplate="3",Zn.printQrCodeShippingNumber([e],r);else if(n.shippingOrderPrintingTemplate===Ve.BAR_CODE)r.printTemplate="4",Zn.printBarCodeShippingNumber([e],r,e.tenantryNo);else throw new Error("\u51FA\u8D27\u5355\u6253\u5370\u6A21\u7248\u4E0D\u5B58\u5728,\u8BF7\u68C0\u67E5\u4ED3\u5E93\u8BBE\u7F6E\uFF01")}function r0(t){const{orderItem:e,buttonProps:i,onSuccess:n}=t,[r,a]=se.exports.useState(!1),[u,o]=se.exports.useState([]),[f,m]=se.exports.useState([]),[l,c]=se.exports.useState([]),[s,d]=se.exports.useState(),v=_e(async _=>{if(s&&await Ee(()=>Be.saveOrder(ue(q({},Ce.exports.omit(s,["orderProductVOList","orderPackageList"])),{logisticsOrderProductVOList:s.orderProductVOList.map((w,A)=>ue(q({},w),{actualQuantity:u[A]||w.actualQuantity,holdStock:f[A]||w.holdStock,stockOutStatus:l[A]||w.stockOutStatus})),logisticsOrderPackageList:s.orderPackageList})),"\u4FDD\u5B58"),!_){a(!1),Fe.emit(Oe.refreshOrderPage);return}_&&e&&(await Ee(()=>_i.ScanOut({shrimpOrderNo:e.shrimpOrderNo,sendWarehouse:e.sendWarehouse})),Ma({orderItem:e,sendWarehouse:e.sendWarehouse||""}),a(!1),setTimeout(()=>{Fe.emit(Oe.focusScanInput)},200),n())},{manual:!0});se.exports.useEffect(()=>{r&&(e==null?void 0:e.orderProductVOList)&&(o(e.orderProductVOList.map(_=>_.actualQuantity)),m(e.orderProductVOList.map(_=>_.holdStock)))},[r]);const h=se.exports.useRef(),y=se.exports.useRef(),g=se.exports.useRef(_=>{console.log("\u6309\u94AE"),_.key==="Enter"&&(y.current.disabled?(console.log("\u4FDD\u5B58"),v.run()):(console.log("\u51FA\u5E93"),y.current.click()),_.preventDefault(),_.stopPropagation())});return se.exports.useEffect(()=>(r&&h.current&&(console.log("\u7ED1\u5B9A"),h.current.addEventListener("keydown",g.current)),()=>{var _;(_=h.current)==null||_.removeEventListener("keydown",g.current)}),[r,h.current]),re(ve,{children:[O(me,ue(q({onClick:()=>{a(!0)},type:"text"},i),{children:["1","2"].includes(e.orderStatus)?"\u5305\u88F9\u51FA\u5E93":"\u5305\u88F9\u8BE6\u60C5"})),O(Te,{style:{width:1200},title:O("div",{children:`\u5305\u88F9\u8BE6\u60C5 - \u8BA2\u5355\u7F16\u53F7\uFF1A${e==null?void 0:e.shrimpOrderNo}`}),visible:r,onCancel:()=>a(!1),footer:re(rt,{className:"ml-auto",children:[O(me,{onClick:()=>{a(!1)},children:"\u5173\u95ED"}),O(me,{type:"primary",loading:v.loading,onClick:()=>{v.run()},children:"\u4FDD\u5B58"}),O(qu,{ref:y,type:"primary",status:"danger",loading:v.loading,disabled:e.orderStatus!=="2"||[Kt.\u53D6\u6D88\u4E2D,Kt.\u5DF2\u53D6\u6D88].includes(e.shopeeStatus),onClick:()=>{v.run(!0)}})]}),children:re("div",{className:"",tabIndex:-1,ref:h,children:[O(Wr,{rowKey:"id",pagination:!1,scroll:{y:400},border:{wrapper:!0,cell:!0},data:e.orderProductVOList,columns:[{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:"0",width:450,render(_,w){var A;return O("div",{className:Me(["grid","h-[125px]"]),children:O(ci.Item.Meta,{className:"!items-center p-2 w-full",avatar:O(fr,{className:"size-24",src:(A=w.productImg)==null?void 0:A[0]}),title:`${w.productName.slice(0,25)}...`,description:re("div",{children:[O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u5355\u2003\u2003\u4EF7",value:w.unitPrice}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u6570\u2003\u2003\u91CF",value:w.quantity}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u89C4\u683C\u540D\u79F0",value:w.specificationName}),O(fe,{className:"!mb-0",labelClassName:"!text-sm !pr-1 !align-baseline",valueClassName:"!text-sm",label:"\u89C4\u683CSKU",value:w.sku})]})})},w.id)}},{title:"\u53D1\u8D27\u4FE1\u606F",dataIndex:"fhxx",width:250,render(_,w){return O(Zi,{item:w,orderStatus:e.orderStatus,sendWarehouse:e.sendWarehouse,orderId:e.id})}},{title:"\u6536\u8D27\u4FE1\u606F",dataIndex:"shxx",width:250,render(_,w,A){var B;return re("div",{children:[O(De.Item,{label:"\u5B9E\u9645\u6570\u91CF",labelCol:{span:8},wrapperCol:{span:16},colon:!0,children:O(Vr,{placeholder:"\u8BF7\u8F93\u5165",value:u[A]||w.actualQuantity,onChange:C=>{u[A]=C,o([...u])}})}),O(De.Item,{label:"\u7F3A\u8D27\u6253\u5305",labelCol:{span:8},wrapperCol:{span:16},colon:!0,children:O(li,{checked:(B=l[A])!=null?B:w.stockOutStatus,onChange:C=>{l[A]=C,c([...l])}})})]})}}]}),re(Et.Row,{className:"mt-4",children:[O(Et.Col,{span:12,children:re("div",{children:[O(fe,{label:"\u5356\u5BB6\u5907\u6CE8",value:O("span",{className:"text-red-700 font-bold",children:e.remark})}),O(fe,{label:"\u6253\u5305\u8981\u6C42",value:"\u6682\u65E0\u8981\u6C42"}),O(fe,{label:"\u6E29\u99A8\u63D0\u793A",value:O("span",{className:"text-red-700 font-bold",children:O(qr,{dictCode:"tips",value:"xpddd"})})})]})}),O(Et.Col,{span:12,children:O("div",{className:"flex-1 border-l",children:re("div",{className:"flex",children:[O(ut,{className:"w-[300px]",size:"small",span:24,initialValues:ue(q({},Ce.exports.pick(e,["parcelType","parcelWeight","parcelLength","parcelWide","parcelHigh"])),{transportType:e.transportType||"KY",parcelType:e.parcelType||"0"}),onValuesChange:_=>{d(q(q({},e),_))},formItemConfigList:[{schema:{label:"\u8FD0\u8F93\u7C7B\u578B",field:"transportType"},control:"dictSelector",controlProps:{dictCode:"transport_type"}},{schema:{label:"\u5305\u88F9\u7C7B\u578B",field:"parcelType"},control:"dictSelector",controlProps:{dictCode:"parcel_type"}},{schema:{label:"\u5305\u88F9\u91CD\u91CF",field:"parcelWeight"},control:"number"},{schema:{label:"\u5305\u88F9\u957F\u5EA6",field:"parcelLength"},control:"number"},{schema:{label:"\u5305\u88F9\u5BBD\u5EA6",field:"parcelWide"},control:"number"},{schema:{label:"\u5305\u88F9\u9AD8\u5EA6",field:"parcelHigh"},control:"number"}]}),O("div",{className:"flex-1 border-l px-2",children:O(co,{column:1,colon:!0,data:[{label:"\u57FA\u672C\u8D39\u7528\uFF1A",value:"1"},{label:"\u5934\u7A0B\u8D39\u7528\uFF1A",value:e.firstLegCost},{label:"\u9644\u52A0\u8D39\u7528\uFF1A",value:e.appendCost},{label:"\u603B\u8D39\u7528\uFF1A",value:e.totalCost}],style:{marginBottom:20},labelStyle:{paddingRight:36}})})]})})})]})]})})]})}var Mr;(function(t){t[t.PICKING=0]="PICKING",t[t.SHIPPING=1]="SHIPPING"})(Mr||(Mr={}));var $a=t=>{const{orderItem:e,buttonProps:i,printType:n,children:r}=t,{printHandle:a}=t0(e),{run:u,loading:o}=_e(async()=>{try{await Ma({orderItem:e,sendWarehouse:e.sendWarehouse||""}),we.success("\u6253\u5370\u6210\u529F")}catch(m){we.error(m.message)}},{manual:!0});function f(){n===0?a():n===1&&u()}return O(ve,{children:O(me,ue(q({type:"text",loading:o},i),{onClick:f,children:r}))})};function n0(t){const{buttonProps:e,id:i}=t,[n,r]=se.exports.useState(!1),[a]=De.useForm(),{run:u,loading:o}=_e(async f=>{await Ee(()=>Be.updateRemark({orderId:i,remark:f.remark}),"\u4FEE\u6539\u4ED3\u5E93\u5907\u6CE8"),Fe.emit(Oe.refreshOrderPage)},{manual:!0});return re("div",{children:[O(me,ue(q({type:"primary"},e),{onClick:()=>r(!0),children:"\u4ED3\u5E93\u5907\u6CE8"})),O(Te,{title:"\u64CD\u4F5C\u8BB0\u5F55",visible:n,onCancel:()=>r(!1),cancelText:"\u5173\u95ED",unmountOnExit:!0,onOk:async()=>{const f=a.getFieldValue("remark");u({remark:f!=null?f:""}),r(!1),a.resetFields()},confirmLoading:o,children:O(De,{form:a,children:O(De.Item,{label:"\u4ED3\u5E93\u5907\u6CE8",field:"remark",children:O(_t,{placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u5907\u6CE8"})})})})]})}function i0(t){const e=Math.floor(t/86400),i=Math.floor(t%86400/3600),n=Math.floor(t%3600/60),r=t%60;let a="";return e>0&&(a+=`${e}\u5929`),(i>0||e>0)&&(a+=`${i.toString().padStart(2,"0")}\u5C0F\u65F6`),(n>0||i>0||e>0)&&(a+=`${n.toString().padStart(2,"0")}\u5206`),a+=`${r.toString().padStart(2,"0")}\u79D2`,a}const a0=({targetTime:t,onComplete:e,interval:i=1e3,format:n=i0,showDays:r=!0})=>{const[a,u]=se.exports.useState({days:0,hours:0,minutes:0,seconds:0,totalSeconds:0}),o=se.exports.useRef(null);return se.exports.useEffect(()=>{const f=()=>{const l=Ne(),c=Ne(t),s=Math.max(0,c.diff(l,"second")),d=Math.floor(s/86400),v=Math.floor(s%86400/3600),h=Math.floor(s%3600/60),y=s%60;return{days:d,hours:v,minutes:h,seconds:y,totalSeconds:s}},m=f();return u(m),m.totalSeconds>0&&(o.current=setInterval(()=>{const l=f();u(l),l.totalSeconds<=0&&(o.current&&(clearInterval(o.current),o.current=null),e&&e())},i)),()=>{o.current&&clearInterval(o.current)}},[t,i,e]),r?O(ve,{children:n(a.totalSeconds)}):(Math.floor(a.totalSeconds/3600),Math.floor(a.totalSeconds%3600/60),a.totalSeconds%60,O(ve,{children:n(a.totalSeconds)}))};var o0=({buttonProps:t})=>{const[e]=De.useForm(),[i,n]=se.exports.useState(!1),[r,a]=se.exports.useState([]),{run:u,loading:o}=_e(async()=>{const{storeId:f,orderUpdateTime:m}=await e.validate();if(!f.length)return we.error("\u672A\u83B7\u53D6\u5230\u5E97\u94FA\u4FE1\u606F");try{const l=await Promise.race([at.syncOrder({orderUpdateStartTime:Ne(m[0]).format("YYYY-MM-DD HH:mm:ss"),orderUpdateEndTime:Ne(m[1]).format("YYYY-MM-DD HH:mm:ss"),storeId:f}),So(2e3)]);if((l==null?void 0:l.data)&&l.data.code!==gi)return Te.error({title:"\u64CD\u4F5C\u5931\u8D25",content:l.data.msg});n(!1),Te.success({title:"\u64CD\u4F5C\u6210\u529F",content:"\u540C\u6B65\u4EFB\u52A1\u5DF2\u63D0\u4EA4\uFF0C\u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762\u67E5\u770B"})}catch(l){we.error(l.message)}},{manual:!0});return re(ve,{children:[O(me,ue(q({loading:o,icon:O(fo,{}),type:"outline",onClick:()=>{n(!0)}},t),{children:"\u540C\u6B65\u8BA2\u5355"})),O(Te,{title:"\u540C\u6B65\u8BA2\u5355",visible:i,style:{width:600},onCancel:()=>{n(!1)},confirmLoading:o,onConfirm:()=>{u()},children:O(ut,{form:e,span:24,formItemConfigList:[{schema:{label:"\u6240\u5C5E\u5E97\u94FA",field:"storeId",required:!0},control:"shopSelector",controlProps:{mode:"multiple"}},{schema:{label:"\u65F6\u95F4\u8303\u56F4",field:"orderUpdateTime",required:!0},control:"datePickerRange",controlProps:{onSelect:(f,m)=>{a(m)},onVisibleChange:f=>{f||a([])},disabledDate:f=>{if(r&&r.length){const m=r[0]&&Math.abs(f.diff(r[0],"day"))>14;return r[1]&&Math.abs(r[1].diff(f,"day"))>14||m}return!1},clearRangeOnReselect:!0,shortcuts:Bo}}]})})]})},Ua={exports:{}};(function(t,e){(function(i,n){n()})(ct,function(){function i(m,l){return typeof l=="undefined"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function n(m,l,c){var s=new XMLHttpRequest;s.open("GET",m),s.responseType="blob",s.onload=function(){f(s.response,l,c)},s.onerror=function(){console.error("could not download file")},s.send()}function r(m){var l=new XMLHttpRequest;l.open("HEAD",m,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(l)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ct=="object"&&ct.global===ct?ct:void 0,o=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(m,l,c){var s=u.URL||u.webkitURL,d=document.createElement("a");l=l||m.name||"download",d.download=l,d.rel="noopener",typeof m=="string"?(d.href=m,d.origin===location.origin?a(d):r(d.href)?n(m,l,c):a(d,d.target="_blank")):(d.href=s.createObjectURL(m),setTimeout(function(){s.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(m,l,c){if(l=l||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(i(m,c),l);else if(r(m))n(m,l,c);else{var s=document.createElement("a");s.href=m,s.target="_blank",setTimeout(function(){a(s)})}}:function(m,l,c,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof m=="string")return n(m,l,c);var d=m.type==="application/octet-stream",v=/constructor/i.test(u.HTMLElement)||u.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||d&&v||o)&&typeof FileReader!="undefined"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=h?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=w:location=w,s=null},y.readAsDataURL(m)}else{var g=u.URL||u.webkitURL,_=g.createObjectURL(m);s?s.location=_:location.href=_,s=null,setTimeout(function(){g.revokeObjectURL(_)},4e4)}});u.saveAs=f.saveAs=f,t.exports=f})})(Ua);var u0=t=>{var d,v,h,y;const{selectIds:e,getPageQuery:i}=t,[n,r]=se.exports.useState(!1),[a,u]=se.exports.useState(0),o=se.exports.useMemo(()=>`\u6279\u91CF\u4E0B\u8F7D\u9762\u5355 ${e.length?`(${e.length}\u4E2A)`:""}`,[e.length]),f=_e(()=>Be.countSheetFile(i({isBindSelect:!0})).then(g=>{const _=g.data.data;if(_.count===_.total){we.error("\u6CA1\u6709\u53EF\u4E0B\u8F7D\u7684\u9762\u5355\uFF0C\u8BF7\u68C0\u67E5\u76F8\u5173\u4FE1\u606F\uFF01");return}return r(!0),g.data.data}),{manual:!0}),{data:m,loading:l,run:c,mutate:s}=_e(async()=>{const _=(await Be.getDownloadSheetFile(i({isBindSelect:!0}))).data.data.list.map(w=>w.documentUrl);return Go(_,w=>{u(w.percentage)}).then(w=>{var A;return((A=w==null?void 0:w.results)==null?void 0:A.failed)||(r(!1),we.success({duration:3e3,content:"\u4E0B\u8F7D\u6210\u529F"})),w})},{manual:!0});return re(ve,{children:[O(me,{type:"outline",loading:f.loading,onClick:async()=>{s(null),f.mutate(null),f.run()},children:o}),O(Te,{title:o,onOk:()=>{c()},okText:l?"\u4E0B\u8F7D\u4E2D":`\u786E\u8BA4\u4E0B\u8F7D ${((d=f.data)==null?void 0:d.total)-((v=f.data)==null?void 0:v.count)} \u6761`,confirmLoading:l,visible:n,onCancel:()=>{r(!1)},cancelText:"\u5173\u95ED",children:l||m?re("div",{children:[re("div",{className:"flex gap-2",children:[O("span",{children:"\u4E0B\u8F7D\u8FDB\u5EA6\uFF1A"}),O(ho,{className:"flex-1",percent:a,status:"success",animation:!0,width:300})]}),((h=m==null?void 0:m.results)==null?void 0:h.failed)?O(po,{className:"mt-4",showIcon:!0,type:"error",content:`\u4E0B\u8F7D\u5931\u8D25 ${m.results.failed} \u4E2A`}):null]}):O("div",{children:((y=f.data)==null?void 0:y.count)?`\u786E\u8BA4\u4E0B\u8F7D\u5168\u90E8\u9762\u5355\uFF1F\u5176\u4E2D\u6709 ${f.data.count} \u6761\u6570\u636E\u6682\u672A\u83B7\u53D6\u5230\u9762\u5355\uFF0C\u662F\u5426\u7EE7\u7EED\u4E0B\u8F7D\uFF1F`:"\u786E\u8BA4\u4E0B\u8F7D\u5168\u90E8\u9762\u5355\uFF1F"})})]})};function s0(t){const{data:e,selectIds:i,activeTab:n,dictCode:r,getPageQuery:a}=t,u=_e(async()=>{const c=a({isBindSelect:!0}),s=await Be.exportOrderList(c),d=s.headers["content-disposition"];let v="\u8BA2\u5355\u5BFC\u51FA.xlsx";if(d){const h=d.match(/filename="?([^"]+)"?/);h&&h[1]&&(v=decodeURIComponent(h[1]))}Ua.exports.saveAs(s.data,v),Te.success({content:"\u8BA2\u5355\u5BFC\u51FA\u6210\u529F\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536\uFF01",title:"\u6E29\u99A8\u63D0\u793A"})},{manual:!0}),o=_e(async()=>{await Ee(()=>{const c=Ce.exports.chunk(i,20).map(s=>()=>_i.outList({orderIdList:s}));return vi(c)},"\u51FA\u5E93"),Fe.emit(Oe.refreshOrderPage)},{manual:!0}),f=_e(async c=>{const s=e.list.filter(y=>i.includes(y.id)),d=Ce.exports.uniq(s.map(y=>y.sendWarehouse)),v=(await Promise.all(d.map(y=>Zr.getSenderAll({entrepotId:y}).then(g=>({[y]:g}))))).reduce((y,g)=>q(q({},y),g),{}),h=c.filter(y=>{var g;return!((g=e.list.find(_=>_.id===y))==null?void 0:g.shippingTime)}).map(y=>{var g,_;return{orderId:y,senderRealName:((_=v[(g=e.list.find(w=>w.id===y))==null?void 0:g.sendWarehouse])==null?void 0:_.default)||eu}});if(!h.length)return we.info("\u5DF2\u5168\u90E8\u51FA\u8D27\u6210\u529F");await Ee(()=>{const y=Ce.exports.chunk(h,20).map(g=>()=>Be.shipmentBatch(g));return vi(y)},"\u6279\u91CF\u51FA\u8D27").then(y=>{var _,w;const g=(((w=(_=y.data)==null?void 0:_.data)==null?void 0:w.list)||[]).map(A=>{var B;return{msg:A.msg,orderId:((B=e.list.find(C=>C.id===A.orderId))==null?void 0:B.shrimpOrderNo)||"\u83B7\u53D6\u5931\u8D25"}});g.length&&Te.confirm({noticeType:"warning",title:g.length!==h.length?"\u90E8\u5206\u8BA2\u5355\u51FA\u8D27\u5931\u8D25":"\u6279\u91CF\u51FA\u8D27\u5931\u8D25",content:g.map(A=>`${A.msg}\uFF0C\u8BA2\u5355\u7F16\u53F7\uFF1A${A.orderId}`).join(`
`)})}),Fe.emit(Oe.refreshOrderPage)},{manual:!0}),m=_e(async()=>Ee(()=>Be.overseasWarehouseReturnDestroyBatch(i),"\u9500\u6BC1").then(()=>{Fe.emit(Oe.refreshOrderPage)}),{manual:!0}),l=r!==Ge.OUT_ORDER_STATUS;return re(rt,{size:8,children:[O(ri,{title:"\u786E\u8BA4\u5BFC\u51FA\u8BA2\u5355\uFF1F",onOk:()=>u.run(),okButtonProps:{loading:u.loading},children:re(me,{type:"outline",icon:O(di,{}),loading:u.loading,children:["\u5BFC\u51FA\u8BA2\u5355"," ",i.length?`(${i.length}\u4E2A)`:""]})}),l?O(me,{type:"outline",loading:o.loading,disabled:n>=Bi.\u5DF2\u51FA\u5E93,onClick:async()=>{if(!i.length)return we.error("\u8BF7\u9009\u62E9\u8BA2\u5355");await nt({content:`\u786E\u5B9A\u51FA\u5E93 ${i.length} \u4E2A\u8BA2\u5355\uFF1F`,okButtonProps:{status:"success"}}),o.run()},children:"\u6279\u91CF\u51FA\u5E93"}):null,O(Ai,{ids:i,buttonProps:{type:"outline",status:"default"},children:"\u6279\u91CF\u66F4\u65B0\u8BA2\u5355"}),l?O(u0,{getPageQuery:a,selectIds:i}):null,l?O(me,{type:"outline",loading:f.loading,disabled:n!==Bi.\u5DF2\u51FA\u5E93,onClick:async()=>{if(!i.length)return we.error("\u8BF7\u9009\u62E9\u8BA2\u5355");const c=e.list.filter(v=>Di.some(h=>{var y,g;return(v.shippingCarrier||((g=(y=v.orderPackageList)==null?void 0:y[0])==null?void 0:g.shippingCarrier)).includes(h)})).map(v=>v.id),s=`\u53EA\u6709${Di.join("\u3001")}\u7684\u8BA2\u5355\u624D\u80FD\u6279\u91CF\u51FA\u8D27`;if(!c.length){we.error(s);return}const d=i.filter(v=>c.includes(v));d.length?i.length!==d.length?await nt({content:`${s}\uFF0C\u5176\u4ED6\u627F\u8FD0\u5546\u7684\u8BA2\u5355\u8BF7\u624B\u52A8\u5355\u4E2A\u51FA\u8D27\uFF01`,okButtonProps:{status:"success"}}).then(()=>{f.run(d)}):f.run(d):we.error("\u4E0D\u7B26\u5408\u51FA\u8D27\u6761\u4EF6\uFF0C\u8BF7\u68C0\u67E5\u8BA2\u5355\u72B6\u6001\u548C\u627F\u8FD0\u5546\u4FE1\u606F\uFF01")},children:"\u6279\u91CF\u51FA\u8D27"}):null,l?null:O(me,{type:"outline",status:"danger",loading:m.loading,onClick:async()=>{if(!i.length)return we.error("\u8BF7\u9009\u62E9\u8BA2\u5355");const c=e.list.filter(s=>i.includes(s.id)&&Ne().valueOf()<Ne(s.overseasWarehouseDelistingTime).valueOf());await nt({content:c.length>0?re("div",{children:[re("div",{children:["\u4EE5\u4E0B\u8BA2\u5355\u9000\u4EF6\u672A\u8FC7\u671F\uFF0C\u8BF7\u786E\u8BA4\u662F\u5426\u9500\u6BC1\u9009\u4E2D\u7684",i.length,"\u4E2A\u8BA2\u5355\uFF1F"]}),O("div",{children:c.map(s=>re("div",{className:"mb-2",children:[re("div",{children:[O("span",{children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),O(wt.Text,{copyable:!0,children:s.shrimpOrderNo})]}),re("div",{children:[O("span",{children:"\u4E0B\u67B6\u65F6\u95F4\uFF1A"}),O("span",{children:s.overseasWarehouseDelistingTime})]})]}))})]}):`\u786E\u8BA4\u9500\u6BC1\u9009\u4E2D\u7684${i.length}\u4E2A\u8BA2\u5355\uFF1F`,onOk:()=>{m.run()}})},children:"\u6279\u91CF\u9500\u6BC1"})]})}const za=["","green","orangered","gold","red","blue","arcoblue","purple","pinkpurple","magenta","gray","lime","orange"],l0=["\u5168\u90E8","\u5DF2\u88C5\u8239","\u5DF2\u5B8C\u6210","\u5DF2\u53D6\u6D88","\u5DF2\u5173\u95ED","\u5F02\u5E38\u6401\u7F6E","\u5DF2\u4EA4\u8FD0"];var Ie;(function(t){t.SHOPEE="shopee",t.PACK_ORDER="pack_order",t.PENDING="pending",t.OUT_ORDER_STATUS="out_order_status"})(Ie||(Ie={}));var Ge;(function(t){t.SHOPEE="shopee_status",t.PACK_ORDER="order_status",t.PENDING="order_pending_status",t.OUT_ORDER_STATUS="out_order_status"})(Ge||(Ge={}));const ir="-1";var c0=t=>{var F;const{type:e}=t,i=mo(),n={[Ie.SHOPEE]:Ge.SHOPEE,[Ie.PACK_ORDER]:Ge.PACK_ORDER,[Ie.PENDING]:Ge.PENDING,[Ie.OUT_ORDER_STATUS]:Ge.OUT_ORDER_STATUS}[e],[r,a]=jr(location.pathname,{defaultValue:ir}),[u,o]=se.exports.useState(),[f,m]=se.exports.useState([]),[l,c]=jr(location.pathname+"-sortType",{defaultValue:2}),[s,d,v]=go({selectLogisticsOrderVO:{},selectOrderProductVO:{}}),[h]=De.useForm();function y(E){d(q(q({},s),E))}const{data:g}=Kr({dictCode:n,displayName:""});r===void 0&&(g==null?void 0:g.length)&&a((F=g[0])==null?void 0:F.value);function _({otherQuery:E={},isBindSelect:T,isCount:M}){const z=E,{selectLogisticsOrderVO:S={}}=z,k=ft(z,["selectLogisticsOrderVO"]);let p,R;e===Ie.PACK_ORDER&&r!==ir&&(p=r);let D;M||(D=0,r===tu&&(p=void 0,D=1)),e===Ie.OUT_ORDER_STATUS&&(R=r,D=void 0);const x=Gr(q(ue(q(q(q(q(q({sortType:l},Ce.exports.omit(s.selectLogisticsOrderVO,["createdTimes","stockRemovalTimes","packTimes"])),hr(s.selectLogisticsOrderVO.packTimes,"packStartTime","packEndTime")),hr(s.selectLogisticsOrderVO.createdTimes,"createStartTime","createEndTime")),hr(s.selectLogisticsOrderVO.createdTimes,"createStartTime","createEndTime")),hr(s.selectLogisticsOrderVO.stockRemovalTimes,"stockRemovalStartTime","stockRemovalEndTime")),{orderStatus:p,returnStatus:R,abeyanceStatus:D}),f.length&&T?{shrimpOrderNo:w.list.filter($=>f.includes($.id)).map($=>$.shrimpOrderNo).join(",")}:{}),["shrimpOrderNo","trackingNumber"]);switch(e){case Ie.PACK_ORDER:x.whetherPack=!0;break;case Ie.PENDING:x.handle=!0;break;case Ie.OUT_ORDER_STATUS:x.whetherPack=!0;break;case Ie.SHOPEE:x.abeyanceStatus=void 0,x.shrimpStatus=r===ir?null:r,x.storeFlag=!0;break}const G=Gr(q({},s.selectOrderProductVO),["trackingNo"]),L=Gr(q({},s.selectLogisticsVO),["trackingNumber"]);return q(ue(q({},s),{selectOrderProductVO:G,selectLogisticsOrderVO:x,selectLogisticsVO:L}),k)}const{data:w,run:A,pagination:B,loading:C,refresh:N}=vo(async(E={pageSize:10,current:1})=>{if(Fe.emit(Oe.clearSelectOrderList),!(g==null?void 0:g.length))return null;const T=_({otherQuery:{pageNum:(E==null?void 0:E.current)||B.current,pageSize:(E==null?void 0:E.pageSize)||B.pageSize}}),M={[Ie.OUT_ORDER_STATUS]:Be.overseasWarehouseReturnList},S=(...x)=>(M[e]||at.getList)(...x).then(G=>{if(e===Ie.PENDING){const L=G.data.data.total;i({type:"set-count-map",payload:{countMap:{[Fo.CLIENT_ORDER_PENDING]:L}}}),o({"0":L})}return G}),k=ue(q({},Ce.exports.omit(T,["selectLogisticsOrderVO"])),{selectLogisticsOrderVO:q({},Ce.exports.omit(T.selectLogisticsOrderVO,["orderStatus","abeyanceStatus","shrimpStatus","returnStatus"]))}),R={[Ie.OUT_ORDER_STATUS]:Be.overseasWarehouseReturnCount,[Ie.PACK_ORDER]:at.getPackCount}[e]||at.getShopOrderCount,[D]=await Promise.all([S(T),...e===Ie.PENDING?[]:[R(k).then(x=>{o(ue(q({},x.data.data),{[ir]:Ce.exports.sum(Object.values(x.data.data))}))})]]);return D.data.data},{defaultPageSize:10,defaultCurrent:1,manual:!1,debounceWait:200,refreshDeps:[r,g,l]});return se.exports.useEffect(()=>{console.log(s),A({current:1,pageSize:10})},[s]),yi(Oe.refreshOrderPage,()=>{N()}),re("div",{className:"bg-white p-4",children:[O(ut,{form:h,size:"small",initialValues:{},formItemConfigList:Ho({type:e}),onValuesChange:(E,T)=>{y(T)},onSubmit:E=>{console.log(E)}}),re("div",{className:"flex items-center py-6 pr-2",children:[re(rt,{size:20,className:"",children:[O(me,{type:"default",loading:C,icon:O(ai,{}),onClick:()=>{h.resetFields(),v(),setTimeout(()=>{B.changeCurrent(1)},0)},children:"\u91CD\u7F6E"}),O(me,{type:"primary",icon:O(oi,{}),loading:C,onClick:()=>A({current:1,pageSize:10}),children:"\u67E5\u8BE2"})]}),O(yo,{className:"mx-8",type:"vertical"}),Ze()?O(s0,{data:w,selectIds:f,activeTab:r,dictCode:n,getPageQuery:_}):re(rt,{size:8,children:[O(o0,{}),O(me,{type:"outline",icon:O(di,{}),children:"\u5BFC\u51FA\u8BA2\u5355"})]}),f.length?re(Le,{className:"ml-2",checked:!0,color:"pinkpurple",children:["\u5DF2\u9009\u4E2D"," ",f.length," ","\u4E2A\u8BA2\u5355"]}):null]}),O(fi,{lazyload:!0,className:"mb-4",activeTab:r,onChange:E=>a(E),extra:O(ve,{children:O(Pt.Group,{type:"button",value:l,onChange:E=>{c(E)},options:[{label:"\u6309\u6700\u65B0\u8BA2\u5355\u6392\u5E8F",value:2},{label:"\u6309\u6253\u5305\u65F6\u95F4\u6392\u5E8F",value:0},{label:"\u6309\u7D27\u6025\u7A0B\u5EA6\u6392\u5E8F",value:1}]})}),children:[...e!==Ie.PENDING?[{label:"\u5168\u90E8",value:ir}]:[],...g||[]].map((E,T)=>O(fi.TabPane,{title:O(bo,{className:"px-[5px]",style:{"--badge-color":l0.includes(E.label)?"var(--gray-4)":"var(--danger-6)"},offset:[15,-5],count:u==null?void 0:u[E.value],maxCount:9999,children:O("span",{children:E.label})})},E.value))}),O(Ha,{dictCode:n,run:A,data:w,loading:C,pagination:B,onSelect:E=>{m(E)}})]})},j0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get OrderPageType(){return Ie},get OrderPageDict(){return Ge},default:c0});function d0(t){const{orderItem:e,dictCode:i}=t;let n=O(ve,{});return i===Ge.OUT_ORDER_STATUS?e.returnStatus==="2"?n=O(ve,{children:"-"}):n=re(ve,{children:[O(me,{status:"danger",onClick:()=>nt({content:"\u786E\u5B9A\u8981\u9500\u6BC1\u9000\u4EF6\u5355\u5417\uFF1F",onOk(){return Ee(()=>Be.overseasWarehouseReturnDestroy(e.id),"\u9500\u6BC1\u9000\u4EF6\u5355").then(()=>Fe.emit(Oe.refreshOrderPage))}}),children:"\u9500\u6BC1"}),Ze()?O(me,{status:"warning",onClick:()=>nt({content:"\u786E\u5B9A\u8981\u64A4\u9500\u9000\u4EF6\u5417\uFF1F",onOk(){return Ee(()=>Be.overseasWarehouseReturnRevocation(e.id),"\u64A4\u9500\u9000\u4EF6").then(()=>Fe.emit(Oe.refreshOrderPage))}}),children:"\u64A4\u9500\u9000\u4EF6"}):O(Gu,{orderItem:e})]}):n=re(ve,{children:[O(r0,{buttonProps:{size:"small"},orderItem:e,onSuccess:()=>{Fe.emit(Oe.refreshOrderPage)}}),O($a,{orderItem:e,printType:Mr.SHIPPING,children:"\u6253\u5370\u51FA\u8D27\u5355"}),O($a,{orderItem:e,printType:Mr.PICKING,children:"\u6253\u5370\u6361\u8D27\u5355"}),O(Ei,{buttonProps:{type:"text",icon:null},id:e.id}),O(Ku,{id:e.id,abeyanceStatus:e.abeyanceStatus}),O(me,{type:"text",size:"small",disabled:["5","6"].includes(e.orderStatus),onClick:async()=>{await nt({content:"\u786E\u5B9A\u8981\u53D6\u6D88\u6253\u5305\u5417\uFF1F",onOk(){return Ee(()=>Be.cancel([e.id]),"\u53D6\u6D88\u6253\u5305")}}),Fe.emit(Oe.refreshOrderPage)},children:"\u53D6\u6D88\u8BA2\u5355"}),Ze()&&O(n0,{id:e.id,buttonProps:{type:"text",size:"small"}})]}),re("div",{className:"h-full p-2 flex justify-center flex-col",children:[i===Ge.OUT_ORDER_STATUS&&Ze()&&re("div",{className:"mb-4",children:[O("div",{children:"\u4E0B\u67B6\u5012\u8BA1\u65F6\uFF1A"}),O(a0,{targetTime:e.overseasWarehouseDelistingTime})]}),O(rt,{direction:"vertical",size:4,children:n})]})}const f0=t=>({sender_real_name:{schema:{label:"\u5BC4\u4EF6\u4EBA\u59D3\u540D",field:"senderRealName",required:!0},control:"select",controlProps:{options:t}},tracking_no:{schema:{label:"\u5FEB\u9012\u5355\u53F7",field:"trackingNo",required:!0}}});var h0=t=>{var _;const g=t,{orderItem:e,buttonProps:i,onSuccess:n}=g,r=ft(g,["orderItem","buttonProps","onSuccess"]),[a,u]=se.exports.useState([]),[o,f]=se.exports.useState([]),[m,l]=se.exports.useState({}),c=se.exports.useRef({}),[s]=De.useForm(),d=async()=>{const w=await s.validate();if(c.current&&o.length){const A=ue(q({},c.current),{pickUp:JSON.stringify({address_list:[o.find(C=>C.address_id===w.addressList)]})}),B=await Be.updateParameter(A);if(B.data.code!==gi){we.error(B.data.msg||"\u66F4\u65B0\u6536\u4EF6\u6570\u636E\u5931\u8D25\uFF01");return}}await Ee(()=>Be.shipment(ue(q({},w),{orderId:e.id})),"\u51FA\u8D27"),Fe.emit(Oe.refreshOrderPage),u([]),c.current=null,f([])},{loading:v,run:h}=_e(d,{manual:!0}),y=_e(async()=>{var E,T,M,S,k,p,R;const[w,A]=await Promise.all([Be.getShippingParameter(e.id),Zr.getSenderAll({entrepotId:e.sendWarehouse})]);l({senderRealName:A.default});const B=(M=(T=(E=w==null?void 0:w.data)==null?void 0:E.data)==null?void 0:T.infoNeeded)==null?void 0:M.dropoff,C=f0(A.options),N=(B==null?void 0:B.map(D=>C[D]))||[],F=((p=JSON.parse(((k=(S=w==null?void 0:w.data)==null?void 0:S.data)==null?void 0:k.pickUp)||"{}"))==null?void 0:p.address_list)||[];if(F.length&&(c.current=(R=w==null?void 0:w.data)==null?void 0:R.data,f(F),N.push({schema:{label:"\u5BC4\u4EF6\u5730\u5740",field:"addressList",required:!0},control:"select",controlProps:{options:F.map(D=>({label:`${D.state} ${D.city} ${D.address}`,value:D.address_id}))}})),u(N),N.length)_o.success({title:"\u901F\u8FD0\u5B9D\u6E29\u99A8\u63D0\u793A",content:"\u76F8\u5173\u4FE1\u606F\u83B7\u53D6\u6210\u529F\uFF0C\u8BF7\u624B\u52A8\u9009\u62E9\uFF01",duration:8e3});else return d()},{manual:!0});return re(ve,{children:[O(me,ue(q({type:"text",status:"success",loading:y.loading,disabled:!!((_=e==null?void 0:e.orderPackageList)==null?void 0:_.some(w=>w.documentUrl)),onClick:()=>{y.run()}},i),{children:"\u5B89\u6392\u51FA\u8D27"})),O(Te,{title:"\u7533\u8BF7\u5BC4\u4EF6\u7F16\u53F7",visible:!!a.length,style:{width:700},onCancel:()=>{u([]),c.current=null,f([])},maskClosable:!1,unmountOnExit:!0,confirmLoading:v,onOk:async()=>{h()},children:O(ut,{span:24,form:s,initialValues:m,formItemConfigList:a})})]})},p0=({orderItem:t})=>{var a,u,o,f,m,l;const[e,i]=se.exports.useState(!1),n=_e(async()=>{var c;return((c=n.data)==null?void 0:c.length)?(i(!0),n.data):qt.getOrderTrack(t.id).then(s=>{var d,v;return(v=(d=s.data)==null?void 0:d.data)==null?void 0:v.trackingInfoItemVOList}).then(s=>(i(!0),s)).catch(s=>(we.error("\u67E5\u770B\u5931\u8D25\uFF0C\u6682\u65E0\u7269\u6D41\u8DDF\u8E2A\u4FE1\u606F"),[]))},{manual:!0}),r=((u=(a=t==null?void 0:t.orderPackageList)==null?void 0:a[0])==null?void 0:u.trackingNumber)||((f=(o=t==null?void 0:t.logisticsOrderPackageList)==null?void 0:o[0])==null?void 0:f.trackingNumber);return r?re(ve,{children:[O(wt.Text,{copyable:{text:r},children:O(dr,{disabled:n.loading,className:"!inline",onClick:()=>{n.run()},children:r})}),O(Fi,{orderItem:t}),O(Te,{confirmLoading:n.loading,title:"\u7269\u6D41\u4FE1\u606F",visible:e,onCancel:()=>{i(!1)},hideCancel:!0,onConfirm:()=>{i(!1)},children:((m=n.data)==null?void 0:m.length)?O(lr,{children:(l=n.data)==null?void 0:l.map(c=>O(lr.Item,{label:c.updateTime,children:c.description},c.updateTime))}):O(Ur,{description:"\u6682\u65E0\u7269\u6D41\u8DDF\u8E2A\u4FE1\u606F"})})]}):Ze()&&t.warehouseDeliveryTime&&t.shopeeStatus!==Kt.\u5DF2\u88C5\u8239?t.shippingTime&&Ne().diff(Ne(t.shippingTime),"minute")<10&&t.createType==="0"?re("span",{children:[O(ht,{size:13}),O(wt.Text,{className:"ml-2 text-sm",type:"secondary",children:"\u83B7\u53D6\u9762\u5355\u4E2D..."})]}):O(h0,{orderItem:t,sendWarehouse:t.sendWarehouse,shrimpOrderNo:t.shrimpOrderNo,onSuccess:()=>{Fe.emit(Oe.refreshOrderPage)},buttonProps:{icon:O(Eo,{}),size:"small",type:"text",status:"default"}}):O(ve,{children:"-"})};function ja(t){const{dictCode:e}=t,i=wo(),n=pt()&&e===Ge.OUT_ORDER_STATUS||Ze()&&!i.pathname.includes("business/returnToShelves");return[{title:"\u5546\u54C1\u4FE1\u606F",dataIndex:"orderProductVOList",width:500,render(r){return O(un,{data:r})},fixed:"left"},{title:"\u53D1\u8D27\u4FE1\u606F",dataIndex:"orderProductVOList_1",width:260,render(r,a){return O(Hu,{data:a})}},{title:"\u7269\u6D41\u4FE1\u606F",dataIndex:"logistics",width:220,render(r,a){var f,m,l,c,s,d,v,h;const u=((m=(f=a.orderPackageList)==null?void 0:f[0])==null?void 0:m.shippingCarrier)||((c=(l=a.logisticsOrderPackageList)==null?void 0:l[0])==null?void 0:c.shippingCarrier),o=Gt(a.detailedAddress)||a.createType!=="0";return re("div",{className:"border-r h-full p-2",children:[O(fe,{label:"\u5C3E\u7A0B\u7269\u6D41",value:u?O(Le,{color:Jo[u],children:u}):null}),O(fe,{label:"\u7269\u6D41\u5355\u53F7",value:O(p0,{orderItem:a})}),a.shippingTime&&(((d=(s=a==null?void 0:a.orderPackageList)==null?void 0:s[0])==null?void 0:d.trackingNumber)||((h=(v=a==null?void 0:a.logisticsOrderPackageList)==null?void 0:v[0])==null?void 0:h.trackingNumber))?O(fe,{label:"\u51FA\u8D27\u65F6\u95F4",value:Vt(a.shippingTime)}):null,a.warehouseDeliveryTime?O(fe,{label:"\u51FA\u5E93\u65F6\u95F4",value:Vt(a.warehouseDeliveryTime)}):null,o?O(ve,{children:O(fe,{label:"\u6536\u8D27\u5730\u5740",value:O(wt.Text,{copyable:!0,children:`${Gt(a.recipients)} ${Gt(a.mobileNumber)} ${Gt(a.province)||""} ${Gt(a.city)||""} ${a.detailedAddress||""}`})})}):null,Ze()&&a.consignmentStatus?O(fe,{label:"\u4EA4\u8FD0\u72B6\u6001",value:O(Le,{color:"#168cff",children:"\u4EA4\u8FD0\u4E2D"})}):null]})}},...pt()?[{title:"\u4E70\u5BB6\u4FE1\u606F",dataIndex:"seller",width:180,render(r,a){return re("div",{className:"border-r h-full p-2",children:[O(fe,{label:"\u4E70\u5BB6",value:pr(a.buyerUsername)}),O(fe,{label:"\u6536\u8D27\u4EBA",value:pr(a.recipients)}),O(fe,{label:"\u6536\u8D27\u7535\u8BDD",value:pr(a.mobileNumber)}),a.messageToSeller?O(fe,{valueClassName:"text-red-500 font-bold",label:"\u4E70\u5BB6\u7559\u8A00",value:a.messageToSeller}):null,O(fe,{label:"\u6536\u8D27\u5730\u5740",value:pr(a.detailedAddress)})]})}}]:[],...Ze()?[{title:"\u5356\u5BB6\u4FE1\u606F",dataIndex:"sellerInfo",width:180,render(r,a){return re("div",{className:"border-r h-full p-2",children:[O(fe,{label:"\u5356\u5BB6\u6807\u8BC6",value:a.tenantryNo}),O(fe,{valueClassName:Me({"!text-red-500 !font-bold":a.remark}),label:"\u5356\u5BB6\u5907\u6CE8",value:a.remark}),O(fe,{label:"\u4ED3\u5E93\u5907\u6CE8",valueClassName:Me({"!text-red-500 !font-bold":a.entrepotRemark}),value:a.entrepotRemark})]})}}]:[],{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"fee",width:200,render(r,a){return re("div",{className:"border-r h-full p-2",children:[O(fe,{label:"\u603B\u8D39\u7528(TWD)",value:a.orderAmount}),O(fe,{label:"\u9884\u4F30\u8FD0\u8D39(TWD)",value:a.estimatedShippingFee}),O(fe,{label:"\u5B9E\u9645\u8FD0\u8D39(TWD)",value:a.actualShippingFee})]})}},...e==="order_status"?[]:[],...e===Ge.OUT_ORDER_STATUS&&Ze()?[{title:"\u4E0A\u67B6\u65F6\u95F4",dataIndex:"overseasWarehouseListingTime",width:180,render:r=>O("div",{className:"border-r h-full p-2",children:r})},{title:"\u4E0B\u67B6\u65F6\u95F4",dataIndex:"overseasWarehouseDelistingTime",width:180,render:r=>O("div",{className:"border-r h-full p-2",children:r})}]:[],...n?[{title:"\u64CD\u4F5C",dataIndex:"actions",width:120,render(r,a){return O(d0,{orderItem:a,dictCode:e})}}]:[]]}var H0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",useColumns:ja}),m0=({children:t,color:e="red"})=>O("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 -rotate-45 pointer-events-none",children:O("span",{className:`${e==="red"?"text-red-400 border-red-400":"text-green-400 border-green-400"} text-1xl font-black opacity-60 whitespace-nowrap border-4  border-dashed px-10 py-3 rounded-lg bg-red-50/30 backdrop-blur-sm`,children:t})});const kt="arco-descriptions-item-label !w-auto !pb-0",Dt="arco-descriptions-item-value !w-auto !pb-0",g0=t=>{var F,E,T,M,S;const{className:e,style:i,loading:n,data:r,dictCode:a,pagination:u,onSelect:o}=t,[f,m]=se.exports.useState(),[l,c]=se.exports.useState([]),[s,d]=se.exports.useState(),[v,h]=se.exports.useState(),y=pt()&&a!==Ge.OUT_ORDER_STATUS,[g]=hi(),[_]=hi(),w=ja(t),A=_e(async k=>{const p=Ce.exports.merge(f,await g.validate()),R=Ce.exports.omit(p,["orderProductVOList","orderPackageList"]);if(R.logisticsOrderProductList.some(L=>{var K,z;return L.deliveryMethod==="1"&&!L.stockOutStatus?!((K=L.productInventoryVO)==null?void 0:K.stockProductId)||!((z=L.productInventoryVO)==null?void 0:z.number):!1})){we.error("\u5E93\u5B58\u53D1\u8D27\uFF0C\u8BF7\u9009\u62E9\u5546\u54C1\u5E93\u5B58");return}if(Ce.exports.isNil(R.sendWarehouse)){we.error("\u8BF7\u9009\u62E9\u6253\u5305\u4ED3\u5E93\uFF01");return}let x="\u6253\u5305";k&&(x="\u6DFB\u52A0"),R.whetherPack&&R.orderStatus!=="5"&&(x="\u66F4\u65B0");const G=ue(q({},R),{logisticsOrderProductList:[...R.logisticsOrderProductList,...k?[k]:[]]});await Ee(()=>at.update(G),x),d(null),Fe.emit(Oe.refreshOrderPage)},{manual:!0}),B=Ro(),C=_e(async()=>{const k=await _.validate();await Ee(()=>at.addProduct(q({},k)),"\u6DFB\u52A0"),d(null),Fe.emit(Oe.refreshOrderPage)},{manual:!0});yi(Oe.clearSelectOrderList,()=>{c([])}),se.exports.useEffect(()=>{o==null||o(l)},[l]);const N=se.exports.useMemo(()=>{var k;if(l.length===((k=r==null?void 0:r.list)==null?void 0:k.length))return!0},[l,r==null?void 0:r.list]);return re("div",{className:e,style:i,children:[re("div",{children:[re("header",{className:"flex items-center",children:[o?O(pi,{disabled:!((F=r==null?void 0:r.list)==null?void 0:F.length),className:"mr-2 pl-[10px]",checked:N,onChange:k=>{var p;c(k?(p=r==null?void 0:r.list)==null?void 0:p.map(R=>R.id):[])}}):null,w.map(k=>O("div",{className:"font-medium px-4 py-2",style:{width:k.width,flex:k.width?"auto":1},children:k.title},k.dataIndex))]}),O(ht,{className:"block text-center",loading:n,children:O("main",{className:"flex flex-col gap-4 bg-white text-left",children:(E=r==null?void 0:r.list)==null?void 0:E.map(k=>re("div",{className:"border relative",children:[y?O(Xo,{item:k,setActionType:d,setCurrentOrder:m}):null,re("header",{className:"gap-12 pl-1 pr-4 py-2 border-b flex",children:[re("div",{className:"flex w-[420px] items-baseline",children:[o?O(pi,{checked:l.includes(k.id),onChange:p=>{c(p?[...l,k.id]:l.filter(R=>R!==k.id))}}):null,O(ni,{content:"\u6253\u5305\u8BA2\u5355\u72B6\u6001",children:O(Le,{bordered:!0,size:"small",className:"mx-2",color:za[Number(k.orderStatus)],children:O(qr,{defaultValue:"\u5F85\u6253\u5305",dictCode:"order_status",value:k.orderStatus})})}),Ze()&&a===Ge.OUT_ORDER_STATUS&&Ne().valueOf()>=Ne(k.overseasWarehouseDelistingTime).valueOf()?O(Le,{bordered:!0,size:"small",className:"mx-2",color:za[Number(k.orderStatus)],children:"\u9000\u4EF6\u5DF2\u8FC7\u671F"}):null,k.abeyanceStatus&&Ze()?O(Le,{className:"mr-2",color:"red",children:"\u5F02\u5E38\u6401\u7F6E"}):null,O("span",{className:kt,children:"\u8BA2\u5355\u7F16\u53F7\uFF1A"}),O("span",{className:Me(Dt,"truncate"),children:O(wt.Text,{copyable:!0,children:k.shrimpOrderNo})})]}),O(ru,{data:k})]}),O("main",{className:"flex p-1",children:w.map(p=>O("div",{style:{width:p.width,flex:p.width?"auto":1},children:p.render(k[p.dataIndex],k)},p.dataIndex))}),re("footer",{className:"flex border-t py-2 px-4",children:[re("div",{className:"gap-12 grid grid-cols-[200px_280px]",children:[re("div",{children:[O("span",{className:kt,children:"\u4E0B\u5355\uFF1A"}),O("span",{className:Dt,children:Vt(k.orderTime)})]}),k.packTime?re("div",{children:[O("span",{className:kt,children:"\u63D0\u4EA4\uFF1A"}),O("span",{className:Dt,children:Vt(k.packTime)})]}):null]}),re("div",{className:"ml-auto flex",children:[O("span",{className:kt,children:"\u6211\u7684\u5907\u6CE8\uFF1A"}),O("span",{className:Dt,children:(pt()?k.remark:k.entrepotRemark)||"\u6682\u65E0"}),pt()?O(me,{type:"text",size:"mini",onClick:()=>{(k==null?void 0:k.sendWarehouse)==="0"&&delete k.sendWarehouse,m(ue(q({},k),{logisticsOrderProductList:k.orderProductVOList})),d(Ye.edit)},children:O(ui,{})}):null]})]}),k.isOverseasWarehouseReturn||k.isReissued?O(m0,{color:k.isReissued?"green":"red",children:k.isReissued?"\u6362\u5355\u91CD\u51FA":k.returnStatus==="2"?"\u9000\u4EF6\u5165\u5E93(\u9500\u6BC1)":"\u5DF2\u9000\u4EF6\u5165\u5E93"}):null]},k.id))})}),((T=r==null?void 0:r.list)==null?void 0:T.length)?O(Oo,{className:"mt-4 flex justify-end",total:r==null?void 0:r.total,showTotal:!0,sizeCanChange:!0,current:(u==null?void 0:u.current)||1,pageSize:u==null?void 0:u.pageSize,sizeOptions:[10,25,50,100,300,500],onChange:(k,p)=>{console.log(k,p,u),u?k!==u.current?u.changeCurrent(k):u.changePageSize(p):(u.changeCurrent(k),u.changePageSize(p))}}):null,!((M=r==null?void 0:r.list)==null?void 0:M.length)&&!n?O(Ur,{className:"py-28"}):null]}),O(Te,{title:"\u6DFB\u52A0\u5546\u54C1",visible:s===Ye.create,onCancel:()=>{_.resetFields(),d(null)},unmountOnExit:!0,confirmLoading:C.loading,onOk:async()=>{C.run(),_.resetFields()},children:O(ut,{span:24,form:_,initialValues:{orderId:f==null?void 0:f.id,quantity:1},formItemConfigList:[...Wo.filter(k=>!["trackingNo"].includes(k.schema.field)),{schema:{field:"orderId"},formItemProps:{hidden:!0}}]})}),O(Te,{title:"\u67E5\u770B\u9762\u5355",visible:v,onCancel:()=>h(null),unmountOnExit:!0,onOk:async()=>{h(null)},children:"\u9762\u5355\u4FE1\u606F\uFF0C\u5F00\u53D1\u4E2D..."}),O(Te,{style:{width:870},title:"\u7F16\u8F91\u8BA2\u5355",visible:s===Ye.edit,onCancel:()=>d(null),confirmLoading:A.loading,unmountOnExit:!0,onOk:async()=>{A.run()},children:s===Ye.edit?re(ve,{children:[O(ut,{span:24,form:g,initialValues:ue(q({},f),{sendWarehouse:(f==null?void 0:f.sendWarehouse)||((S=B==null?void 0:B.data)==null?void 0:S.id),transportType:(f==null?void 0:f.transportType)||"KY"}),className:"mb-4",formItemConfigList:[{schema:{field:"sendWarehouse",label:"\u6253\u5305\u4ED3\u5E93",required:!0},formItemProps:{},control:"entrepotSelector"},{schema:{field:"transportType",label:"\u8FD0\u8F93\u7C7B\u578B",required:!0},control:"dictSelector",controlProps:{dictCode:"transport_type",type:"radio"}},{schema:{field:"remark",label:"\u5907\u6CE8"},control:"textarea",controlProps:{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\uFF0C\u6B64\u5907\u6CE8\u4ED3\u5E93\u53EF\u89C1"}}],onChange:async(k,p)=>{const R=await g.validate();m(q(q({},f),R))}}),O(un,{data:f==null?void 0:f.orderProductVOList,isEdit:!0,onChange:k=>{m(ue(q({},f),{logisticsOrderProductList:k.map(p=>{var R,D,x,G;return Ce.exports.omit(ue(q({},p),{trackingNo:p.trackingNo?p.trackingNo.trim():"",productInventoryVO:{stockProductId:((D=(R=p.productInventoryVO)==null?void 0:R[0])==null?void 0:D.id)||p.stockProductId,number:((G=(x=p.productInventoryVO)==null?void 0:x[0])==null?void 0:G.useAbleQuantityChange)||p.stockUse},deliveryMethod:p.stockOutStatus?"0":p.deliveryMethod}),p.stockOutStatus?["productInventoryVO","trackingNo"]:[])})}))}}),O(me,{className:"mt-4",type:"outline",long:!0,icon:O(Hr,{}),onClick:()=>{d(Ye.create)},children:"\u6DFB\u52A0\u5546\u54C1"})]}):null})]})};var Ha=g0,W0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",labelClass:kt,valueClass:Dt,default:Ha}),fe=({label:t,value:e,className:i,labelClassName:n,valueClassName:r})=>re("div",{className:Me("break-all mb-1",i),children:[re("span",{className:Me(kt,n),children:[t,"\uFF1A"]}),O("span",{className:Me(Dt,r),children:e||"-"})]});export{Pi as A,Vo as C,uu as E,ut as F,fe as L,Ge as O,Yr as P,U0 as R,Jr as S,Lu as T,$0 as W,cu as a,Ha as b,su as c,Er as d,qt as e,z0 as f,za as g,c0 as h,Ie as i,lu as j,en as k,vu as l,Nu as m,j0 as n,Be as o,H0 as p,W0 as q,gu as r,M0 as s};
