import{r as o,al as c,aj as m,O as I,j as B,b as t,F as P,B as a,H as D,M as j}from"./vendor.475cee01.js";import{c as u,S as T,k,F as g}from"./index.b2d919ca.js";import{s as p,E as w,c as M,F as R}from"./index.9a618fcf.js";import"./index.7f218578.js";import"./index.4f759f94.js";import"./entrepot.95f11770.js";import"./index.ab849bc2.js";/* empty css               */import"./shopStore.936c9d2c.js";import"./index.cc99a160.js";/* empty css              */import"./index.599b9453.js";/* empty css               */import"./index.36bc3114.js";/* empty css              */import"./style.4b618b1b.js";import"./clipboard.a809cca0.js";/* empty css               */import"./schema.524eafb7.js";/* empty css               */import"./schema.035d054d.js";const f=600;var ue=()=>{const[E,l]=o.exports.useState(!1);o.exports.useState(!1);const[S,i]=o.exports.useState(!1),n=o.exports.useRef(),[h]=c.useForm(),[C]=c.useForm();c.useForm();const b=o.exports.useRef(),F=m(async()=>{const e=await h.validate();return p(()=>u.synchronousGoods({productUpdateEndTime:I(e.date[1]).format("YYYY-MM-DD"),productUpdateStartTime:I(e.date[0]).format("YYYY-MM-DD"),storeId:e.storeId}),"\u540C\u6B65\u5546\u54C1").then(()=>{l(!1),n.current.refreshSearchTable()})},{manual:!0}),y=m(async()=>{const e=await C.validate();return p(()=>u.synchronousGoodsInfo({platformIds:e.platformIds,storeId:e.storeId}),"\u540C\u6B65\u6307\u5B9A\u5546\u54C1").then(()=>{i(!1),n.current.refreshSearchTable()})},{manual:!0}),x=m(async e=>p(()=>u.addGoodsInfoBatch(e),"\u5BFC\u5165\u5546\u54C1"),{manual:!0});return B("div",{className:"bg-white p-4",children:[t("input",{accept:".xlsx",style:{display:"none"},hidden:!0,type:"file",ref:b,onChange:async e=>{const s=e.target.files[0];if(s){const d=await w(s);console.log(d),await M({content:`\u786E\u8BA4\u5BFC\u5165${d.length}\u4E2A\u5546\u54C1\u5417\uFF1F`});const A=d.slice(1).map(r=>({productName:r[0],sku:r[1],productCost:r[2],unitPrice:r[3],remark:r[4]}));x.run(A)}}}),t(T,{name:"\u5546\u54C1\u7BA1\u7406",getListRequest:u.getProductList,removeRequest:u.deleteGoodsInfo,updateRequest:u.updateGoodsInfo,createRequest:u.addGoodsInfo,tableProps:{scroll:{x:1200}},createText:"\u65B0\u589E\u5546\u54C1",createButtonProps:{status:"success"},filterFormProps:{span:24},ref:n,formItemConfigList:[{schema:{label:"\u56FE\u7247",field:"productImg"},control:"upload",controlProps:{limit:3},isCreate:!0,hideTable:!0},{schema:{label:"tenantryId",field:"tenantryId"},formItemProps:{hidden:!0},control:"input",hideTable:!0,isCreate:!0},{schema:{label:"\u5546\u54C1\u540D\u79F0",field:"productName",required:!0},isCreate:!0,hideTable:!0},{schema:{label:"\u5546\u54C1\u7F16\u7801",field:"productCode"},hideTable:!0,isSearch:!0},{schema:{label:"\u5546\u54C1\u4FE1\u606F",field:"goodsInfo"},width:320,render(e,s){return t(k,{data:s})}},{schema:{label:"SKU",field:"sku"},isSearch:!0,isCreate:!0,render(e){return e||"\u672A\u586B\u5199"},hideTable:!0},{schema:{label:"\u5546\u54C1\u540D\u79F0",field:"productName"},isSearch:!0,hideTable:!0},{schema:{label:"\u5546\u54C1ID",field:"platformItemId"},isSearch:!0,hideTable:!0},{schema:{label:"\u6210\u672C",field:"productCost"},control:"number",isCreate:!0,render(e){return e||0}},{schema:{label:"\u5546\u54C1\u4EF7\u683C",field:"unitPrice"},control:"number",isCreate:!0,render(e){return e||0}},{schema:{label:"\u5907\u6CE8",field:"remark"},isCreate:!0,render(e){return e||"-"}}],formModalProps:{style:{width:f}},leftTool:()=>B(P,{children:[t(a,{type:"primary",onClick:()=>{l(!0)},children:"\u540C\u6B65\u5546\u54C1"}),t(a,{type:"primary",onClick:()=>{i(!0)},children:"\u540C\u6B65\u6307\u5B9A\u5546\u54C1"}),t(a,{type:"primary",onClick:()=>{b.current.click()},loading:x.loading,children:"\u5BFC\u5165\u6570\u636E"}),t(a,{type:"primary",onClick:()=>{R([["\u5546\u54C1\u540D\u79F0","SKU","\u6210\u672C","\u5546\u54C1\u4EF7\u683C","\u5907\u6CE8"]],"\u6DFB\u52A0\u5546\u54C1\u6A21\u677F"),D.success("\u5BFC\u51FA\u6210\u529F")},children:"\u5BFC\u51FA\u6A21\u677F"})]})}),t(j,{style:{width:f},visible:E,title:"\u540C\u6B65\u5546\u54C1",onCancel:()=>l(!1),onOk:()=>{F.run()},confirmLoading:F.loading,unmountOnExit:!0,children:t(g,{form:h,span:24,formItemConfigList:[{schema:{label:"\u7535\u5546\u5E73\u53F0",field:"platform"},control:"dictSelector",controlProps:{dictCode:"platform_type"}},{schema:{label:"\u6240\u5C5E\u5E97\u94FA",field:"storeId"},control:"shopSelector",controlProps:{mode:"multiple"}},{schema:{label:"\u540C\u6B65\u65F6\u95F4\u6BB5",field:"date"},control:"datePickerRange"}]})}),t(j,{style:{width:f},visible:S,title:"\u540C\u6B65\u6307\u5B9A\u5546\u54C1",onCancel:()=>i(!1),onOk:()=>{y.run()},confirmLoading:y.loading,unmountOnExit:!0,children:t(g,{form:C,span:24,formItemConfigList:[{schema:{label:"\u7535\u5546\u5E73\u53F0",field:"platform"},control:"dictSelector",controlProps:{dictCode:"platform_type"}},{schema:{label:"\u6240\u5C5E\u5E97\u94FA",field:"storeId"},control:"shopSelector",controlProps:{}},{schema:{label:"\u5546\u54C1ID",field:"platformIds"},controlProps:{placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1ID, \u591A\u4E2A\u5546\u54C1ID\u7528\u9017\u53F7\u9694\u5F00"}}]})})]})};export{f as ModalWidth,ue as default};
