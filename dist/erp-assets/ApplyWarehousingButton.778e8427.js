var x=Object.defineProperty,E=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var f=(t,e,o)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,r=(t,e)=>{for(var o in e||(e={}))P.call(e,o)&&f(t,o,e[o]);if(m)for(var o of m(e))A.call(e,o)&&f(t,o,e[o]);return t},a=(t,e)=>E(t,y(e));import{b as u,M as S,E as b,r as F,al as j,af as B,j as k,F as C,B as W}from"./vendor.581b77cf.js";import{F as L,W as v}from"./index.04370c22.js";import{F as w}from"./index.16154476.js";import{e as M}from"./index.7553f754.js";import{s as D}from"./index.25c2c087.js";var I=t=>{var s;const{form:e,modalProps:o}=t,l=M();return u(S,a(r(a(r({},w),{title:"\u5165\u5E93\u7533\u8BF7"}),o),{children:l.loading?u(b,{className:"mx-auto block w-[max-content]"}):u(L,{form:e,span:24,initialValues:{sendWarehouse:(s=l.data)==null?void 0:s.id},formItemConfigList:[{schema:{label:"\u9001\u5F80\u4ED3\u5E93",field:"sendWarehouse",required:!0},control:"entrepotSelector"},{schema:{label:"\u5FEB\u9012\u5355\u53F7",field:"expressNo"},control:"select",controlProps:{allowCreate:!0,mode:"multiple",placeholder:"\u8F93\u5165\u540E\u6309\u56DE\u8F66\u952E"}},{schema:{label:"\u9009\u62E9\u5546\u54C1",field:"stockStorageApplyProductList",required:!0},control:"productSelector"}]})}))};const N=t=>{const{refreshSearchTable:e,productInfo:o,children:l="\u5165\u5E93\u7533\u8BF7"}=t,[s,i]=F.exports.useState(!1),[n]=j.useForm(),{run:g,loading:h}=B(async()=>{const c=await n.validate();return D(()=>{var d;return v.insert(a(r({},c),{expressNo:(d=c.expressNo)==null?void 0:d.toString(),stockStorageApplyProductList:c.stockStorageApplyProductList.map(p=>({logisticsProductId:p.id,sendProductCount:p.num}))}))}).then(()=>{i(!1),e()})},{manual:!0});return F.exports.useEffect(()=>{s&&(o?n.setFieldsValue({stockStorageApplyProductList:[a(r({},o),{num:20})]}):n.resetFields())},[s,o]),k(C,{children:[u(W,{type:"primary",onClick:()=>{i(!0)},status:"warning",children:l}),u(I,{form:n,modalProps:{visible:s,title:"\u5165\u5E93\u7533\u8BF7",onCancel:()=>i(!1),confirmLoading:h,onOk:async()=>{g()}}})]})};var $=N;export{$ as A};
