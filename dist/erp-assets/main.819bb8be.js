import{r as O}from"./vendor.475cee01.js";var P={exports:{}};(()=>{var j={675:(B,n)=>{function h(f,u){return f.objectStoreNames.contains(u)}Object.defineProperty(n,"__esModule",{value:!0}),n.optionsGenerator=n.createTransaction=n.validateBeforeTransaction=n.validateStoreName=void 0,n.validateStoreName=h,n.validateBeforeTransaction=function(f,u,i){f||i("You need to use the openDatabase function to create a database before you query it!"),h(f,u)||i("objectStore does not exists: ".concat(u))},n.createTransaction=function(f,u){var i=f.transaction(u.storeName,u.dbMode);return i.onerror=u.error,i.oncomplete=u.complete,i.onabort=u.abort,i},n.optionsGenerator=function(f,u,i,d){return{storeName:u,dbMode:f,error:function(p){i(p)},complete:function(){d()},abort:function(p){i(p)}}}},823:(B,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDatabaseTransaction=void 0;var f=h(675);n.createDatabaseTransaction=function(u,i,d,p,s,l,m){l===void 0&&(l=f.createTransaction),m===void 0&&(m=f.optionsGenerator);var y=l(u,m(i,d,s,p));return{store:y.objectStore(d),transaction:y}}},401:(B,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createReadonlyTransaction=void 0;var f=h(84),u=h(823);n.createReadonlyTransaction=function(i,d,p,s){return(0,u.createDatabaseTransaction)(i,f.DBMode.readonly,d,p,s)}},987:(B,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createReadwriteTransaction=void 0;var f=h(84),u=h(823);n.createReadwriteTransaction=function(i,d,p,s){return(0,u.createDatabaseTransaction)(i,f.DBMode.readwrite,d,p,s)}},629:function(B,n,h){var f=this&&this.__createBinding||(Object.create?function(d,p,s,l){l===void 0&&(l=s);var m=Object.getOwnPropertyDescriptor(p,s);m&&!("get"in m?!p.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return p[s]}}),Object.defineProperty(d,l,m)}:function(d,p,s,l){l===void 0&&(l=s),d[l]=p[s]}),u=this&&this.__exportStar||function(d,p){for(var s in d)s==="default"||Object.prototype.hasOwnProperty.call(p,s)||f(p,d,s)};Object.defineProperty(n,"__esModule",{value:!0}),n.IndexedDB=n.AccessDB=void 0;var i=h(7);Object.defineProperty(n,"AccessDB",{enumerable:!0,get:function(){return i.AccessDB}}),Object.defineProperty(n,"IndexedDB",{enumerable:!0,get:function(){return i.IndexedDB}}),u(h(157),n)},7:function(B,n,h){var f=this&&this.__assign||function(){return f=Object.assign||function(o){for(var a,r=1,t=arguments.length;r<t;r++)for(var e in a=arguments[r])Object.prototype.hasOwnProperty.call(a,e)&&(o[e]=a[e]);return o},f.apply(this,arguments)},u=this&&this.__awaiter||function(o,a,r,t){return new(r||(r=Promise))(function(e,b){function v(w){try{g(t.next(w))}catch(c){b(c)}}function D(w){try{g(t.throw(w))}catch(c){b(c)}}function g(w){var c;w.done?e(w.value):(c=w.value,c instanceof r?c:new r(function(x){x(c)})).then(v,D)}g((t=t.apply(o,a||[])).next())})},i=this&&this.__generator||function(o,a){var r,t,e,b,v={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return b={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function D(g){return function(w){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;v;)try{if(r=1,t&&(e=2&c[0]?t.return:c[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,c[1])).done)return e;switch(t=0,e&&(c=[2&c[0],e.value]),c[0]){case 0:case 1:e=c;break;case 4:return v.label++,{value:c[1],done:!1};case 5:v.label++,t=c[1],c=[0];continue;case 7:c=v.ops.pop(),v.trys.pop();continue;default:if(!((e=(e=v.trys).length>0&&e[e.length-1])||c[0]!==6&&c[0]!==2)){v=0;continue}if(c[0]===3&&(!e||c[1]>e[0]&&c[1]<e[3])){v.label=c[1];break}if(c[0]===6&&v.label<e[1]){v.label=e[1],e=c;break}if(e&&v.label<e[2]){v.label=e[2],v.ops.push(c);break}e[2]&&v.ops.pop(),v.trys.pop();continue}c=a.call(o,v)}catch(x){c=[6,x],t=0}finally{r=e=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([g,w])}}},d=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessDB=n.IndexedDB=void 0;var p=d(h(689)),s=h(84),l=p.default.createContext({db:null,name:null,version:null}),m=l.Provider,y=l.Consumer;n.IndexedDB=function(o){var a=this,r=o.name,t=o.version,e=o.children;return o.objectStoresMeta.forEach(function(b){return u(a,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,(0,s.openDatabase)(r,t,function(D){var g=D.currentTarget.result.createObjectStore(b.store,b.storeConfig);b.storeSchema.forEach(function(w){g.createIndex(w.name,w.keypath,w.options)})})];case 1:return v.sent(),[2]}})})}),p.default.createElement(m,{value:{db:null,name:r,version:t}},e)},n.AccessDB=function(o){var a=o.children,r=o.objectStore;return p.default.createElement(y,null,function(t){var e=t.db,b=t.name,v=t.version;return a(f({db:e},(0,s.DBOperations)(b,v,r)))})}},84:(B,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DBMode=n.DBOperations=n.CreateObjectStore=n.openDatabase=void 0;var f,u=h(675),i=h(987),d=h(401),p=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;function s(l,m,y){return new Promise(function(o,a){var r,t=p.open(l,m);t.onsuccess=function(){r=t.result,o(r)},t.onerror=function(){a("IndexedDB error: ".concat(t.error))},typeof y=="function"&&(t.onupgradeneeded=function(e){y(e,r)})})}n.openDatabase=s,n.CreateObjectStore=function(l,m,y){var o=p.open(l,m);o.onupgradeneeded=function(a){var r=a.target.result;y.forEach(function(t){if(!r.objectStoreNames.contains(t.store)){var e=r.createObjectStore(t.store,t.storeConfig);t.storeSchema.forEach(function(b){e.createIndex(b.name,b.keypath,b.options)})}}),r.close()},o.onsuccess=function(a){a.target.result.close()}},n.DBOperations=function(l,m,y){return{add:function(o,a){return new Promise(function(r,t){s(l,m).then(function(e){var b=(0,i.createReadwriteTransaction)(e,y,r,t).store.add(o,a);b.onsuccess=function(v){a=v.target.result,r(a)},b.onerror=function(v){return t(v)}})})},getByID:function(o){return new Promise(function(a,r){s(l,m).then(function(t){(0,u.validateBeforeTransaction)(t,y,r),(0,d.createReadonlyTransaction)(t,y,a,r).store.get(o).onsuccess=function(e){a(e.target.result)}})})},getAll:function(){return new Promise(function(o,a){s(l,m).then(function(r){(0,u.validateBeforeTransaction)(r,y,a);var t=(0,d.createReadonlyTransaction)(r,y,o,a).store.getAll();t.onerror=function(e){return a(e)},t.onsuccess=function(e){var b=e.target.result;o(b)}})})},update:function(o,a){return new Promise(function(r,t){s(l,m).then(function(e){(0,u.validateBeforeTransaction)(e,y,t);var b=(0,i.createReadwriteTransaction)(e,y,r,t),v=b.transaction,D=b.store;v.oncomplete=function(g){return r(g)},D.put(o,a)})})},deleteRecord:function(o){return new Promise(function(a,r){s(l,m).then(function(t){(0,u.validateBeforeTransaction)(t,y,r),(0,i.createReadwriteTransaction)(t,y,a,r).store.delete(o).onsuccess=function(e){return a(e)}})})},clear:function(){return new Promise(function(o,a){s(l,m).then(function(r){(0,u.validateBeforeTransaction)(r,y,a);var t=(0,i.createReadwriteTransaction)(r,y,o,a),e=t.store;t.transaction.oncomplete=function(){return o()},e.clear()})})},openCursor:function(o,a){return new Promise(function(r,t){s(l,m).then(function(e){(0,u.validateBeforeTransaction)(e,y,t),(0,d.createReadonlyTransaction)(e,y,r,t).store.openCursor(a).onsuccess=function(b){o(b),r()}})})},getByIndex:function(o,a){return new Promise(function(r,t){s(l,m).then(function(e){(0,u.validateBeforeTransaction)(e,y,t),(0,d.createReadonlyTransaction)(e,y,r,t).store.index(o).get(a).onsuccess=function(b){r(b.target.result)}})})}}},(f=n.DBMode||(n.DBMode={})).readonly="readonly",f.readwrite="readwrite"},157:(B,n,h)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.useIndexedDB=n.initDB=void 0;var f=h(689),u=h(84),i={version:null,name:null};n.initDB=function(d){var p=d.name,s=d.version,l=d.objectStoresMeta;i.name=p,i.version=s,Object.freeze(i),(0,u.CreateObjectStore)(p,s,l)},n.useIndexedDB=function(d){if(!i.name||!i.version)throw new Error("Please, initialize the DB before the use.");return(0,f.useMemo)(function(){return(0,u.DBOperations)(i.name,i.version,d)},[i,d])}},689:B=>{B.exports=O.exports}},_={},T=function B(n){var h=_[n];if(h!==void 0)return h.exports;var f=_[n]={exports:{}};return j[n].call(f.exports,f,f.exports,B),f.exports}(629);P.exports=T})();export{P as m};
